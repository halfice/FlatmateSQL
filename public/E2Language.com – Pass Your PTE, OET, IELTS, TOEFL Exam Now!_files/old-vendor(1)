function detectIE(){var n=window.navigator.userAgent,t=n.indexOf("MSIE "),i;return t>0?parseInt(n.substring(t+5,n.indexOf(".",t)),10):n.indexOf("Trident/")>0?(i=n.indexOf("rv:"),parseInt(n.substring(i+3,n.indexOf(".",i)),10)):!1}function startNewRecording(){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(n){recorder=new MediaRecorder(n);recorder.addEventListener("dataavailable",saveRecord);recorder.start()})}function stopNewRecording(){recorder.stop();recorder.stream.getTracks()[0].stop()}function saveRecord(n){onUploadRecorderFile!=null&&onUploadRecorderFile(n.data)}!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=n(require("jquery")):n(jQuery)}(function(n){n.extend(n.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=n.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new n.validator(t,this[0]),n.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(t){i.settings.submitHandler&&(i.submitButton=t.target);n(this).hasClass("cancel")&&(i.cancelSubmit=!0);void 0!==n(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(t){function r(){var u,r;return i.settings.submitHandler?(i.submitButton&&(u=n("<input type='hidden'/>").attr("name",i.submitButton.name).val(n(i.submitButton).val()).appendTo(i.currentForm)),r=i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&u.remove(),void 0!==r?r:!1):!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})),i)},valid:function(){var t,i,r;return n(this[0]).is("form")?t=this.validate().form():(r=[],t=!0,i=n(this[0].form).validate(),this.each(function(){t=i.element(this)&&t;t||(r=r.concat(i.errorList))}),i.errorList=r),t},rules:function(t,i){if(this.length){var e,s,f,u,o,h,r=this[0];if(t)switch(e=n.data(r.form,"validator").settings,s=e.rules,f=n.validator.staticRules(r),t){case"add":n.extend(f,n.validator.normalizeRule(i));delete f.messages;s[r.name]=f;i.messages&&(e.messages[r.name]=n.extend(e.messages[r.name],i.messages));break;case"remove":return i?(h={},n.each(i.split(/\s/),function(t,i){h[i]=f[i];delete f[i];"required"===i&&n(r).removeAttr("aria-required")}),h):(delete s[r.name],f)}return u=n.validator.normalizeRules(n.extend({},n.validator.classRules(r),n.validator.attributeRules(r),n.validator.dataRules(r),n.validator.staticRules(r)),r),u.required&&(o=u.required,delete u.required,u=n.extend({required:o},u),n(r).attr("aria-required","true")),u.remote&&(o=u.remote,delete u.remote,u=n.extend(u,{remote:o})),u}}});n.extend(n.expr[":"],{blank:function(t){return!n.trim(""+n(t).val())},filled:function(t){var i=n(t).val();return null!==i&&!!n.trim(""+i)},unchecked:function(t){return!n(t).prop("checked")}});n.validator=function(t,i){this.settings=n.extend(!0,{},n.validator.defaults,t);this.currentForm=i;this.init()};n.validator.format=function(t,i){return 1===arguments.length?function(){var i=n.makeArray(arguments);return i.unshift(t),n.validator.format.apply(this,i)}:void 0===i?t:(arguments.length>2&&i.constructor!==Array&&(i=n.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),n.each(i,function(n,i){t=t.replace(new RegExp("\\{"+n+"\\}","g"),function(){return i})}),t)};n.extend(n.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:n([]),errorLabelContainer:n([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(n){this.lastActive=n;this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,n,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(n)))},onfocusout:function(n){!this.checkable(n)&&(n.name in this.submitted||!this.optional(n))&&this.element(n)},onkeyup:function(t,i){9===i.which&&""===this.elementValue(t)||-1!==n.inArray(i.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(n){n.name in this.submitted?this.element(n):n.parentNode.name in this.submitted&&this.element(n.parentNode)},highlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(r):n(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(r):n(t).removeClass(i).addClass(r)}},setDefaults:function(t){n.extend(n.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:n.validator.format("Please enter no more than {0} characters."),minlength:n.validator.format("Please enter at least {0} characters."),rangelength:n.validator.format("Please enter a value between {0} and {1} characters long."),range:n.validator.format("Please enter a value between {0} and {1}."),max:n.validator.format("Please enter a value less than or equal to {0}."),min:n.validator.format("Please enter a value greater than or equal to {0}."),step:n.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function i(t){var r=n.data(this.form,"validator"),u="on"+t.type.replace(/^validate/,""),i=r.settings;i[u]&&!n(this).is(i.ignore)&&i[u].call(r,this,t)}this.labelContainer=n(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||n(this.currentForm);this.containers=n(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var t,r=this.groups={};n.each(this.settings.groups,function(t,i){"string"==typeof i&&(i=i.split(/\s/));n.each(i,function(n,i){r[i]=t})});t=this.settings.rules;n.each(t,function(i,r){t[i]=n.validator.normalizeRule(r)});n(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",i).on("click.validate","select, option, [type='radio'], [type='checkbox']",i);this.settings.invalidHandler&&n(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler);n(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),n.extend(this.submitted,this.errorMap),this.invalid=n.extend({},this.errorMap),this.valid()||n(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var n=0,t=this.currentElements=this.elements();t[n];n++)this.check(t[n]);return this.valid()},element:function(t){var e,o,i=this.clean(t),r=this.validationTargetFor(i),u=this,f=!0;return void 0===r?delete this.invalid[i.name]:(this.prepareElement(r),this.currentElements=n(r),o=this.groups[r.name],o&&n.each(this.groups,function(n,t){t===o&&n!==r.name&&(i=u.validationTargetFor(u.clean(u.findByName(n))),i&&i.name in u.invalid&&(u.currentElements.push(i),f=f&&u.check(i)))}),e=this.check(r)!==!1,f=f&&e,this.invalid[r.name]=e?!1:!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n(t).attr("aria-invalid",!e)),f},showErrors:function(t){if(t){var i=this;n.extend(this.errorMap,t);this.errorList=n.map(this.errorMap,function(n,t){return{message:n,element:i.findByName(t)[0]}});this.successList=n.grep(this.successList,function(n){return!(n.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){n.fn.resetForm&&n(this.currentForm).resetForm();this.invalid={};this.submitted={};this.prepareForm();this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(n){var t;if(this.settings.unhighlight)for(t=0;n[t];t++)this.settings.unhighlight.call(this,n[t],this.settings.errorClass,""),this.findByName(n[t].name).removeClass(this.settings.validClass);else n.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(n){var t,i=0;for(t in n)n[t]&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(n){n.not(this.containers).text("");this.addWrapper(n).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{n(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===n.grep(this.errorList,function(n){return n.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return n(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var r=this.name||n(this).attr("name");return!r&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=n(this).closest("form")[0]),r in i||!t.objectLength(n(this).rules())?!1:(i[r]=!0,!0)})},clean:function(t){return n(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return n(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=n([]);this.toHide=n([])},reset:function(){this.resetInternals();this.currentElements=n([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(n){this.reset();this.toHide=this.errorsFor(n)},elementValue:function(t){var i,r,f=n(t),u=t.type;return"radio"===u||"checkbox"===u?this.findByName(t.name).filter(":checked").val():"number"===u&&"undefined"!=typeof t.validity?t.validity.badInput?"NaN":f.val():(i=t.hasAttribute("contenteditable")?f.text():f.val(),"file"===u?"C:\\fakepath\\"===i.substr(0,12)?i.substr(12):(r=i.lastIndexOf("/"),r>=0?i.substr(r+1):(r=i.lastIndexOf("\\"),r>=0?i.substr(r+1):i)):"string"==typeof i?i.replace(/\r/g,""):i)},check:function(t){t=this.validationTargetFor(this.clean(t));var u,f,r,i=n(t).rules(),h=n.map(i,function(n,t){return t}).length,s=!1,e=this.elementValue(t);if("function"==typeof i.normalizer){if(e=i.normalizer.call(t,e),"string"!=typeof e)throw new TypeError("The normalizer should return a string value.");delete i.normalizer}for(f in i){r={method:f,parameters:i[f]};try{if(u=n.validator.methods[f].call(this,e,t,r.parameters),"dependency-mismatch"===u&&1===h){s=!0;continue}if(s=!1,"pending"===u)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!u)return this.formatAndAdd(t,r),!1}catch(o){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+r.method+"' method.",o),o instanceof TypeError&&(o.message+=".  Exception occurred when checking element "+t.id+", check the '"+r.method+"' method."),o;}}if(!s)return this.objectLength(i)&&this.successList.push(t),!0},customDataMessage:function(t,i){return n(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||n(t).data("msg")},customMessage:function(n,t){var i=this.settings.messages[n];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var n=0;n<arguments.length;n++)if(void 0!==arguments[n])return arguments[n]},defaultMessage:function(t,i){var r=this.findDefined(this.customMessage(t.name,i.method),this.customDataMessage(t,i.method),!this.settings.ignoreTitle&&t.title||void 0,n.validator.messages[i.method],"<strong>Warning: No message defined for "+t.name+"<\/strong>"),u=/\$?\{(\d+)\}/g;return"function"==typeof r?r=r.call(this,i.parameters,t):u.test(r)&&(r=n.validator.format(r.replace(u,"{$1}"),i.parameters)),r},formatAndAdd:function(n,t){var i=this.defaultMessage(n,t);this.errorList.push({message:i,element:n,method:t.method});this.errorMap[n.name]=i;this.submitted[n.name]=i},addWrapper:function(n){return this.settings.wrapper&&(n=n.add(n.parent(this.settings.wrapper))),n},defaultShowErrors:function(){for(var i,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,i=this.validElements();i[n];n++)this.settings.unhighlight.call(this,i[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return n(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var u,s,e,o,r=this.errorsFor(t),h=this.idOrName(t),f=n(t).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(i)):(r=n("<"+this.settings.errorElement+">").attr("id",h+"-error").addClass(this.settings.errorClass).html(i||""),u=r,this.settings.wrapper&&(u=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(u):this.settings.errorPlacement?this.settings.errorPlacement(u,n(t)):u.insertAfter(t),r.is("label")?r.attr("for",h):0===r.parents("label[for='"+this.escapeCssMeta(h)+"']").length&&(e=r.attr("id"),f?f.match(new RegExp("\\b"+this.escapeCssMeta(e)+"\\b"))||(f+=" "+e):f=e,n(t).attr("aria-describedby",f),s=this.groups[t.name],s&&(o=this,n.each(o.groups,function(t,i){i===s&&n("[name='"+o.escapeCssMeta(t)+"']",o.currentForm).attr("aria-describedby",r.attr("id"))}))));!i&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,t));this.toShow=this.toShow.add(r)},errorsFor:function(t){var r=this.escapeCssMeta(this.idOrName(t)),u=n(t).attr("aria-describedby"),i="label[for='"+r+"'], label[for='"+r+"'] *";return u&&(i=i+", #"+this.escapeCssMeta(u).replace(/\s+/g,", #")),this.errors().filter(i)},escapeCssMeta:function(n){return n.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(n){return this.groups[n.name]||(this.checkable(n)?n.name:n.id||n.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),n(t).not(this.settings.ignore)[0]},checkable:function(n){return/radio|checkbox/i.test(n.type)},findByName:function(t){return n(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return n("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(n,t){return this.dependTypes[typeof n]?this.dependTypes[typeof n](n,t):!0},dependTypes:{boolean:function(n){return n},string:function(t,i){return!!n(t,i.form).length},"function":function(n,t){return n(t)}},optional:function(t){var i=this.elementValue(t);return!n.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,n(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,i){this.pendingRequest--;this.pendingRequest<0&&(this.pendingRequest=0);delete this.pending[t.name];n(t).removeClass(this.settings.pendingClass);i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(n(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(n(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,i){return n.data(t,"previousValue")||n.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:i})})},destroy:function(){this.resetForm();n(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:n.extend(this.classRuleSettings,t)},classRules:function(t){var i={},r=n(t).attr("class");return r&&n.each(r.split(" "),function(){this in n.validator.classRuleSettings&&n.extend(i,n.validator.classRuleSettings[this])}),i},normalizeAttributeRule:function(n,t,i,r){/min|max|step/.test(i)&&(null===t||/number|range|text/.test(t))&&(r=Number(r),isNaN(r)&&(r=void 0));r||0===r?n[i]=r:t===i&&"range"!==t&&(n[i]=!0)},attributeRules:function(t){var r,i,u={},f=n(t),e=t.getAttribute("type");for(r in n.validator.methods)"required"===r?(i=t.getAttribute(r),""===i&&(i=!0),i=!!i):i=f.attr(r),this.normalizeAttributeRule(u,e,r,i);return u.maxlength&&/-1|2147483647|524288/.test(u.maxlength)&&delete u.maxlength,u},dataRules:function(t){var i,r,u={},f=n(t),e=t.getAttribute("type");for(i in n.validator.methods)r=f.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),this.normalizeAttributeRule(u,e,i,r);return u},staticRules:function(t){var i={},r=n.data(t.form,"validator");return r.settings.rules&&(i=n.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return n.each(t,function(r,u){if(u===!1)return void delete t[r];if(u.param||u.depends){var f=!0;switch(typeof u.depends){case"string":f=!!n(u.depends,i.form).length;break;case"function":f=u.depends.call(i,i)}f?t[r]=void 0!==u.param?u.param:!0:(n.data(i.form,"validator").resetElements(n(i)),delete t[r])}}),n.each(t,function(r,u){t[r]=n.isFunction(u)&&"normalizer"!==r?u(i):u}),n.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),n.each(["rangelength","range"],function(){var i;t[this]&&(n.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),n.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};n.each(t.split(/\s/),function(){i[this]=!0});t=i}return t},addMethod:function(t,i,r){n.validator.methods[t]=i;n.validator.messages[t]=void 0!==r?r:n.validator.messages[t];i.length<3&&n.validator.addClassRules(t,n.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var u=n(i).val();return u&&u.length>0}return this.checkable(i)?this.getLength(t,i)>0:t.length>0},email:function(n,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(n)},url:function(n,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(n)},date:function(n,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(n).toString())},dateISO:function(n,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(n)},number:function(n,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(n)},digits:function(n,t){return this.optional(t)||/^\d+$/.test(n)},minlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||u>=r},maxlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||r>=u},rangelength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||u>=r[0]&&u<=r[1]},min:function(n,t,i){return this.optional(t)||n>=i},max:function(n,t,i){return this.optional(t)||i>=n},range:function(n,t,i){return this.optional(t)||n>=i[0]&&n<=i[1]},step:function(t,i,r){var u=n(i).attr("type"),f="Step attribute on input type "+u+" is not supported.",e=new RegExp("\\b"+u+"\\b"),o=u&&!e.test("text,number,range");if(o)throw new Error(f);return this.optional(i)||t%r==0},equalTo:function(t,i,r){var u=n(r);return this.settings.onfocusout&&u.not(".validate-equalTo-blur").length&&u.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){n(i).valid()}),t===u.val()},remote:function(t,i,r,u){if(this.optional(i))return"dependency-mismatch";u="string"==typeof u&&u||"remote";var f,o,s,e=this.previousValue(i,u);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),e.originalMessage=e.originalMessage||this.settings.messages[i.name][u],this.settings.messages[i.name][u]=e.message,r="string"==typeof r&&{url:r}||r,s=n.param(n.extend({data:t},r.data)),e.old===s?e.valid:(e.old=s,f=this,this.startRequest(i),o={},o[i.name]=t,n.ajax(n.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:o,context:f.currentForm,success:function(n){var r,s,h,o=n===!0||"true"===n;f.settings.messages[i.name][u]=e.originalMessage;o?(h=f.formSubmitted,f.resetInternals(),f.toHide=f.errorsFor(i),f.formSubmitted=h,f.successList.push(i),f.invalid[i.name]=!1,f.showErrors()):(r={},s=n||f.defaultMessage(i,{method:u,parameters:t}),r[i.name]=e.message=s,f.invalid[i.name]=!0,f.showErrors(r));e.valid=o;f.stopRequest(i,o)}},r)),"pending")}}});var i,t={};n.ajaxPrefilter?n.ajaxPrefilter(function(n,i,r){var u=n.port;"abort"===n.mode&&(t[u]&&t[u].abort(),t[u]=r)}):(i=n.ajax,n.ajax=function(r){var f=("mode"in r?r:n.ajaxSettings).mode,u=("port"in r?r:n.ajaxSettings).port;return"abort"===f?(t[u]&&t[u].abort(),t[u]=i.apply(this,arguments),t[u]):i.apply(this,arguments)})}),function(n,t){typeof exports=="object"&&typeof module!="undefined"?t(require("jquery")):typeof define=="function"&&define.amd?define(["jquery"],t):t(n.jQuery)}(this,function(n){"use strict";function ou(n){return function(t){return n===t}}function su(n,t){return n===t}function hu(n){return function(t,i){return t[n]===i[n]}}function cu(){return!0}function lu(){return!1}function au(n){return function(){return!n.apply(n,arguments)}}function vu(n,t){return function(i){return n(i)&&t(i)}}function yu(n){return n}function pu(n,t){return function(){return n[t].apply(n,arguments)}}function wu(n){var t=++si+"";return n?n+t:t}function bu(n){var t=$(document);return{top:n.top+t.scrollTop(),left:n.left+t.scrollLeft(),width:n.right-n.left,height:n.bottom-n.top}}function ku(n){var i={},t;for(t in n)n.hasOwnProperty(t)&&(i[n[t]]=t);return i}function du(n,t){return t=t||"",t+n.split(".").map(function(n){return n.substring(0,1).toUpperCase()+n.substring(1)}).join("")}function gu(n,t,i){var u=this,r;return function(){var f=u,e=arguments,o=function(){r=null;i||n.apply(f,e)},s=i&&!r;clearTimeout(r);r=setTimeout(o,t);s&&n.apply(f,e)}}function hi(n){return n[0]}function vt(n){return n[n.length-1]}function nf(n){return n.slice(0,n.length-1)}function ci(n){return n.slice(1)}function tf(n,t){for(var r,i=0,u=n.length;i<u;i++)if(r=n[i],t(r))return r}function rf(n,t){for(var i=0,r=n.length;i<r;i++)if(!t(n[i]))return!1;return!0}function yt(t,i){return n.inArray(i,t)}function li(n,t){return yt(n,t)!==-1}function uf(n,t){return t=t||u.self,n.reduce(function(n,i){return n+t(i)},0)}function ff(n){for(var i=[],r=n.length,t=-1;++t<r;)i[t]=n[t];return i}function ef(n){return!n||!n.length}function of(n,t){if(!n.length)return[];var i=ci(n);return i.reduce(function(n,i){var r=vt(n);return t(vt(r),i)?r[r.length]=i:n[n.length]=[i],n},[[hi(n)]])}function sf(n){for(var i=[],t=0,r=n.length;t<r;t++)n[t]&&i.push(n[t]);return i}function hf(n){for(var i=[],t=0,r=n.length;t<r;t++)li(i,n[t])||i.push(n[t]);return i}function cf(n,t){var i=yt(n,t);return i===-1?null:n[i+1]}function lf(n,t){var i=yt(n,t);return i===-1?null:n[i-1]}function af(t){var r=t==="Comic Sans MS"?"Courier New":"Comic Sans MS",i=n("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),u=i.css("fontFamily",r).width(),f=i.css("fontFamily",t+","+r).width();return i.remove(),u!==f}function y(t){return t&&n(t).hasClass("note-editable")}function pf(t){return t&&n(t).hasClass("note-control-sizing")}function s(n){return n=n.toUpperCase(),function(t){return t&&t.nodeName.toUpperCase()===n}}function p(n){return n&&n.nodeType===3}function wf(n){return n&&n.nodeType===1}function ut(n){return n&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT/.test(n.nodeName.toUpperCase())}function g(n){return y(n)?!1:n&&/^DIV|^P|^LI|^H[1-7]/.test(n.nodeName.toUpperCase())}function bf(n){return n&&/^H[1-7]/.test(n.nodeName.toUpperCase())}function kf(n){return g(n)&&!bt(n)}function ft(n){return!gt(n)&&!yi(n)&&!pi(n)&&!g(n)&&!kt(n)&&!et(n)&&!dt(n)}function yi(n){return n&&/^UL|^OL/.test(n.nodeName.toUpperCase())}function wi(n){return n&&/^TD|^TH/.test(n.nodeName.toUpperCase())}function gt(n){return wi(n)||et(n)||y(n)}function df(n){return ft(n)&&!!ot(n,g)}function gf(n){return ft(n)&&!ot(n,g)}function ne(n,t){return n.nextSibling===t||n.previousSibling===t}function te(n,t){t=t||u.ok;var i=[];return n.previousSibling&&t(n.previousSibling)&&i.push(n.previousSibling),i.push(n),n.nextSibling&&t(n.nextSibling)&&i.push(n.nextSibling),i}function v(n){return p(n)?n.nodeValue.length:n?n.childNodes.length:0}function ti(n){var t=v(n);if(t===0)return!0;if(p(n)||t!==1||n.innerHTML!==it){if(i.all(n.childNodes,p)&&n.innerHTML==="")return!0}else return!0;return!1}function ki(n){ut(n)||v(n)||(n.innerHTML=it)}function ot(n,t){while(n){if(t(n))return n;if(y(n))break;n=n.parentNode}return null}function ie(n,t){for(n=n.parentNode;n;){if(v(n)!==1)break;if(t(n))return n;if(y(n))break;n=n.parentNode}return null}function nt(n,t){t=t||u.fail;var i=[];return ot(n,function(n){return y(n)||i.push(n),t(n)}),i}function re(n,t){var r=nt(n);return i.last(r.filter(t))}function ue(t,i){for(var u=nt(t),r=i;r;r=r.parentNode)if(n.inArray(r,u)>-1)return r;return null}function fe(n,t){t=t||u.fail;for(var i=[];n;){if(t(n))break;i.push(n);n=n.previousSibling}return i}function di(n,t){t=t||u.fail;for(var i=[];n;){if(t(n))break;i.push(n);n=n.nextSibling}return i}function ee(n,t){var i=[];return t=t||u.ok,function r(u){n!==u&&t(u)&&i.push(u);for(var f=0,e=u.childNodes.length;f<e;f++)r(u.childNodes[f])}(n),i}function oe(t,i){var u=t.parentNode,r=n("<"+i+">")[0];return u.insertBefore(r,t),r.appendChild(t),r}function ii(n,t){var i=t.nextSibling,r=t.parentNode;return i?r.insertBefore(n,i):r.appendChild(n),n}function ri(t,i){return n.each(i,function(n,i){t.appendChild(i)}),t}function st(n){return n.offset===0}function ht(n){return n.offset===v(n.node)}function gi(n){return st(n)||ht(n)}function nr(n,t){while(n&&n!==t){if(b(n)!==0)return!1;n=n.parentNode}return!0}function tr(n,t){if(!t)return!1;while(n&&n!==t){if(b(n)!==v(n.parentNode)-1)return!1;n=n.parentNode}return!0}function se(n,t){return st(n)&&nr(n.node,t)}function he(n,t){return ht(n)&&tr(n.node,t)}function b(n){for(var t=0;n=n.previousSibling;)t+=1;return t}function ct(n){return!!(n&&n.childNodes&&n.childNodes.length)}function ir(n,t){var i,r;if(n.offset===0){if(y(n.node))return null;i=n.node.parentNode;r=b(n.node)}else ct(n.node)?(i=n.node.childNodes[n.offset-1],r=v(i)):(i=n.node,r=t?0:n.offset-1);return{node:i,offset:r}}function ui(n,t){var i,r;if(v(n.node)===n.offset){if(y(n.node))return null;i=n.node.parentNode;r=b(n.node)+1}else ct(n.node)?(i=n.node.childNodes[n.offset],r=0):(i=n.node,r=t?v(n.node):n.offset+1);return{node:i,offset:r}}function rr(n,t){return n.node===t.node&&n.offset===t.offset}function ce(n){if(p(n.node)||!ct(n.node)||ti(n.node))return!0;var t=n.node.childNodes[n.offset-1],i=n.node.childNodes[n.offset];return(!t||ut(t))&&(!i||ut(i))?!0:!1}function le(n,t){while(n){if(t(n))return n;n=ir(n)}return null}function ae(n,t){while(n){if(t(n))return n;n=ui(n)}return null}function ve(n){if(!p(n.node))return!1;var t=n.node.nodeValue.charAt(n.offset-1);return t&&t!==" "&&t!==ai}function ye(n,t,i,r){for(var u=n,f;u;){if(i(u),rr(u,t))break;f=r&&n.node!==u.node&&t.node!==u.node;u=ui(u,f)}}function pe(n,t){var i=nt(t,u.eq(n));return i.map(b).reverse()}function we(n,t){for(var i=n,r=0,u=t.length;r<u;r++)i=i.childNodes.length<=t[r]?i.childNodes[i.childNodes.length-1]:i.childNodes[t[r]];return i}function fi(n,t){var u=t&&t.isSkipPaddingBlankHTML,f=t&&t.isNotSplitEdgePoint,r,i;if(gi(n)&&(p(n.node)||f)){if(st(n))return n.node;if(ht(n))return n.node.nextSibling}return p(n.node)?n.node.splitText(n.offset):(r=n.node.childNodes[n.offset],i=ii(n.node.cloneNode(!1),n.node),ri(i,di(r)),u||(ki(n.node),ki(i)),i)}function ur(n,t,i){var r=nt(t.node,u.eq(n));if(r.length){if(r.length===1)return fi(t,i)}else return null;return r.reduce(function(n,r){return n===t.node&&(n=fi(t,i)),fi({node:r,offset:n?b(n):v(r)},i)})}function be(n,t){var s=t?g:gt,e=nt(n.node,s),o=i.last(e)||n.node,r,u,f;return s(o)?(r=e[e.length-2],u=o):(r=o,u=r.parentNode),f=r&&ur(r,n,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t}),f||u!==n.node||(f=n.node.childNodes[n.offset]),{rightNode:f,container:u}}function fr(n){return document.createElement(n)}function ke(n){return document.createTextNode(n)}function ei(n,t){var f,u,i,r;if(n&&n.parentNode){if(n.removeNode)return n.removeNode(t);if(f=n.parentNode,!t){for(u=[],i=0,r=n.childNodes.length;i<r;i++)u.push(n.childNodes[i]);for(i=0,r=u.length;i<r;i++)f.insertBefore(u[i],n)}f.removeChild(n)}}function de(n,t){while(n){if(y(n)||!t(n))break;var i=n.parentNode;ei(n);n=i}}function ge(n,t){if(n.nodeName.toUpperCase()===t.toUpperCase())return n;var r=fr(t);return n.style.cssText&&(r.style.cssText=n.style.cssText),ri(r,i.from(n.childNodes)),ii(r,n),ei(n),r}function er(n,t){var i=oi(n[0])?n.val():n.html();return t?i.replace(/[\n\r]/g,""):i}function no(t,i){var r=er(t),u;return i&&(u=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,r=r.replace(u,function(n,t,i){i=i.toUpperCase();var r=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(i)&&!!t,u=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(i);return n+(r||u?"\n":"")}),r=n.trim(r)),r}function to(t){var i=n(t),r=i.offset(),u=i.outerHeight(!0);return{left:r.left,top:r.top+u}}function io(n,t){Object.keys(t).forEach(function(i){n.on(i,t[i])})}function ro(n,t){Object.keys(t).forEach(function(i){n.off(i,t[i])})}function uo(n){return n&&!p(n)&&i.contains(n.classList,"note-styletag")}function or(n,r){for(var o=n.parentElement(),a=document.body.createTextRange(),s,h=i.from(o.childNodes),c,u,l,e,v,f=0;f<h.length;f++)if(!t.isText(h[f])){if(a.moveToElementText(h[f]),a.compareEndPoints("StartToStart",n)>=0)break;s=h[f]}if(f!==0&&t.isText(h[f-1])){for(c=document.body.createTextRange(),u=null,c.moveToElementText(s||o),c.collapse(!s),u=s?s.nextSibling:o.firstChild,l=n.duplicate(),l.setEndPoint("StartToStart",c),e=l.text.replace(/[\r\n]/g,"").length;e>u.nodeValue.length&&u.nextSibling;)e-=u.nodeValue.length,u=u.nextSibling;v=u.nodeValue;r&&u.nextSibling&&t.isText(u.nextSibling)&&e===u.nodeValue.length&&(e-=u.nodeValue.length,u=u.nextSibling);o=u;f=e}return{cont:o,offset:f}}function sr(n){var e=function(n,r){var f,o,s,h;if(t.isText(n))s=t.listPrev(n,u.not(t.isText)),h=i.last(s).previousSibling,f=h||n.parentNode,r+=i.sum(i.tail(s),t.nodeLength),o=!h;else{if(f=n.childNodes[r]||n,t.isText(f))return e(f,0);r=0;o=!1}return{node:f,collapseToStart:o,offset:r}},r=document.body.createTextRange(),f=e(n.node,n.offset);return r.moveToElementText(f.node),r.collapse(f.collapseToStart),r.moveStart("character",f.offset),r}function fo(t){return n.Deferred(function(i){n.extend(new FileReader,{onload:function(n){var t=n.target.result;i.resolve(t)},onerror:function(n){i.reject(n)}}).readAsDataURL(t)}).promise()}function eo(t){return n.Deferred(function(i){var r=n("<img>");r.one("load",function(){r.off("error abort");i.resolve(r)}).one("error abort",function(){r.off("load").detach();i.reject(r)}).css({display:"none"}).appendTo(document.body).attr("src",t)}).promise()}var si,u,i,pt,a,rt,wt,k,w,d,vi,bt,kt,dt,pi,et,ni,bi,it,oi,t,c,o,tt,f;n=n&&n.hasOwnProperty("default")?n["default"]:n;var lr=function(){function t(n,t,i,r){this.markup=n;this.children=t;this.options=i;this.callback=r}return t.prototype.render=function(t){var i=n(this.markup),r;if(this.options&&this.options.contents&&i.html(this.options.contents),this.options&&this.options.className&&i.addClass(this.options.className),this.options&&this.options.data&&n.each(this.options.data,function(n,t){i.attr("data-"+n,t)}),this.options&&this.options.click)i.on("click",this.options.click);return this.children&&(r=i.find(".note-children-container"),this.children.forEach(function(n){n.render(r.length?r:i)})),this.callback&&this.callback(i,this.options),this.options&&this.options.callback&&this.options.callback(i),t&&t.append(i),i},t}(),h={create:function(t,i){return function(){var r=typeof arguments[1]=="object"?arguments[1]:arguments[0],u=n.isArray(arguments[0])?arguments[0]:[];return r&&r.children&&(u=r.children),new lr(t,u,r,i)}}},ar=h.create('<div class="note-editor note-frame panel"/>'),vr=h.create('<div class="note-toolbar-wrapper panel-default"><div class="note-toolbar panel-heading"><\/div><\/div>'),yr=h.create('<div class="note-editing-area"/>'),pr=h.create('<textarea class="note-codable"/>'),wr=h.create('<div class="note-editable" contentEditable="true"/>'),br=h.create('<div class="note-statusbar">  <div class="note-resizebar">    <div class="note-icon-bar"/>    <div class="note-icon-bar"/>    <div class="note-icon-bar"/>  <\/div><\/div>'),kr=h.create('<div class="note-editor"/>'),dr=h.create('<div class="note-editable" contentEditable="true"/>'),gr=h.create('<div class="note-btn-group btn-group">'),nu=h.create('<div class="dropdown-menu">',function(t,i){var r=n.isArray(i.items)?i.items.map(function(n){var r=typeof n=="string"?n:n.value||"",u=i.template?i.template(n):n,t=typeof n=="object"?n.option:undefined,f='data-value="'+r+'"',e=t!==undefined?' data-option="'+t+'"':"";return'<li><a href="#" '+(f+e)+">"+u+"<\/a><\/li>"}).join(""):i.items;t.html(r)}),tu=function(n,t){return n+" "+at(t.icons.caret,"span")},iu=h.create('<div class="dropdown-menu note-check">',function(t,i){var r=n.isArray(i.items)?i.items.map(function(n){var t=typeof n=="string"?n:n.value||"",r=i.template?i.template(n):n;return'<li><a href="#" data-value="'+t+'">'+at(i.checkClassName)+" "+r+"<\/a><\/li>"}).join(""):i.items;t.html(r)}),ru=h.create('<div class="note-color-palette"/>',function(n,t){for(var f=[],r,h,u,i=0,e=t.colors.length;i<e;i++){var c=t.eventName,o=t.colors[i],s=[];for(r=0,h=o.length;r<h;r++)u=o[r],s.push(['<button type="button" class="note-color-btn"','style="background-color:',u,'" ','data-event="',c,'" ','data-value="',u,'" ','title="',u,'" ','data-toggle="button" tabindex="-1"><\/button>'].join(""));f.push('<div class="note-color-row">'+s.join("")+"<\/div>")}n.html(f.join(""));t.tooltip&&n.find(".note-color-btn").tooltip({container:t.container,trigger:"hover",placement:"bottom"})}),uu=h.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(n,t){t.fade&&n.addClass("fade");n.html(['<div class="modal-dialog">','  <div class="modal-content">',t.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button>      <h4 class="modal-title">'+t.title+"<\/h4>    <\/div>":"",'    <div class="modal-body">'+t.body+"<\/div>",t.footer?'    <div class="modal-footer">'+t.footer+"<\/div>":"","  <\/div>","<\/div>"].join(""))}),fu=h.create('<div class="note-popover popover in">  <div class="arrow"/>  <div class="popover-content note-children-container"/><\/div>',function(n,t){var i=typeof t.direction!="undefined"?t.direction:"bottom";n.addClass(i);t.hideArrow&&n.find(".arrow").hide()}),eu=h.create('<div class="checkbox"><\/div>',function(n,t){n.html([" <label"+(t.id?' for="'+t.id+'"':"")+">",' <input type="checkbox"'+(t.id?' id="'+t.id+'"':""),(t.checked?" checked":"")+"/>","<span>"+(t.text?t.text:"")+"<\/span>","<\/label>"].join(""))}),at=function(n,t){return t=t||"i","<"+t+' class="'+n+'"/>'},l={editor:ar,toolbar:vr,editingArea:yr,codable:pr,editable:wr,statusbar:br,airEditor:kr,airEditable:dr,buttonGroup:gr,dropdown:nu,dropdownButtonContents:tu,dropdownCheck:iu,palette:ru,dialog:uu,popover:fu,checkbox:eu,icon:at,options:{},button:function(n,t){return h.create('<button type="button" class="note-btn btn btn-default btn-sm" tabindex="-1">',function(n,t){t&&t.tooltip&&n.attr({title:t.tooltip}).tooltip({container:t.container,trigger:"hover",placement:"bottom"})})(n,t)},toggleBtn:function(n,t){n.toggleClass("disabled",!t);n.attr("disabled",!t)},toggleBtnActive:function(n,t){n.toggleClass("active",t)},onDialogShown:function(n,t){n.one("shown.bs.modal",t)},onDialogHidden:function(n,t){n.one("hidden.bs.modal",t)},showDialog:function(n){n.modal("show")},hideDialog:function(n){n.modal("hide")},createLayout:function(n,t){var i=(t.airMode?l.airEditor([l.editingArea([l.airEditable()])]):l.editor([l.toolbar(),l.editingArea([l.codable(),l.editable()]),l.statusbar()])).render();return i.insertAfter(n),{note:n,editor:i,toolbar:i.find(".note-toolbar"),editingArea:i.find(".note-editing-area"),editable:i.find(".note-editable"),codable:i.find(".note-codable"),statusbar:i.find(".note-statusbar")}},removeLayout:function(n,t){n.html(t.editable.html());t.editor.remove();n.show()}};if(si=0,u={eq:ou,eq2:su,peq2:hu,ok:cu,fail:lu,self:yu,not:au,and:vu,invoke:pu,uniqueId:wu,rect2bnd:bu,invertObject:ku,namespaceToCamel:du,debounce:gu},i={head:hi,last:vt,initial:nf,tail:ci,prev:lf,next:cf,find:tf,contains:li,all:rf,sum:uf,from:ff,isEmpty:ef,clusterBy:of,compact:sf,unique:hf},pt=typeof define=="function"&&define.amd,a=navigator.userAgent,rt=/MSIE|Trident/i.test(a),rt&&(k=/MSIE (\d+[.]\d+)/.exec(a),k&&(wt=parseFloat(k[1])),k=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(a),k&&(wt=parseFloat(k[1]))),w=/Edge\/\d+/.test(a),d=!!window.CodeMirror,!d&&pt)if(typeof __webpack_require__=="function")try{require.resolve("codemirror");d=!0}catch(ks){}else if(typeof require!="undefined")if(typeof require.resolve!="undefined")try{require.resolve("codemirror");d=!0}catch(ks){}else typeof require.specified!="undefined"&&(d=require.specified("codemirror"));var vf="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,yf=rt||w?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",e={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:rt,isEdge:w,isFF:!w&&/firefox/i.test(a),isPhantom:/PhantomJS/i.test(a),isWebkit:!w&&/webkit/i.test(a),isChrome:!w&&/chrome/i.test(a),isSafari:!w&&/safari/i.test(a),browserVersion:wt,jqueryVersion:parseFloat(n.fn.jquery),isSupportAmd:pt,isSupportTouch:vf,hasCodeMirror:d,isFontInstalled:af,isW3CRangeSupport:!!document.createRange,inputEventName:yf},ai=String.fromCharCode(160);vi=s("PRE");bt=s("LI");kt=s("TABLE");dt=s("DATA");pi=s("HR");et=s("BLOCKQUOTE");ni=s("A");bi=s("BODY");it=e.isMSIE&&e.browserVersion<11?"&nbsp;":"<br>";oi=s("TEXTAREA");t={NBSP_CHAR:ai,ZERO_WIDTH_NBSP_CHAR:"ï»¿",blank:it,emptyPara:"<p>"+it+"<\/p>",makePredByNodeName:s,isEditable:y,isControlSizing:pf,isText:p,isElement:wf,isVoid:ut,isPara:g,isPurePara:kf,isHeading:bf,isInline:ft,isBlock:u.not(ft),isBodyInline:gf,isBody:bi,isParaInline:df,isPre:vi,isList:yi,isTable:kt,isData:dt,isCell:wi,isBlockquote:et,isBodyContainer:gt,isAnchor:ni,isDiv:s("DIV"),isLi:bt,isBR:s("BR"),isSpan:s("SPAN"),isB:s("B"),isU:s("U"),isS:s("S"),isI:s("I"),isImg:s("IMG"),isTextarea:oi,isEmpty:ti,isEmptyAnchor:u.and(ni,ti),isClosestSibling:ne,withClosestSiblings:te,nodeLength:v,isLeftEdgePoint:st,isRightEdgePoint:ht,isEdgePoint:gi,isLeftEdgeOf:nr,isRightEdgeOf:tr,isLeftEdgePointOf:se,isRightEdgePointOf:he,prevPoint:ir,nextPoint:ui,isSamePoint:rr,isVisiblePoint:ce,prevPointUntil:le,nextPointUntil:ae,isCharPoint:ve,walkPoint:ye,ancestor:ot,singleChildAncestor:ie,listAncestor:nt,lastAncestor:re,listNext:di,listPrev:fe,listDescendant:ee,commonAncestor:ue,wrap:oe,insertAfter:ii,appendChildNodes:ri,position:b,hasChildren:ct,makeOffsetPath:pe,fromOffsetPath:we,splitTree:ur,splitPoint:be,create:fr,createText:ke,remove:ei,removeWhile:de,replace:ge,html:no,value:er,posFromPlaceholder:to,attachEvents:io,detachEvents:ro,isCustomStyleTag:uo};n.summernote=n.summernote||{lang:{}};n.extend(n.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});c={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};o={isEdit:function(n){return i.contains([c.BACKSPACE,c.TAB,c.ENTER,c.SPACE,c.DELETE],n)},isMove:function(n){return i.contains([c.LEFT,c.UP,c.RIGHT,c.DOWN],n)},nameFromCode:u.invertObject(c),code:c};tt=function(){function r(n,i,r,u){this.sc=n;this.so=i;this.ec=r;this.eo=u;this.isOnEditable=this.makeIsOn(t.isEditable);this.isOnList=this.makeIsOn(t.isList);this.isOnAnchor=this.makeIsOn(t.isAnchor);this.isOnCell=this.makeIsOn(t.isCell);this.isOnData=this.makeIsOn(t.isData)}return r.prototype.nativeRange=function(){var n,t;return e.isW3CRangeSupport?(n=document.createRange(),n.setStart(this.sc,this.so),n.setEnd(this.ec,this.eo),n):(t=sr({node:this.sc,offset:this.so}),t.setEndPoint("EndToEnd",sr({node:this.ec,offset:this.eo})),t)},r.prototype.getPoints=function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}},r.prototype.getStartPoint=function(){return{node:this.sc,offset:this.so}},r.prototype.getEndPoint=function(){return{node:this.ec,offset:this.eo}},r.prototype.select=function(){var t=this.nativeRange(),n;return e.isW3CRangeSupport?(n=document.getSelection(),n.rangeCount>0&&n.removeAllRanges(),n.addRange(t)):t.select(),this},r.prototype.scrollIntoView=function(t){var i=n(t).height();return t.scrollTop+i<this.sc.offsetTop&&(t.scrollTop+=Math.abs(t.scrollTop+i-this.sc.offsetTop)),this},r.prototype.normalize=function(){var i=function(n,i){var r,u;if(t.isVisiblePoint(n)&&!t.isEdgePoint(n)||t.isVisiblePoint(n)&&t.isRightEdgePoint(n)&&!i||t.isVisiblePoint(n)&&t.isLeftEdgePoint(n)&&i||t.isVisiblePoint(n)&&t.isBlock(n.node)&&t.isEmpty(n.node))return n;if(r=t.ancestor(n.node,t.isBlock),(t.isLeftEdgePointOf(n,r)||t.isVoid(t.prevPoint(n).node))&&!i||(t.isRightEdgePointOf(n,r)||t.isVoid(t.nextPoint(n).node))&&i){if(t.isVisiblePoint(n))return n;i=!i}return u=i?t.nextPointUntil(t.nextPoint(n),t.isVisiblePoint):t.prevPointUntil(t.prevPoint(n),t.isVisiblePoint),u||n},n=i(this.getEndPoint(),!1),u=this.isCollapsed()?n:i(this.getStartPoint(),!0);return new r(u.node,u.offset,n.node,n.offset)},r.prototype.nodes=function(n,r){n=n||u.ok;var o=r&&r.includeAncestor,s=r&&r.fullyContains,h=this.getStartPoint(),c=this.getEndPoint(),f=[],e=[];return t.walkPoint(h,c,function(r){if(!t.isEditable(r.node)){var u;s?(t.isLeftEdgePoint(r)&&e.push(r.node),t.isRightEdgePoint(r)&&i.contains(e,r.node)&&(u=r.node)):u=o?t.ancestor(r.node,n):r.node;u&&n(u)&&f.push(u)}},!0),i.unique(f)},r.prototype.commonAncestor=function(){return t.commonAncestor(this.sc,this.ec)},r.prototype.expand=function(n){var f=t.ancestor(this.sc,n),u=t.ancestor(this.ec,n),i;return!f&&!u?new r(this.sc,this.so,this.ec,this.eo):(i=this.getPoints(),f&&(i.sc=f,i.so=0),u&&(i.ec=u,i.eo=t.nodeLength(u)),new r(i.sc,i.so,i.ec,i.eo))},r.prototype.collapse=function(n){return n?new r(this.sc,this.so,this.sc,this.so):new r(this.ec,this.eo,this.ec,this.eo)},r.prototype.splitText=function(){var i=this.sc===this.ec,n=this.getPoints();return t.isText(this.ec)&&!t.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo),t.isText(this.sc)&&!t.isEdgePoint(this.getStartPoint())&&(n.sc=this.sc.splitText(this.so),n.so=0,i&&(n.ec=n.sc,n.eo=this.eo-this.so)),new r(n.sc,n.so,n.ec,n.eo)},r.prototype.deleteContents=function(){if(this.isCollapsed())return this;var f=this.splitText(),e=f.nodes(null,{fullyContains:!0}),u=t.prevPointUntil(f.getStartPoint(),function(n){return!i.contains(e,n.node)}),o=[];return n.each(e,function(n,i){var r=i.parentNode;u.node!==r&&t.nodeLength(r)===1&&o.push(r);t.remove(i,!1)}),n.each(o,function(n,i){t.remove(i,!1)}),new r(u.node,u.offset,u.node,u.offset).normalize()},r.prototype.makeIsOn=function(n){return function(){var i=t.ancestor(this.sc,n);return!!i&&i===t.ancestor(this.ec,n)}},r.prototype.isLeftEdgeOf=function(n){if(!t.isLeftEdgePoint(this.getStartPoint()))return!1;var i=t.ancestor(this.sc,n);return i&&t.isLeftEdgeOf(this.sc,i)},r.prototype.isCollapsed=function(){return this.sc===this.ec&&this.so===this.eo},r.prototype.wrapBodyInlineWithPara=function(){var n,f,o,e,s;return t.isBodyContainer(this.sc)&&t.isEmpty(this.sc)?(this.sc.innerHTML=t.emptyPara,new r(this.sc.firstChild,0,this.sc.firstChild,0)):(n=this.normalize(),t.isParaInline(this.sc)||t.isPara(this.sc))?n:(t.isInline(n.sc)?(o=t.listAncestor(n.sc,u.not(t.isInline)),f=i.last(o),t.isInline(f)||(f=o[o.length-2]||n.sc.childNodes[n.so])):f=n.sc.childNodes[n.so>0?n.so-1:0],e=t.listPrev(f,t.isParaInline).reverse(),e=e.concat(t.listNext(f.nextSibling,t.isParaInline)),e.length&&(s=t.wrap(i.head(e),"p"),t.appendChildNodes(s,i.tail(e))),this.normalize())},r.prototype.insertNode=function(n){var r=this.wrapBodyInlineWithPara().deleteContents(),i=t.splitPoint(r.getStartPoint(),t.isInline(n));return i.rightNode?i.rightNode.parentNode.insertBefore(n,i.rightNode):i.container.appendChild(n),n},r.prototype.pasteHTML=function(t){var r=n("<div><\/div>").html(t)[0],u=i.from(r.childNodes),f=this.wrapBodyInlineWithPara().deleteContents();return u.reverse().map(function(n){return f.insertNode(n)}).reverse()},r.prototype.toString=function(){var n=this.nativeRange();return e.isW3CRangeSupport?n.toString():n.text},r.prototype.getWordRange=function(n){var i=this.getEndPoint(),u;return t.isCharPoint(i)?(u=t.prevPointUntil(i,function(n){return!t.isCharPoint(n)}),n&&(i=t.nextPointUntil(i,function(n){return!t.isCharPoint(n)})),new r(u.node,u.offset,i.node,i.offset)):this},r.prototype.bookmark=function(n){return{s:{path:t.makeOffsetPath(n,this.sc),offset:this.so},e:{path:t.makeOffsetPath(n,this.ec),offset:this.eo}}},r.prototype.paraBookmark=function(n){return{s:{path:i.tail(t.makeOffsetPath(i.head(n),this.sc)),offset:this.so},e:{path:i.tail(t.makeOffsetPath(i.last(n),this.ec)),offset:this.eo}}},r.prototype.getClientRects=function(){var n=this.nativeRange();return n.getClientRects()},r}();f={create:function(n,i,r,u){if(arguments.length===4)return new tt(n,i,r,u);if(arguments.length===2)return r=n,u=i,new tt(n,i,r,u);var f=this.createFromSelection();return!f&&arguments.length===1?(f=this.createFromNode(arguments[0]),f.collapse(t.emptyPara===arguments[0].innerHTML)):f},createFromSelection:function(){var f,o,s,h,r,u,c,l,a,n,i;if(e.isW3CRangeSupport){if(r=document.getSelection(),r&&r.rangeCount!==0){if(t.isBody(r.anchorNode))return null}else return null;u=r.getRangeAt(0);f=u.startContainer;o=u.startOffset;s=u.endContainer;h=u.endOffset}else c=document.selection.createRange(),l=c.duplicate(),l.collapse(!1),a=c,a.collapse(!0),n=or(a,!0),i=or(l,!1),t.isText(n.node)&&t.isLeftEdgePoint(n)&&t.isTextNode(i.node)&&t.isRightEdgePoint(i)&&i.node.nextSibling===n.node&&(n=i),f=n.cont,o=n.offset,s=i.cont,h=i.offset;return new tt(f,o,s,h)},createFromNode:function(n){var r=n,f=0,i=n,u=t.nodeLength(i);return t.isVoid(r)&&(f=t.listPrev(r).length-1,r=r.parentNode),t.isBR(i)?(u=t.listPrev(i).length-1,i=i.parentNode):t.isVoid(i)&&(u=t.listPrev(i).length,i=i.parentNode),this.create(r,f,i,u)},createFromNodeBefore:function(n){return this.createFromNode(n).collapse(!0)},createFromNodeAfter:function(n){return this.createFromNode(n).collapse()},createFromBookmark:function(n,i){var r=t.fromOffsetPath(n,i.s.path),u=i.s.offset,f=t.fromOffsetPath(n,i.e.path),e=i.e.offset;return new tt(r,u,f,e)},createFromParaBookmark:function(n,r){var u=n.s.offset,f=n.e.offset,e=t.fromOffsetPath(i.head(r),n.s.path),o=t.fromOffsetPath(i.last(r),n.e.path);return new tt(e,u,o,f)}};var oo=function(){function n(n){this.stack=[];this.stackOffset=-1;this.$editable=n;this.editable=n[0]}return n.prototype.makeSnapshot=function(){var n=f.create(this.editable);return{contents:this.$editable.html(),bookmark:n?n.bookmark(this.editable):{s:{path:[],offset:0},e:{path:[],offset:0}}}},n.prototype.applySnapshot=function(n){n.contents!==null&&this.$editable.html(n.contents);n.bookmark!==null&&f.createFromBookmark(this.editable,n.bookmark).select()},n.prototype.rewind=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo();this.stackOffset=0;this.applySnapshot(this.stack[this.stackOffset])},n.prototype.reset=function(){this.stack=[];this.stackOffset=-1;this.$editable.html("");this.recordUndo()},n.prototype.undo=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo();this.stackOffset>0&&(this.stackOffset--,this.applySnapshot(this.stack[this.stackOffset]))},n.prototype.redo=function(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))},n.prototype.recordUndo=function(){this.stackOffset++;this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset));this.stack.push(this.makeSnapshot())},n}(),so=function(){function r(){}return r.prototype.jQueryCSS=function(t,i){if(e.jqueryVersion<1.9){var r={};return n.each(i,function(n,i){r[i]=t.css(i)}),r}return t.css(i)},r.prototype.fromNode=function(n){var t=this.jQueryCSS(n,["font-family","font-size","text-align","list-style-type","line-height"])||{};return t["font-size"]=parseInt(t["font-size"],10),t},r.prototype.stylePara=function(i,r){n.each(i.nodes(t.isPara,{includeAncestor:!0}),function(t,i){n(i).css(r)})},r.prototype.styleNodes=function(r,f){var e,s,h;r=r.splitText();var o=f&&f.nodeName||"SPAN",c=!!(f&&f.expandClosestSibling),l=!!(f&&f.onlyPartialContains);return r.isCollapsed()?[r.insertNode(t.create(o))]:(e=t.makePredByNodeName(o),s=r.nodes(t.isText,{fullyContains:!0}).map(function(n){return t.singleChildAncestor(n,e)||t.wrap(n,o)}),c?(l&&(h=r.nodes(),e=u.and(e,function(n){return i.contains(h,n)})),s.map(function(r){var u=t.withClosestSiblings(r,e),f=i.head(u),o=i.tail(u);return n.each(o,function(n,i){t.appendChildNodes(f,i.childNodes);t.remove(i)}),i.head(u)})):s)},r.prototype.current=function(i){var s=n(t.isElement(i.sc)?i.sc:i.sc.parentNode),r=this.fromNode(s),f,e,u,o;try{r=n.extend(r,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||r["font-family"]})}catch(h){}return i.isOnList()?(f=["circle","disc","disc-leading-zero","square"],e=n.inArray(r["list-style-type"],f)>-1,r["list-style"]=e?"unordered":"ordered"):r["list-style"]="none",u=t.ancestor(i.sc,t.isPara),u&&u.style["line-height"]?r["line-height"]=u.style.lineHeight:(o=parseInt(r["line-height"],10)/parseInt(r["font-size"],10),r["line-height"]=o.toFixed(1)),r.anchor=i.isOnAnchor()&&t.ancestor(i.sc,t.isAnchor),r.ancestors=t.listAncestor(i.sc,t.isEditable),r.range=i,r},r}(),hr=function(){function r(){}return r.prototype.insertOrderedList=function(n){this.toggleList("OL",n)},r.prototype.insertUnorderedList=function(n){this.toggleList("UL",n)},r.prototype.indent=function(r){var o=this,e=f.create(r).wrapBodyInlineWithPara(),s=e.nodes(t.isPara,{includeAncestor:!0}),h=i.clusterBy(s,u.peq2("parentNode"));n.each(h,function(r,u){var f=i.head(u);t.isLi(f)?o.wrapList(u,f.parentNode.nodeName):n.each(u,function(t,i){n(i).css("marginLeft",function(n,t){return(parseInt(t,10)||0)+25})})});e.select()},r.prototype.outdent=function(r){var o=this,e=f.create(r).wrapBodyInlineWithPara(),s=e.nodes(t.isPara,{includeAncestor:!0}),h=i.clusterBy(s,u.peq2("parentNode"));n.each(h,function(r,u){var f=i.head(u);t.isLi(f)?o.releaseList([u]):n.each(u,function(t,i){n(i).css("marginLeft",function(n,t){return t=parseInt(t,10)||0,t>25?t-25:""})})});e.select()},r.prototype.toggleList=function(r,e){var a=this,h=f.create(e).wrapBodyInlineWithPara(),o=h.nodes(t.isPara,{includeAncestor:!0}),v=h.paraBookmark(o),l=i.clusterBy(o,u.peq2("parentNode")),s,c;i.find(o,t.isPurePara)?(s=[],n.each(l,function(n,t){s=s.concat(a.wrapList(t,r))}),o=s):(c=h.nodes(t.isList,{includeAncestor:!0}).filter(function(t){return!n.nodeName(t,r)}),c.length?n.each(c,function(n,i){t.replace(i,r)}):o=this.releaseList(l,!0));f.createFromParaBookmark(v,o).select()},r.prototype.wrapList=function(n,r){var e=i.head(n),u=i.last(n),s=t.isList(e.previousSibling)&&e.previousSibling,f=t.isList(u.nextSibling)&&u.nextSibling,o=s||t.insertAfter(t.create(r||"UL"),u);return n=n.map(function(n){return t.isPurePara(n)?t.replace(n,"LI"):n}),t.appendChildNodes(o,n),f&&(t.appendChildNodes(o,i.from(f.childNodes)),t.remove(f)),n},r.prototype.releaseList=function(r,u){var f=[];return n.each(r,function(r,e){var s=i.head(e),c=i.last(e),o=u?t.lastAncestor(s,t.isList):s.parentNode,a=o.childNodes.length>1?t.splitTree(o,{node:c.parentNode,offset:t.position(c)+1},{isSkipPaddingBlankHTML:!0}):null,h=t.splitTree(o,{node:s.parentNode,offset:t.position(s)},{isSkipPaddingBlankHTML:!0}),l;e=u?t.listDescendant(h,t.isLi):i.from(h.childNodes).filter(t.isLi);(u||!t.isList(o.parentNode))&&(e=e.map(function(n){return t.replace(n,"P")}));n.each(i.from(e).reverse(),function(n,i){t.insertAfter(i,o)});l=i.compact([o,h,a]);n.each(l,function(i,r){var u=[r].concat(t.listDescendant(r,t.isList));n.each(u.reverse(),function(n,i){t.nodeLength(i)||t.remove(i,!0)})});f=f.concat(e)}),f},r}(),ho=function(){function i(){this.bullet=new hr}return i.prototype.insertTab=function(n,i){var r=t.createText(new Array(i+1).join(t.NBSP_CHAR));n=n.deleteContents();n.insertNode(r,!0);n=f.create(r,i);n.select()},i.prototype.insertParagraph=function(i){var e=f.create(i),r,u,o,s;if(e=e.deleteContents(),e=e.wrapBodyInlineWithPara(),r=t.ancestor(e.sc,t.isPara),r){if(t.isEmpty(r)&&t.isLi(r)){this.bullet.toggleList(r.parentNode.nodeName);return}t.isEmpty(r)&&t.isPara(r)&&t.isBlockquote(r.parentNode)?(t.insertAfter(r,r.parentNode),u=r):(u=t.splitTree(r,e.getStartPoint()),o=t.listDescendant(r,t.isEmptyAnchor),o=o.concat(t.listDescendant(u,t.isEmptyAnchor)),n.each(o,function(n,i){t.remove(i)}),(t.isHeading(u)||t.isPre(u)||t.isCustomStyleTag(u))&&t.isEmpty(u)&&(u=t.replace(u,"p")))}else s=e.sc.childNodes[e.so],u=n(t.emptyPara)[0],s?e.sc.insertBefore(u,s):e.sc.appendChild(u);f.create(u,0).normalize().select().scrollIntoView(i)},i}(),r=function(n,t,i,u){function l(){if(!n||!n.tagName||n.tagName.toLowerCase()!=="td"&&n.tagName.toLowerCase()!=="th"){console.error("Impossible to identify start Cell point.",n);return}if(f.colPos=n.cellIndex,!n.parentElement||!n.parentElement.tagName||n.parentElement.tagName.toLowerCase()!=="tr"){console.error("Impossible to identify start Row point.",n);return}f.rowPos=n.parentElement.rowIndex}function s(n,t,i,r,u,f,o){var s={baseRow:i,baseCell:r,isRowSpan:u,isColSpan:f,isVirtual:o};e[n]||(e[n]=[]);e[n][t]=s}function a(n,t,i,r){return{baseCell:n.baseCell,action:t,virtualTable:{rowIndex:i,cellIndex:r}}}function h(n,t){if(!e[n]||!e[n][t])return t;for(var i=t;e[n][i];)if(i++,!e[n][i])return i}function v(n,t){var i=h(n.rowIndex,t.cellIndex),v=t.colSpan>1,y=t.rowSpan>1,p=n.rowIndex===f.rowPos&&t.cellIndex===f.colPos,e,r,o,l,u,a;if(s(n.rowIndex,i,n,t,y,v,!1),e=t.attributes.rowSpan?parseInt(t.attributes.rowSpan.value,10):0,e>1)for(r=1;r<e;r++)o=n.rowIndex+r,c(o,i,t,p),s(o,i,n,t,!0,v,!0);if(l=t.attributes.colSpan?parseInt(t.attributes.colSpan.value,10):0,l>1)for(u=1;u<l;u++)a=h(n.rowIndex,i+u),c(n.rowIndex,a,t,p),s(n.rowIndex,a,n,t,y,!0,!0)}function c(n,t,i,r){n===f.rowPos&&f.colPos>=i.cellIndex&&i.cellIndex<=t&&!r&&f.colPos++}function y(){for(var i=u.rows,r,t,n=0;n<i.length;n++)for(r=i[n].cells,t=0;t<r.length;t++)v(i[n],r[t])}function p(n){switch(t){case r.where.Column:if(n.isColSpan)return r.resultAction.SubtractSpanCount;break;case r.where.Row:if(!n.isVirtual&&n.isRowSpan)return r.resultAction.AddCell;if(n.isRowSpan)return r.resultAction.SubtractSpanCount}return r.resultAction.RemoveCell}function w(n){switch(t){case r.where.Column:if(n.isColSpan)return r.resultAction.SumSpanCount;if(n.isRowSpan&&n.isVirtual)return r.resultAction.Ignore;break;case r.where.Row:if(n.isRowSpan)return r.resultAction.SumSpanCount;if(n.isColSpan&&n.isVirtual)return r.resultAction.Ignore}return r.resultAction.AddCell}function b(){l();y()}var f={colPos:0,rowPos:0},e=[],o=[];this.getActionList=function(){for(var h=t===r.where.Row?f.rowPos:-1,c=t===r.where.Column?f.colPos:-1,s=0,l=!0,n,u;l;){var v=h>=0?h:s,y=c>=0?c:s,b=e[v];if(!b||(n=b[y],!n))return l=!1,o;u=r.resultAction.Ignore;switch(i){case r.requestAction.Add:u=w(n);break;case r.requestAction.Delete:u=p(n)}o.push(a(n,u,v,y));s++}return o};b()};r.where={Row:0,Column:1};r.requestAction={Add:0,Delete:1};r.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var co=function(){function u(){}return u.prototype.tab=function(n,r){var u=t.ancestor(n.commonAncestor(),t.isCell),o=t.ancestor(u,t.isTable),s=t.listDescendant(o,t.isCell),e=i[r?"prev":"next"](s,u);e&&f.create(e,0).select()},u.prototype.addRow=function(i,u){for(var s=t.ancestor(i.commonAncestor(),t.isCell),f=n(s).closest("tr"),k=this.recoverAttributes(f),o=n("<tr"+k+"><\/tr>"),d=new r(s,r.where.Row,r.requestAction.Add,n(f).closest("table")[0]),a=d.getActionList(),e,c,v,y,p,l,w,b,h=0;h<a.length;h++){e=a[h];c=this.recoverAttributes(e.baseCell);switch(e.action){case r.resultAction.AddCell:o.append("<td"+c+">"+t.blank+"<\/td>");break;case r.resultAction.SumSpanCount:if(u==="top"&&(v=e.baseCell.parent,y=(v?e.baseCell.closest("tr").rowIndex:0)<=f[0].rowIndex,y)){p=n("<div><\/div>").append(n("<td"+c+">"+t.blank+"<\/td>").removeAttr("rowspan")).html();o.append(p);break}l=parseInt(e.baseCell.rowSpan,10);l++;e.baseCell.setAttribute("rowSpan",l)}}if(u==="top")f.before(o);else{if(w=s.rowSpan>1,w){b=f[0].rowIndex+(s.rowSpan-2);n(n(f).parent().find("tr")[b]).after(n(o));return}f.after(o)}},u.prototype.addCol=function(i,u){var l=t.ancestor(i.commonAncestor(),t.isCell),s=n(l).closest("tr"),v=n(s).siblings(),a,h,e,f,o,c;for(v.push(s),a=new r(l,r.where.Column,r.requestAction.Add,n(s).closest("table")[0]),h=a.getActionList(),e=0;e<h.length;e++){f=h[e];o=this.recoverAttributes(f.baseCell);switch(f.action){case r.resultAction.AddCell:u==="right"?n(f.baseCell).after("<td"+o+">"+t.blank+"<\/td>"):n(f.baseCell).before("<td"+o+">"+t.blank+"<\/td>");break;case r.resultAction.SumSpanCount:u==="right"?(c=parseInt(f.baseCell.colSpan,10),c++,f.baseCell.setAttribute("colSpan",c)):n(f.baseCell).before("<td"+o+">"+t.blank+"<\/td>")}}},u.prototype.recoverAttributes=function(n){var r="",i,t;if(!n)return r;for(i=n.attributes||[],t=0;t<i.length;t++)i[t].name.toLowerCase()!=="id"&&i[t].specified&&(r+=" "+i[t].name+"='"+i[t].value+"'");return r},u.prototype.deleteRow=function(i){for(var l=t.ancestor(i.commonAncestor(),t.isCell),h=n(l).closest("tr"),f=h.children("td, th").index(n(l)),y=h[0].rowIndex,w=new r(l,r.where.Row,r.requestAction.Delete,n(h).closest("table")[0]),c=w.getActionList(),u,v,s=0;s<c.length;s++)if(c[s]){var e=c[s].baseCell,p=c[s].virtualTable,a=e.rowSpan&&e.rowSpan>1,o=a?parseInt(e.rowSpan,10):0;switch(c[s].action){case r.resultAction.Ignore:continue;case r.resultAction.AddCell:if(u=h.next("tr")[0],!u)continue;v=h[0].cells[f];a&&(o>2?(o--,u.insertBefore(v,u.cells[f]),u.cells[f].setAttribute("rowSpan",o),u.cells[f].innerHTML=""):o===2&&(u.insertBefore(v,u.cells[f]),u.cells[f].removeAttribute("rowSpan"),u.cells[f].innerHTML=""));continue;case r.resultAction.SubtractSpanCount:a&&(o>2?(o--,e.setAttribute("rowSpan",o),p.rowIndex!==y&&e.cellIndex===f&&(e.innerHTML="")):o===2&&(e.removeAttribute("rowSpan"),p.rowIndex!==y&&e.cellIndex===f&&(e.innerHTML="")));continue;case r.resultAction.RemoveCell:continue}}h.remove()},u.prototype.deleteCol=function(i){for(var s=t.ancestor(i.commonAncestor(),t.isCell),h=n(s).closest("tr"),c=h.children("td, th").index(n(s)),a=new r(s,r.where.Column,r.requestAction.Delete,n(h).closest("table")[0]),e=a.getActionList(),u,l,o,f=0;f<e.length;f++)if(e[f])switch(e[f].action){case r.resultAction.Ignore:continue;case r.resultAction.SubtractSpanCount:u=e[f].baseCell;l=u.colSpan&&u.colSpan>1;l&&(o=u.colSpan?parseInt(u.colSpan,10):0,o>2?(o--,u.setAttribute("colSpan",o),u.cellIndex===c&&(u.innerHTML="")):o===2&&(u.removeAttribute("colSpan"),u.cellIndex===c&&(u.innerHTML="")));continue;case r.resultAction.RemoveCell:t.remove(e[f].baseCell,!0);continue}},u.prototype.createTable=function(i,r,u){for(var h=[],c,e,l,o,s,f=0;f<i;f++)h.push("<td>"+t.blank+"<\/td>");for(c=h.join(""),e=[],o=0;o<r;o++)e.push("<tr>"+c+"<\/tr>");return l=e.join(""),s=n("<table>"+l+"<\/table>"),u&&u.tableClassName&&s.addClass(u.tableClassName),s[0]},u.prototype.deleteTable=function(i){var r=t.ancestor(i.commonAncestor(),t.isCell);n(r).closest("table").remove()},u}(),lo="bogus",ao=function(){function r(r){var u=this,o,s,e;for(this.context=r,this.$note=r.layoutInfo.note,this.$editor=r.layoutInfo.editor,this.$editable=r.layoutInfo.editable,this.options=r.options,this.lang=this.options.langInfo,this.editable=this.$editable[0],this.lastRange=null,this.style=new so,this.table=new co,this.typing=new ho,this.bullet=new hr,this.history=new oo(this.$editable),this.context.memo("help.undo",this.lang.help.undo),this.context.memo("help.redo",this.lang.help.redo),this.context.memo("help.tab",this.lang.help.tab),this.context.memo("help.untab",this.lang.help.untab),this.context.memo("help.insertParagraph",this.lang.help.insertParagraph),this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList),this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList),this.context.memo("help.indent",this.lang.help.indent),this.context.memo("help.outdent",this.lang.help.outdent),this.context.memo("help.formatPara",this.lang.help.formatPara),this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule),this.context.memo("help.fontName",this.lang.help.fontName),o=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"],e=0,s=o.length;e<s;e++)this[o[e]]=function(n){return function(t){u.beforeCommand();document.execCommand(n,!1,t);u.afterCommand(!0)}}(o[e]),this.context.memo("help."+o[e],this.lang.help[o[e]]);for(this.fontName=this.wrapCommand(function(n){return u.fontStyling("font-family","'"+n+"'")}),this.fontSize=this.wrapCommand(function(n){return u.fontStyling("font-size",n+"px")}),e=1;e<=6;e++)this["formatH"+e]=function(n){return function(){u.formatBlock("H"+n)}}(e),this.context.memo("help.formatH"+e,this.lang.help["formatH"+e]);this.insertParagraph=this.wrapCommand(function(){u.typing.insertParagraph(u.editable)});this.insertOrderedList=this.wrapCommand(function(){u.bullet.insertOrderedList(u.editable)});this.insertUnorderedList=this.wrapCommand(function(){u.bullet.insertUnorderedList(u.editable)});this.indent=this.wrapCommand(function(){u.bullet.indent(u.editable)});this.outdent=this.wrapCommand(function(){u.bullet.outdent(u.editable)});this.insertNode=this.wrapCommand(function(t){if(!u.isLimited(n(t).text().length)){var i=u.createRange();i.insertNode(t);f.createFromNodeAfter(t).select()}});this.insertText=this.wrapCommand(function(n){if(!u.isLimited(n.length)){var r=u.createRange(),i=r.insertNode(t.createText(n));f.create(i,t.nodeLength(i)).select()}});this.pasteHTML=this.wrapCommand(function(n){if(!u.isLimited(n.length)){var t=u.createRange().pasteHTML(n);f.createFromNodeAfter(i.last(t)).select()}});this.formatBlock=this.wrapCommand(function(n,t){var i=u.options.callbacks.onApplyCustomStyle;if(i)i.call(u,t,u.context,u.onFormatBlock);else u.onFormatBlock(n,t)});this.insertHorizontalRule=this.wrapCommand(function(){var n=u.createRange().insertNode(t.create("HR"));n.nextSibling&&f.create(n.nextSibling,0).normalize().select()});this.lineHeight=this.wrapCommand(function(n){u.style.stylePara(u.createRange(),{lineHeight:n})});this.createLink=this.wrapCommand(function(t){var r=t.url,s=t.text,a=t.isNewWindow,o=t.range||u.createRange(),v=o.toString()!==s,e,h;typeof r=="string"&&(r=r.trim());r=u.options.onCreateLink?u.options.onCreateLink(r):/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(r)?r:"http://"+r;e=[];v?(o=o.deleteContents(),h=o.insertNode(n("<A>"+s+"<\/A>")[0]),e.push(h)):e=u.style.styleNodes(o,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});n.each(e,function(t,i){n(i).attr("href",r);a?n(i).attr("target","_blank"):n(i).removeAttr("target")});var y=f.createFromNodeBefore(i.head(e)),c=y.getStartPoint(),p=f.createFromNodeAfter(i.last(e)),l=p.getEndPoint();f.create(c.node,c.offset,l.node,l.offset).select()});this.color=this.wrapCommand(function(n){var t=n.foreColor,i=n.backColor;t&&document.execCommand("foreColor",!1,t);i&&document.execCommand("backColor",!1,i)});this.foreColor=this.wrapCommand(function(n){document.execCommand("styleWithCSS",!1,!0);document.execCommand("foreColor",!1,n)});this.insertTable=this.wrapCommand(function(n){var t=n.split("x"),i=u.createRange().deleteContents();i.insertNode(u.table.createTable(t[0],t[1],u.options))});this.removeMedia=this.wrapCommand(function(){var t=n(u.restoreTarget()).parent();t.parent("figure").length?t.parent("figure").remove():t=n(u.restoreTarget()).detach();u.context.triggerEvent("media.delete",t,u.$editable)});this.floatMe=this.wrapCommand(function(t){var i=n(u.restoreTarget());i.toggleClass("note-float-left",t==="left");i.toggleClass("note-float-right",t==="right");i.css("float",t)});this.resize=this.wrapCommand(function(t){var i=n(u.restoreTarget());i.css({width:t*100+"%",height:""})})}return r.prototype.initialize=function(){var n=this;this.$editable.on("keydown",function(t){return t.keyCode===o.code.ENTER&&n.context.triggerEvent("enter",t),n.context.triggerEvent("keydown",t),t.isDefaultPrevented()||(n.options.shortcuts?n.handleKeyMap(t):n.preventDefaultEditableShortCuts(t)),n.isLimited(1,t)?!1:void 0}).on("keyup",function(t){n.context.triggerEvent("keyup",t)}).on("focus",function(t){n.context.triggerEvent("focus",t)}).on("blur",function(t){n.context.triggerEvent("blur",t)}).on("mousedown",function(t){n.context.triggerEvent("mousedown",t)}).on("mouseup",function(t){n.context.triggerEvent("mouseup",t)}).on("scroll",function(t){n.context.triggerEvent("scroll",t)}).on("paste",function(t){n.context.triggerEvent("paste",t)});this.$editable.html(t.html(this.$note)||t.emptyPara);this.$editable.on(e.inputEventName,u.debounce(function(){n.context.triggerEvent("change",n.$editable.html())},100));this.$editor.on("focusin",function(t){n.context.triggerEvent("focusin",t)}).on("focusout",function(t){n.context.triggerEvent("focusout",t)});this.options.airMode||(this.options.width&&this.$editor.outerWidth(this.options.width),this.options.height&&this.$editable.outerHeight(this.options.height),this.options.maxHeight&&this.$editable.css("max-height",this.options.maxHeight),this.options.minHeight&&this.$editable.css("min-height",this.options.minHeight));this.history.recordUndo()},r.prototype.destroy=function(){this.$editable.off()},r.prototype.handleKeyMap=function(n){var u=this.options.keyMap[e.isMac?"mac":"pc"],t=[],i,r;n.metaKey&&t.push("CMD");n.ctrlKey&&!n.altKey&&t.push("CTRL");n.shiftKey&&t.push("SHIFT");i=o.nameFromCode[n.keyCode];i&&t.push(i);r=u[t.join("+")];r?this.context.invoke(r)!==!1&&n.preventDefault():o.isEdit(n.keyCode)&&this.afterCommand()},r.prototype.preventDefaultEditableShortCuts=function(n){(n.ctrlKey||n.metaKey)&&i.contains([66,73,85],n.keyCode)&&n.preventDefault()},r.prototype.isLimited=function(n,t){return(n=n||0,typeof t!="undefined"&&(o.isMove(t.keyCode)||t.ctrlKey||t.metaKey||i.contains([o.code.BACKSPACE,o.code.DELETE],t.keyCode)))?!1:this.options.maxTextLength>0&&this.$editable.text().length+n>=this.options.maxTextLength?!0:!1},r.prototype.createRange=function(){return this.focus(),f.create(this.editable)},r.prototype.saveRange=function(n){this.lastRange=this.createRange();n&&this.lastRange.collapse().select()},r.prototype.restoreRange=function(){this.lastRange&&(this.lastRange.select(),this.focus())},r.prototype.saveTarget=function(n){this.$editable.data("target",n)},r.prototype.clearTarget=function(){this.$editable.removeData("target")},r.prototype.restoreTarget=function(){return this.$editable.data("target")},r.prototype.currentStyle=function(){var n=f.create();return n&&(n=n.normalize()),n?this.style.current(n):this.style.fromNode(this.$editable)},r.prototype.styleFromNode=function(n){return this.style.fromNode(n)},r.prototype.undo=function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.undo();this.context.triggerEvent("change",this.$editable.html())},r.prototype.redo=function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.redo();this.context.triggerEvent("change",this.$editable.html())},r.prototype.beforeCommand=function(){this.context.triggerEvent("before.command",this.$editable.html());this.focus()},r.prototype.afterCommand=function(n){this.history.recordUndo();n||this.context.triggerEvent("change",this.$editable.html())},r.prototype.tab=function(){var n=this.createRange();if(n.isCollapsed()&&n.isOnCell())this.table.tab(n);else{if(this.options.tabSize===0)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(n,this.options.tabSize),this.afterCommand())}},r.prototype.untab=function(){var n=this.createRange();if(n.isCollapsed()&&n.isOnCell())this.table.tab(n,!0);else if(this.options.tabSize===0)return!1},r.prototype.wrapCommand=function(n){var t=this;return function(){t.beforeCommand();n.apply(t,arguments);t.afterCommand()}},r.prototype.insertImage=function(n,t){var i=this;return eo(n,t).then(function(n){i.beforeCommand();typeof t=="function"?t(n):(typeof t=="string"&&n.attr("data-filename",t),n.css("width",Math.min(i.$editable.width(),n.width())));n.show();f.create(i.editable).insertNode(n[0]);f.createFromNodeAfter(n[0]).select();i.afterCommand()}).fail(function(n){i.context.triggerEvent("image.upload.error",n)})},r.prototype.insertImages=function(t){var i=this;n.each(t,function(n,t){var r=t.name;i.options.maximumImageFileSize&&i.options.maximumImageFileSize<t.size?i.context.triggerEvent("image.upload.error",i.lang.image.maximumFileSizeError):fo(t).then(function(n){return i.insertImage(n,r)}).fail(function(){i.context.triggerEvent("image.upload.error")})})},r.prototype.insertImagesOrCallback=function(n){var t=this.options.callbacks;t.onImageUpload?this.context.triggerEvent("image.upload",n):this.insertImages(n)},r.prototype.getSelectedText=function(){var n=this.createRange();return n.isOnAnchor()&&(n=f.createFromNode(t.ancestor(n.sc,t.isAnchor))),n.toString()},r.prototype.onFormatBlock=function(t,i){var r,u,f;t=e.isMSIE?"<"+t+">":t;document.execCommand("FormatBlock",!1,t);i&&i.length&&(r=i[0].className||"",r&&(u=this.createRange(),f=n([u.sc,u.ec]).closest(t),f.addClass(r)))},r.prototype.formatPara=function(){this.formatBlock("P")},r.prototype.fontStyling=function(r,u){var o=this.createRange(),s,e;o&&(s=this.style.styleNodes(o),n(s).css(r,u),o.isCollapsed()&&(e=i.head(s),e&&!t.nodeLength(e)&&(e.innerHTML=t.ZERO_WIDTH_NBSP_CHAR,f.createFromNodeAfter(e.firstChild).select(),this.$editable.data(lo,e))))},r.prototype.unlink=function(){var n=this.createRange(),i;n.isOnAnchor()&&(i=t.ancestor(n.sc,t.isAnchor),n=f.createFromNode(i),n.select(),this.beforeCommand(),document.execCommand("unlink"),this.afterCommand())},r.prototype.getLinkInfo=function(){var u=this.createRange().expand(t.isAnchor),r=n(i.head(u.nodes(t.isAnchor))),f={range:u,text:u.toString(),url:r.length?r.attr("href"):""};return r.length&&(f.isNewWindow=r.attr("target")==="_blank"),f},r.prototype.addRow=function(n){var t=this.createRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.addRow(t,n),this.afterCommand())},r.prototype.addCol=function(n){var t=this.createRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.addCol(t,n),this.afterCommand())},r.prototype.deleteRow=function(){var n=this.createRange(this.$editable);n.isCollapsed()&&n.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(n),this.afterCommand())},r.prototype.deleteCol=function(){var n=this.createRange(this.$editable);n.isCollapsed()&&n.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(n),this.afterCommand())},r.prototype.deleteTable=function(){var n=this.createRange(this.$editable);n.isCollapsed()&&n.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(n),this.afterCommand())},r.prototype.resizeTo=function(n,t,i){var u,f,r;i?(f=n.y/n.x,r=t.data("ratio"),u={width:r>f?n.x:n.y/r,height:r>f?n.x*r:n.y}):u={width:n.x,height:n.y};t.css(u)},r.prototype.hasFocus=function(){return this.$editable.is(":focus")},r.prototype.focus=function(){this.hasFocus()||this.$editable.focus()},r.prototype.isEmpty=function(){return t.isEmpty(this.$editable[0])||t.emptyPara===this.$editable.html()},r.prototype.empty=function(){this.context.invoke("code",t.emptyPara)},r}(),vo=function(){function n(n){this.context=n;this.$editable=n.layoutInfo.editable}return n.prototype.initialize=function(){this.$editable.on("paste",this.pasteByEvent.bind(this))},n.prototype.pasteByEvent=function(n){var t=n.originalEvent.clipboardData,r;t&&t.items&&t.items.length&&(r=i.head(t.items),r.kind==="file"&&r.type.indexOf("image/")!==-1&&this.context.invoke("editor.insertImagesOrCallback",[r.getAsFile()]),this.context.invoke("editor.afterCommand"))},n}(),yo=function(){function t(t){this.context=t;this.$eventListener=n(document);this.$editor=t.layoutInfo.editor;this.$editable=t.layoutInfo.editable;this.options=t.options;this.lang=this.options.langInfo;this.documentEventHandlers={};this.$dropzone=n('<div class="note-dropzone">  <div class="note-dropzone-message"/><\/div>').prependTo(this.$editor)}return t.prototype.initialize=function(){if(this.options.disableDragAndDrop){this.documentEventHandlers.onDrop=function(n){n.preventDefault()};this.$eventListener=this.$dropzone;this.$eventListener.on("drop",this.documentEventHandlers.onDrop)}else this.attachDragAndDropEvent()},t.prototype.attachDragAndDropEvent=function(){var t=this,i=n(),r=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(n){var u=t.context.invoke("codeview.isActivated"),f=t.$editor.width()>0&&t.$editor.height()>0;u||i.length||!f||(t.$editor.addClass("dragover"),t.$dropzone.width(t.$editor.width()),t.$dropzone.height(t.$editor.height()),r.text(t.lang.image.dragImageHere));i=i.add(n.target)};this.documentEventHandlers.onDragleave=function(n){i=i.not(n.target);i.length||t.$editor.removeClass("dragover")};this.documentEventHandlers.onDrop=function(){i=n();t.$editor.removeClass("dragover")};this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop);this.$dropzone.on("dragenter",function(){t.$dropzone.addClass("hover");r.text(t.lang.image.dropImage)}).on("dragleave",function(){t.$dropzone.removeClass("hover");r.text(t.lang.image.dragImageHere)});this.$dropzone.on("drop",function(i){var r=i.originalEvent.dataTransfer;i.preventDefault();r&&r.files&&r.files.length?(t.$editable.focus(),t.context.invoke("editor.insertImagesOrCallback",r.files)):n.each(r.types,function(i,u){var f=r.getData(u);u.toLowerCase().indexOf("text")>-1?t.context.invoke("editor.pasteHTML",f):n(f).each(function(n,i){t.context.invoke("editor.insertNode",i)})})}).on("dragover",!1)},t.prototype.destroy=function(){var n=this;Object.keys(this.documentEventHandlers).forEach(function(t){n.$eventListener.off(t.substr(2).toLowerCase(),n.documentEventHandlers[t])});this.documentEventHandlers={}},t}(),lt;e.hasCodeMirror&&(e.isSupportAmd?require(["codemirror"],function(n){lt=n}):lt=window.CodeMirror);var po=function(){function n(n){this.context=n;this.$editor=n.layoutInfo.editor;this.$editable=n.layoutInfo.editable;this.$codable=n.layoutInfo.codable;this.options=n.options}return n.prototype.sync=function(){var n=this.isActivated();n&&e.hasCodeMirror&&this.$codable.data("cmEditor").save()},n.prototype.isActivated=function(){return this.$editor.hasClass("codeview")},n.prototype.toggle=function(){this.isActivated()?this.deactivate():this.activate();this.context.triggerEvent("codeview.toggled")},n.prototype.activate=function(){var i=this,n,r;if(this.$codable.val(t.html(this.$editable,this.options.prettifyHtml)),this.$codable.height(this.$editable.height()),this.context.invoke("toolbar.updateCodeview",!0),this.$editor.addClass("codeview"),this.$codable.focus(),e.hasCodeMirror){if(n=lt.fromTextArea(this.$codable[0],this.options.codemirror),this.options.codemirror.tern){r=new lt.TernServer(this.options.codemirror.tern);n.ternServer=r;n.on("cursorActivity",function(n){r.updateArgHints(n)})}n.on("blur",function(t){i.context.triggerEvent("blur.codeview",n.getValue(),t)});n.setSize(null,this.$editable.outerHeight());this.$codable.data("cmEditor",n)}else this.$codable.on("blur",function(n){i.context.triggerEvent("blur.codeview",i.$codable.val(),n)})},n.prototype.deactivate=function(){var n,i,r;e.hasCodeMirror&&(n=this.$codable.data("cmEditor"),this.$codable.val(n.getValue()),n.toTextArea());i=t.value(this.$codable,this.options.prettifyHtml)||t.emptyPara;r=this.$editable.html()!==i;this.$editable.html(i);this.$editable.height(this.options.height?this.$codable.height():"auto");this.$editor.removeClass("codeview");r&&this.context.triggerEvent("change",this.$editable.html(),this.$editable);this.$editable.focus();this.context.invoke("toolbar.updateCodeview",!1)},n.prototype.destroy=function(){this.isActivated()&&this.deactivate()},n}(),wo=24,bo=function(){function t(t){this.$document=n(document);this.$statusbar=t.layoutInfo.statusbar;this.$editable=t.layoutInfo.editable;this.options=t.options}return t.prototype.initialize=function(){var n=this;if(this.options.airMode||this.options.disableResizeEditor){this.destroy();return}this.$statusbar.on("mousedown",function(t){t.preventDefault();t.stopPropagation();var r=n.$editable.offset().top-n.$document.scrollTop(),i=function(t){var i=t.clientY-(r+wo);i=n.options.minheight>0?Math.max(i,n.options.minheight):i;i=n.options.maxHeight>0?Math.min(i,n.options.maxHeight):i;n.$editable.height(i)};n.$document.on("mousemove",i).one("mouseup",function(){n.$document.off("mousemove",i)})})},t.prototype.destroy=function(){this.$statusbar.off()},t}(),ko=function(){function t(t){var i=this;this.context=t;this.$editor=t.layoutInfo.editor;this.$toolbar=t.layoutInfo.toolbar;this.$editable=t.layoutInfo.editable;this.$codable=t.layoutInfo.codable;this.$window=n(window);this.$scrollbar=n("html, body");this.onResize=function(){i.resizeTo({h:i.$window.height()-i.$toolbar.outerHeight()})}}return t.prototype.resizeTo=function(n){this.$editable.css("height",n.h);this.$codable.css("height",n.h);this.$codable.data("cmeditor")&&this.$codable.data("cmeditor").setsize(null,n.h)},t.prototype.toggle=function(){this.$editor.toggleClass("fullscreen");this.isFullscreen()?(this.$editable.data("orgHeight",this.$editable.css("height")),this.$window.on("resize",this.onResize).trigger("resize"),this.$scrollbar.css("overflow","hidden")):(this.$window.off("resize",this.onResize),this.resizeTo({h:this.$editable.data("orgHeight")}),this.$scrollbar.css("overflow","visible"));this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())},t.prototype.isFullscreen=function(){return this.$editor.hasClass("fullscreen")},t}(),go=function(){function i(t){var i=this;this.context=t;this.$document=n(document);this.$editingArea=t.layoutInfo.editingArea;this.options=t.options;this.lang=this.options.langInfo;this.events={"summernote.mousedown":function(n,t){i.update(t.target)&&t.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){i.update()},"summernote.disable":function(){i.hide()},"summernote.codeview.toggled":function(){i.update()}}}return i.prototype.initialize=function(){var i=this;this.$handle=n(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"><\/div>','<div class="note-control-holder note-control-nw"><\/div>','<div class="note-control-holder note-control-ne"><\/div>','<div class="note-control-holder note-control-sw"><\/div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"><\/div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"><\/div>',"<\/div>","<\/div>"].join("")).prependTo(this.$editingArea);this.$handle.on("mousedown",function(n){if(t.isControlSizing(n.target)){n.preventDefault();n.stopPropagation();var r=i.$handle.find(".note-control-selection").data("target"),u=r.offset(),e=i.$document.scrollTop(),f=function(n){i.context.invoke("editor.resizeTo",{x:n.clientX-u.left,y:n.clientY-(u.top-e)},r,!n.shiftKey);i.update(r[0])};i.$document.on("mousemove",f).one("mouseup",function(n){n.preventDefault();i.$document.off("mousemove",f);i.context.invoke("editor.afterCommand")});r.data("ratio")||r.data("ratio",r.height()/r.width())}});this.$handle.on("wheel",function(n){n.preventDefault();i.update()})},i.prototype.destroy=function(){this.$handle.remove()},i.prototype.update=function(i){var e,o,f,c;if(this.context.isDisabled())return!1;if(e=t.isImg(i),o=this.$handle.find(".note-control-selection"),this.context.invoke("imagePopover.update",i),e){var r=n(i),s=r.position(),h={left:s.left+parseInt(r.css("marginLeft"),10),top:s.top+parseInt(r.css("marginTop"),10)},u={w:r.outerWidth(!1),h:r.outerHeight(!1)};o.css({display:"block",left:h.left,top:h.top,width:u.w,height:u.h}).data("target",r);f=new Image;f.src=r.attr("src");c=u.w+"x"+u.h+" ("+this.lang.image.original+": "+f.width+"x"+f.height+")";o.find(".note-control-selection-info").text(c);this.context.invoke("editor.saveTarget",i)}else this.hide();return e},i.prototype.hide=function(){this.context.invoke("editor.clearTarget");this.$handle.children().hide()},i}(),ns="http://",ts=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i,is=function(){function t(n){var t=this;this.context=n;this.events={"summernote.keyup":function(n,i){i.isDefaultPrevented()||t.handleKeyup(i)},"summernote.keydown":function(n,i){t.handleKeydown(i)}}}return t.prototype.initialize=function(){this.lastWordRange=null},t.prototype.destroy=function(){this.lastWordRange=null},t.prototype.replace=function(){var t,i,r,u;this.lastWordRange&&(t=this.lastWordRange.toString(),i=t.match(ts),i&&(i[1]||i[2])&&(r=i[1]?t:ns+t,u=n("<a />").html(t).attr("href",r)[0],this.lastWordRange.insertNode(u),this.lastWordRange=null,this.context.invoke("editor.focus")))},t.prototype.handleKeydown=function(n){if(i.contains([o.code.ENTER,o.code.SPACE],n.keyCode)){var t=this.context.invoke("editor.createRange").getWordRange();this.lastWordRange=t}},t.prototype.handleKeyup=function(n){i.contains([o.code.ENTER,o.code.SPACE],n.keyCode)&&this.replace()},t}(),rs=function(){function n(n){var t=this;this.$note=n.layoutInfo.note;this.events={"summernote.change":function(){t.$note.val(n.invoke("code"))}}}return n.prototype.shouldInitialize=function(){return t.isTextarea(this.$note[0])},n}(),us=function(){function t(n){var t=this;this.context=n;this.$editingArea=n.layoutInfo.editingArea;this.options=n.options;this.events={"summernote.init summernote.change":function(){t.update()},"summernote.codeview.toggled":function(){t.update()}}}return t.prototype.shouldInitialize=function(){return!!this.options.placeholder},t.prototype.initialize=function(){var t=this;this.$placeholder=n('<div class="note-placeholder">');this.$placeholder.on("click",function(){t.context.invoke("focus")}).text(this.options.placeholder).prependTo(this.$editingArea);this.update()},t.prototype.destroy=function(){this.$placeholder.remove()},t.prototype.update=function(){var n=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(n)},t}(),fs=function(){function t(t){this.ui=n.summernote.ui;this.context=t;this.$toolbar=t.layoutInfo.toolbar;this.options=t.options;this.lang=this.options.langInfo;this.invertedKeyMap=u.invertObject(this.options.keyMap[e.isMac?"mac":"pc"])}return t.prototype.representShortcut=function(n){var t=this.invertedKeyMap[n];return!this.options.shortcuts||!t?"":(e.isMac&&(t=t.replace("CMD","â").replace("SHIFT","â§")),t=t.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")," ("+t+")")},t.prototype.button=function(n){return!this.options.tooltip&&n.tooltip&&delete n.tooltip,n.container=this.options.container,this.ui.button(n)},t.prototype.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons();this.addTablePopoverButtons();this.fontInstalledMap={}},t.prototype.destroy=function(){delete this.fontInstalledMap},t.prototype.isFontInstalled=function(n){return this.fontInstalledMap.hasOwnProperty(n)||(this.fontInstalledMap[n]=e.isFontInstalled(n)||i.contains(this.options.fontNamesIgnoreCheck,n)),this.fontInstalledMap[n]},t.prototype.isFontDeservedToAdd=function(t){return t=t.toLowerCase(),t!==""&&this.isFontInstalled(t)&&n.inArray(t,["sans-serif","serif","monospace","cursive","fantasy"])===-1},t.prototype.addToolbarButtons=function(){var t=this,e,r,i,f;for(this.context.memo("button.style",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.magic),t.options),tooltip:t.lang.style.style,data:{toggle:"dropdown"}}),t.ui.dropdown({className:"dropdown-style",items:t.options.styleTags,template:function(n){typeof n=="string"&&(n={tag:n,title:t.lang.style.hasOwnProperty(n)?t.lang.style[n]:n});var i=n.tag,r=n.title,u=n.style?' style="'+n.style+'" ':"",f=n.className?' class="'+n.className+'"':"";return"<"+i+u+f+">"+r+"<\/"+i+">"},click:t.context.createInvokeHandler("editor.formatBlock")})]).render()}),e=function(n){var i=r.options.styleTags[n];r.context.memo("button.style."+i,function(){return t.button({className:"note-btn-style-"+i,contents:'<div data-value="'+i+'">'+i.toUpperCase()+"<\/div>",tooltip:i.toUpperCase(),click:t.context.createInvokeHandler("editor.formatBlock")}).render()})},r=this,i=0,f=this.options.styleTags.length;i<f;i++)e(i,f);this.context.memo("button.bold",function(){return t.button({className:"note-btn-bold",contents:t.ui.icon(t.options.icons.bold),tooltip:t.lang.font.bold+t.representShortcut("bold"),click:t.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()});this.context.memo("button.italic",function(){return t.button({className:"note-btn-italic",contents:t.ui.icon(t.options.icons.italic),tooltip:t.lang.font.italic+t.representShortcut("italic"),click:t.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()});this.context.memo("button.underline",function(){return t.button({className:"note-btn-underline",contents:t.ui.icon(t.options.icons.underline),tooltip:t.lang.font.underline+t.representShortcut("underline"),click:t.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()});this.context.memo("button.clear",function(){return t.button({contents:t.ui.icon(t.options.icons.eraser),tooltip:t.lang.font.clear+t.representShortcut("removeFormat"),click:t.context.createInvokeHandler("editor.removeFormat")}).render()});this.context.memo("button.strikethrough",function(){return t.button({className:"note-btn-strikethrough",contents:t.ui.icon(t.options.icons.strikethrough),tooltip:t.lang.font.strikethrough+t.representShortcut("strikethrough"),click:t.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()});this.context.memo("button.superscript",function(){return t.button({className:"note-btn-superscript",contents:t.ui.icon(t.options.icons.superscript),tooltip:t.lang.font.superscript,click:t.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()});this.context.memo("button.subscript",function(){return t.button({className:"note-btn-subscript",contents:t.ui.icon(t.options.icons.subscript),tooltip:t.lang.font.subscript,click:t.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()});this.context.memo("button.fontname",function(){var i=t.context.invoke("editor.currentStyle");return n.each(i["font-family"].split(","),function(i,r){r=r.trim().replace(/['"]+/g,"");t.isFontDeservedToAdd(r)&&n.inArray(r,t.options.fontNames)===-1&&t.options.fontNames.push(r)}),t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents('<span class="note-current-fontname"/>',t.options),tooltip:t.lang.font.name,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:t.options.icons.menuCheck,items:t.options.fontNames.filter(t.isFontInstalled.bind(t)),template:function(n){return"<span style=\"font-family: '"+n+"'\">"+n+"<\/span>"},click:t.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()});this.context.memo("button.fontsize",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents('<span class="note-current-fontsize"/>',t.options),tooltip:t.lang.font.size,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:t.options.icons.menuCheck,items:t.options.fontSizes,click:t.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()});this.context.memo("button.color",function(){return t.ui.buttonGroup({className:"note-color",children:[t.button({className:"note-current-color-button",contents:t.ui.icon(t.options.icons.font+" note-recent-color"),tooltip:t.lang.color.recent,click:function(i){var r=n(i.currentTarget);t.context.invoke("editor.color",{backColor:r.attr("data-backColor"),foreColor:r.attr("data-foreColor")})},callback:function(n){var t=n.find(".note-recent-color");t.css("background-color","#FFFF00");n.attr("data-backColor","#FFFF00")}}),t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents("",t.options),tooltip:t.lang.color.more,data:{toggle:"dropdown"}}),t.ui.dropdown({items:['<div class="note-palette">','  <div class="note-palette-title">'+t.lang.color.background+"<\/div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="backColor" data-value="inherit">',t.lang.color.transparent,"    <\/button>","  <\/div>",'  <div class="note-holder" data-event="backColor"/>',"<\/div>",'<div class="note-palette">','  <div class="note-palette-title">'+t.lang.color.foreground+"<\/div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="removeFormat" data-value="foreColor">',t.lang.color.resetToDefault,"    <\/button>","  <\/div>",'  <div class="note-holder" data-event="foreColor"/>',"<\/div>"].join(""),callback:function(i){i.find(".note-holder").each(function(i,r){var u=n(r);u.append(t.ui.palette({colors:t.options.colors,eventName:u.data("event"),container:t.options.container,tooltip:t.options.tooltip}).render())})},click:function(i){var r=n(i.target),u=r.data("event"),f=r.data("value");if(u&&f){var e=u==="backColor"?"background-color":"color",o=r.closest(".note-color").find(".note-recent-color"),s=r.closest(".note-color").find(".note-current-color-button");o.css(e,f);s.attr("data-"+u,f);t.context.invoke("editor."+u,f)}}})]}).render()});this.context.memo("button.ul",function(){return t.button({contents:t.ui.icon(t.options.icons.unorderedlist),tooltip:t.lang.lists.unordered+t.representShortcut("insertUnorderedList"),click:t.context.createInvokeHandler("editor.insertUnorderedList")}).render()});this.context.memo("button.ol",function(){return t.button({contents:t.ui.icon(t.options.icons.orderedlist),tooltip:t.lang.lists.ordered+t.representShortcut("insertOrderedList"),click:t.context.createInvokeHandler("editor.insertOrderedList")}).render()});var o=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),s=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),h=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),c=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),l=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),a=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",u.invoke(o,"render"));this.context.memo("button.justifyCenter",u.invoke(s,"render"));this.context.memo("button.justifyRight",u.invoke(h,"render"));this.context.memo("button.justifyFull",u.invoke(c,"render"));this.context.memo("button.outdent",u.invoke(l,"render"));this.context.memo("button.indent",u.invoke(a,"render"));this.context.memo("button.paragraph",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.alignLeft),t.options),tooltip:t.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),t.ui.dropdown([t.ui.buttonGroup({className:"note-align",children:[o,s,h,c]}),t.ui.buttonGroup({className:"note-list",children:[l,a]})])]).render()});this.context.memo("button.height",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.textHeight),t.options),tooltip:t.lang.font.height,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({items:t.options.lineHeights,checkClassName:t.options.icons.menuCheck,className:"dropdown-line-height",click:t.context.createInvokeHandler("editor.lineHeight")})]).render()});this.context.memo("button.table",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.table),t.options),tooltip:t.lang.table.table,data:{toggle:"dropdown"}}),t.ui.dropdown({className:"note-table",items:'<div class="note-dimension-picker">  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>  <div class="note-dimension-picker-highlighted"/>  <div class="note-dimension-picker-unhighlighted"/><\/div><div class="note-dimension-display">1 x 1<\/div>'})],{callback:function(n){var i=n.find(".note-dimension-picker-mousecatcher");i.css({width:t.options.insertTableMaxSize.col+"em",height:t.options.insertTableMaxSize.row+"em"}).mousedown(t.context.createInvokeHandler("editor.insertTable")).on("mousemove",t.tableMoveHandler.bind(t))}}).render()});this.context.memo("button.link",function(){return t.button({contents:t.ui.icon(t.options.icons.link),tooltip:t.lang.link.link+t.representShortcut("linkDialog.show"),click:t.context.createInvokeHandler("linkDialog.show")}).render()});this.context.memo("button.picture",function(){return t.button({contents:t.ui.icon(t.options.icons.picture),tooltip:t.lang.image.image,click:t.context.createInvokeHandler("imageDialog.show")}).render()});this.context.memo("button.video",function(){return t.button({contents:t.ui.icon(t.options.icons.video),tooltip:t.lang.video.video,click:t.context.createInvokeHandler("videoDialog.show")}).render()});this.context.memo("button.hr",function(){return t.button({contents:t.ui.icon(t.options.icons.minus),tooltip:t.lang.hr.insert+t.representShortcut("insertHorizontalRule"),click:t.context.createInvokeHandler("editor.insertHorizontalRule")}).render()});this.context.memo("button.fullscreen",function(){return t.button({className:"btn-fullscreen",contents:t.ui.icon(t.options.icons.arrowsAlt),tooltip:t.options.fullscreen,click:t.context.createInvokeHandler("fullscreen.toggle")}).render()});this.context.memo("button.codeview",function(){return t.button({className:"btn-codeview",contents:t.ui.icon(t.options.icons.code),tooltip:t.options.codeview,click:t.context.createInvokeHandler("codeview.toggle")}).render()});this.context.memo("button.redo",function(){return t.button({contents:t.ui.icon(t.options.icons.redo),tooltip:t.lang.history.redo+t.representShortcut("redo"),click:t.context.createInvokeHandler("editor.redo")}).render()});this.context.memo("button.undo",function(){return t.button({contents:t.ui.icon(t.options.icons.undo),tooltip:t.lang.history.undo+t.representShortcut("undo"),click:t.context.createInvokeHandler("editor.undo")}).render()});this.context.memo("button.help",function(){return t.button({contents:t.ui.icon(t.options.icons.question),tooltip:t.options.help,click:t.context.createInvokeHandler("helpDialog.show")}).render()})},t.prototype.addImagePopoverButtons=function(){var n=this;this.context.memo("button.imageSize100",function(){return n.button({contents:'<span class="note-fontsize-10">100%<\/span>',tooltip:n.lang.image.resizeFull,click:n.context.createInvokeHandler("editor.resize","1")}).render()});this.context.memo("button.imageSize50",function(){return n.button({contents:'<span class="note-fontsize-10">50%<\/span>',tooltip:n.lang.image.resizeHalf,click:n.context.createInvokeHandler("editor.resize","0.5")}).render()});this.context.memo("button.imageSize25",function(){return n.button({contents:'<span class="note-fontsize-10">25%<\/span>',tooltip:n.lang.image.resizeQuarter,click:n.context.createInvokeHandler("editor.resize","0.25")}).render()});this.context.memo("button.floatLeft",function(){return n.button({contents:n.ui.icon(n.options.icons.alignLeft),tooltip:n.lang.image.floatLeft,click:n.context.createInvokeHandler("editor.floatMe","left")}).render()});this.context.memo("button.floatRight",function(){return n.button({contents:n.ui.icon(n.options.icons.alignRight),tooltip:n.lang.image.floatRight,click:n.context.createInvokeHandler("editor.floatMe","right")}).render()});this.context.memo("button.floatNone",function(){return n.button({contents:n.ui.icon(n.options.icons.alignJustify),tooltip:n.lang.image.floatNone,click:n.context.createInvokeHandler("editor.floatMe","none")}).render()});this.context.memo("button.removeMedia",function(){return n.button({contents:n.ui.icon(n.options.icons.trash),tooltip:n.lang.image.remove,click:n.context.createInvokeHandler("editor.removeMedia")}).render()})},t.prototype.addLinkPopoverButtons=function(){var n=this;this.context.memo("button.linkDialogShow",function(){return n.button({contents:n.ui.icon(n.options.icons.link),tooltip:n.lang.link.edit,click:n.context.createInvokeHandler("linkDialog.show")}).render()});this.context.memo("button.unlink",function(){return n.button({contents:n.ui.icon(n.options.icons.unlink),tooltip:n.lang.link.unlink,click:n.context.createInvokeHandler("editor.unlink")}).render()})},t.prototype.addTablePopoverButtons=function(){var n=this;this.context.memo("button.addRowUp",function(){return n.button({className:"btn-md",contents:n.ui.icon(n.options.icons.rowAbove),tooltip:n.lang.table.addRowAbove,click:n.context.createInvokeHandler("editor.addRow","top")}).render()});this.context.memo("button.addRowDown",function(){return n.button({className:"btn-md",contents:n.ui.icon(n.options.icons.rowBelow),tooltip:n.lang.table.addRowBelow,click:n.context.createInvokeHandler("editor.addRow","bottom")}).render()});this.context.memo("button.addColLeft",function(){return n.button({className:"btn-md",contents:n.ui.icon(n.options.icons.colBefore),tooltip:n.lang.table.addColLeft,click:n.context.createInvokeHandler("editor.addCol","left")}).render()});this.context.memo("button.addColRight",function(){return n.button({className:"btn-md",contents:n.ui.icon(n.options.icons.colAfter),tooltip:n.lang.table.addColRight,click:n.context.createInvokeHandler("editor.addCol","right")}).render()});this.context.memo("button.deleteRow",function(){return n.button({className:"btn-md",contents:n.ui.icon(n.options.icons.rowRemove),tooltip:n.lang.table.delRow,click:n.context.createInvokeHandler("editor.deleteRow")}).render()});this.context.memo("button.deleteCol",function(){return n.button({className:"btn-md",contents:n.ui.icon(n.options.icons.colRemove),tooltip:n.lang.table.delCol,click:n.context.createInvokeHandler("editor.deleteCol")}).render()});this.context.memo("button.deleteTable",function(){return n.button({className:"btn-md",contents:n.ui.icon(n.options.icons.trash),tooltip:n.lang.table.delTable,click:n.context.createInvokeHandler("editor.deleteTable")}).render()})},t.prototype.build=function(t,i){for(var e,c,u,f=0,o=i.length;f<o;f++){var r=i[f],l=n.isArray(r)?r[0]:r,s=n.isArray(r)?r.length===1?[r[0]]:r[1]:[r],h=this.ui.buttonGroup({className:"note-"+l}).render();for(e=0,c=s.length;e<c;e++)u=this.context.memo("button."+s[e]),u&&h.append(typeof u=="function"?u(this.context):u);h.appendTo(t)}},t.prototype.updateCurrentStyle=function(t){var h=this,u=t||this.$toolbar,r=this.context.invoke("editor.currentStyle"),o,f,e,s;this.updateBtnStates(u,{".note-btn-bold":function(){return r["font-bold"]==="bold"},".note-btn-italic":function(){return r["font-italic"]==="italic"},".note-btn-underline":function(){return r["font-underline"]==="underline"},".note-btn-subscript":function(){return r["font-subscript"]==="subscript"},".note-btn-superscript":function(){return r["font-superscript"]==="superscript"},".note-btn-strikethrough":function(){return r["font-strikethrough"]==="strikethrough"}});r["font-family"]&&(o=r["font-family"].split(",").map(function(n){return n.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),f=i.find(o,this.isFontInstalled.bind(this)),u.find(".dropdown-fontname a").each(function(t,i){var r=n(i),u=r.data("value")+""==f+"";r.toggleClass("checked",u)}),u.find(".note-current-fontname").text(f).css("font-family",f));r["font-size"]&&(e=r["font-size"],u.find(".dropdown-fontsize a").each(function(t,i){var r=n(i),u=r.data("value")+""==e+"";r.toggleClass("checked",u)}),u.find(".note-current-fontsize").text(e));r["line-height"]&&(s=r["line-height"],u.find(".dropdown-line-height li a").each(function(t,i){var r=n(i).data("value")+""==s+"";h.className=r?"checked":""}))},t.prototype.updateBtnStates=function(t,i){var r=this;n.each(i,function(n,i){r.ui.toggleBtnActive(t.find(n),i())})},t.prototype.tableMoveHandler=function(t){var e=18,r=n(t.target.parentNode),s=r.next(),h=r.find(".note-dimension-picker-mousecatcher"),c=r.find(".note-dimension-picker-highlighted"),o=r.find(".note-dimension-picker-unhighlighted"),u,f,i;t.offsetX===undefined?(f=n(t.target).offset(),u={x:t.pageX-f.left,y:t.pageY-f.top}):u={x:t.offsetX,y:t.offsetY};i={c:Math.ceil(u.x/e)||1,r:Math.ceil(u.y/e)||1};c.css({width:i.c+"em",height:i.r+"em"});h.data("value",i.c+"x"+i.r);i.c>3&&i.c<this.options.insertTableMaxSize.col&&o.css({width:i.c+1+"em"});i.r>3&&i.r<this.options.insertTableMaxSize.row&&o.css({height:i.r+1+"em"});s.html(i.c+" x "+i.r)},t}(),es=function(){function t(t){this.context=t;this.$window=n(window);this.$document=n(document);this.ui=n.summernote.ui;this.$note=t.layoutInfo.note;this.$editor=t.layoutInfo.editor;this.$toolbar=t.layoutInfo.toolbar;this.options=t.options;this.followScroll=this.followScroll.bind(this)}return t.prototype.shouldInitialize=function(){return!this.options.airMode},t.prototype.initialize=function(){var n=this;this.options.toolbar=this.options.toolbar||[];this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide();this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer);this.changeContainer(!1);this.$note.on("summernote.keyup summernote.mouseup summernote.change",function(){n.context.invoke("buttons.updateCurrentStyle")});if(this.context.invoke("buttons.updateCurrentStyle"),this.options.followingToolbar)this.$window.on("scroll resize",this.followScroll)},t.prototype.destroy=function(){this.$toolbar.children().remove();this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)},t.prototype.followScroll=function(){var t;if(this.$editor.hasClass("fullscreen"))return!1;var f=this.$toolbar.parent(".note-toolbar-wrapper"),e=this.$editor.outerHeight(),o=this.$editor.width(),i=this.$toolbar.height();f.css({height:i});t=0;this.options.otherStaticBar&&(t=n(this.options.otherStaticBar).outerHeight());var r=this.$document.scrollTop(),u=this.$editor.offset().top,s=u+e,h=u-t,c=s-t-i;r>h&&r<c?this.$toolbar.css({position:"fixed",top:t,width:o}):this.$toolbar.css({position:"relative",top:0,width:"100%"})},t.prototype.changeContainer=function(n){n?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer)},t.prototype.updateFullscreen=function(n){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),n);this.changeContainer(n)},t.prototype.updateCodeview=function(n){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),n);n?this.deactivate():this.activate()},t.prototype.activate=function(n){var t=this.$toolbar.find("button");n||(t=t.not(".btn-codeview"));this.ui.toggleBtn(t,!0)},t.prototype.deactivate=function(n){var t=this.$toolbar.find("button");n||(t=t.not(".btn-codeview"));this.ui.toggleBtn(t,!1)},t}(),os=function(){function t(t){this.context=t;this.ui=n.summernote.ui;this.$body=n(document.body);this.$editor=t.layoutInfo.editor;this.options=t.options;this.lang=this.options.langInfo;t.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}return t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,i=['<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.textToDisplay+"<\/label>",'<input class="note-link-text form-control note-form-control  note-input" type="text" />',"<\/div>",'<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.url+"<\/label>",'<input class="note-link-url form-control note-form-control note-input" type="text" value="http://" />',"<\/div>",this.options.disableLinkTarget?"":n("<div/>").append(this.ui.checkbox({id:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:!0}).render()).html()].join(""),r='<button type="submit" href="#" class="btn btn-primary note-btn note-btn-primary note-link-btn" disabled>'+this.lang.link.insert+"<\/button>";this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:i,footer:r}).render().appendTo(t)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()},t.prototype.bindEnterKey=function(n,t){n.on("keypress",function(n){n.keyCode===o.code.ENTER&&(n.preventDefault(),t.trigger("click"))})},t.prototype.toggleLinkBtn=function(n,t,i){this.ui.toggleBtn(n,t.val()&&i.val())},t.prototype.showLinkDialog=function(t){var i=this;return n.Deferred(function(n){var r=i.$dialog.find(".note-link-text"),u=i.$dialog.find(".note-link-url"),f=i.$dialog.find(".note-link-btn"),o=i.$dialog.find("input[type=checkbox]");i.ui.onDialogShown(i.$dialog,function(){var s,h,c;i.context.triggerEvent("dialog.shown");t.url||(t.url=t.text);r.val(t.text);s=function(){i.toggleLinkBtn(f,r,u);t.text=r.val()};r.on("input",s).on("paste",function(){setTimeout(s,0)});h=function(){i.toggleLinkBtn(f,r,u);t.text||r.val(u.val())};u.on("input",h).on("paste",function(){setTimeout(h,0)}).val(t.url);e.isSupportTouch||u.trigger("focus");i.toggleLinkBtn(f,r,u);i.bindEnterKey(u,f);i.bindEnterKey(r,f);c=t.isNewWindow!==undefined?t.isNewWindow:i.context.options.linkTargetBlank;o.prop("checked",c);f.one("click",function(f){f.preventDefault();n.resolve({range:t.range,url:u.val(),text:r.val(),isNewWindow:o.is(":checked")});i.ui.hideDialog(i.$dialog)})});i.ui.onDialogHidden(i.$dialog,function(){r.off("input paste keypress");u.off("input paste keypress");f.off("click");n.state()==="pending"&&n.reject()});i.ui.showDialog(i.$dialog)}).promise()},t.prototype.show=function(){var n=this,t=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange");this.showLinkDialog(t).then(function(t){n.context.invoke("editor.restoreRange");n.context.invoke("editor.createLink",t)}).fail(function(){n.context.invoke("editor.restoreRange")})},t}(),ss=function(){function r(t){var i=this;this.context=t;this.ui=n.summernote.ui;this.options=t.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){i.update()},"summernote.disable summernote.dialog.shown":function(){i.hide()}}}return r.prototype.shouldInitialize=function(){return!i.isEmpty(this.options.popover.link)},r.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function(n){var t=n.find(".popover-content,.note-popover-content");t.prepend('<span><a target="_blank"><\/a>&nbsp;<\/span>')}}).render().appendTo(this.options.container);var n=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",n,this.options.popover.link)},r.prototype.destroy=function(){this.$popover.remove()},r.prototype.update=function(){var i,r,u,f;if(!this.context.invoke("editor.hasFocus")){this.hide();return}i=this.context.invoke("editor.createRange");i.isCollapsed()&&i.isOnAnchor()?(r=t.ancestor(i.sc,t.isAnchor),u=n(r).attr("href"),this.$popover.find("a").attr("href",u).html(u),f=t.posFromPlaceholder(r),this.$popover.css({display:"block",left:f.left,top:f.top})):this.hide()},r.prototype.hide=function(){this.$popover.hide()},r}(),hs=function(){function t(t){this.context=t;this.ui=n.summernote.ui;this.$body=n(document.body);this.$editor=t.layoutInfo.editor;this.options=t.options;this.lang=this.options.langInfo}return t.prototype.initialize=function(){var r=this.options.dialogsInBody?this.$body:this.$editor,t="",n,i;this.options.maximumImageFileSize&&(n=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024)),i=(this.options.maximumImageFileSize/Math.pow(1024,n)).toFixed(2)*1+" "+" KMGTP"[n]+"B",t="<small>"+(this.lang.image.maximumFileSize+" : "+i)+"<\/small>");var u=['<div class="form-group note-form-group note-group-select-from-files">','<label class="note-form-label">'+this.lang.image.selectFromFiles+"<\/label>",'<input class="note-image-input note-form-control note-input" ',' type="file" name="files" accept="image/*" multiple="multiple" />',t,"<\/div>",'<div class="form-group note-group-image-url" style="overflow:auto;">','<label class="note-form-label">'+this.lang.image.url+"<\/label>",'<input class="note-image-url form-control note-form-control note-input ',' col-md-12" type="text" />',"<\/div>"].join(""),f='<button type="submit" href="#" class="btn btn-primary note-btn note-btn-primary note-image-btn" disabled>'+this.lang.image.insert+"<\/button>";this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:u,footer:f}).render().appendTo(r)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()},t.prototype.bindEnterKey=function(n,t){n.on("keypress",function(n){n.keyCode===o.code.ENTER&&(n.preventDefault(),t.trigger("click"))})},t.prototype.show=function(){var n=this;this.context.invoke("editor.saveRange");this.showImageDialog().then(function(t){n.ui.hideDialog(n.$dialog);n.context.invoke("editor.restoreRange");typeof t=="string"?n.context.invoke("editor.insertImage",t):n.context.invoke("editor.insertImagesOrCallback",t)}).fail(function(){n.context.invoke("editor.restoreRange")})},t.prototype.showImageDialog=function(){var t=this;return n.Deferred(function(n){var u=t.$dialog.find(".note-image-input"),i=t.$dialog.find(".note-image-url"),r=t.$dialog.find(".note-image-btn");t.ui.onDialogShown(t.$dialog,function(){t.context.triggerEvent("dialog.shown");u.replaceWith(u.clone().on("change",function(t){n.resolve(t.target.files||t.target.value)}).val(""));r.click(function(t){t.preventDefault();n.resolve(i.val())});i.on("keyup paste",function(){var n=i.val();t.ui.toggleBtn(r,n)}).val("");e.isSupportTouch||i.trigger("focus");t.bindEnterKey(i,r)});t.ui.onDialogHidden(t.$dialog,function(){u.off("change");i.off("keyup paste keypress");r.off("click");n.state()==="pending"&&n.reject()});t.ui.showDialog(t.$dialog)})},t}(),cs=function(){function r(t){var i=this;this.context=t;this.ui=n.summernote.ui;this.editable=t.layoutInfo.editable[0];this.options=t.options;this.events={"summernote.disable":function(){i.hide()}}}return r.prototype.shouldInitialize=function(){return!i.isEmpty(this.options.popover.image)},r.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var n=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",n,this.options.popover.image)},r.prototype.destroy=function(){this.$popover.remove()},r.prototype.update=function(n){if(t.isImg(n)){var i=t.posFromPlaceholder(n),r=t.posFromPlaceholder(this.editable);this.$popover.css({display:"block",left:this.options.popatmouse?event.pageX-20:i.left,top:this.options.popatmouse?event.pageY:Math.min(i.top,r.top)})}else this.hide()},r.prototype.hide=function(){this.$popover.hide()},r}(),ls=function(){function r(t){var i=this;this.context=t;this.ui=n.summernote.ui;this.options=t.options;this.events={"summernote.mousedown":function(n,t){i.update(t.target)},"summernote.keyup summernote.scroll summernote.change":function(){i.update()},"summernote.disable":function(){i.hide()}}}return r.prototype.shouldInitialize=function(){return!i.isEmpty(this.options.popover.table)},r.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var n=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",n,this.options.popover.table);e.isFF&&document.execCommand("enableInlineTableEditing",!1,!1)},r.prototype.destroy=function(){this.$popover.remove()},r.prototype.update=function(n){var i,r;return this.context.isDisabled()?!1:(i=t.isCell(n),i?(r=t.posFromPlaceholder(n),this.$popover.css({display:"block",left:r.left,top:r.top})):this.hide(),i)},r.prototype.hide=function(){this.$popover.hide()},r}(),as=function(){function t(t){this.context=t;this.ui=n.summernote.ui;this.$body=n(document.body);this.$editor=t.layoutInfo.editor;this.options=t.options;this.lang=this.options.langInfo}return t.prototype.initialize=function(){var n=this.options.dialogsInBody?this.$body:this.$editor,t=['<div class="form-group note-form-group row-fluid">','<label class="note-form-label">'+this.lang.video.url+' <small class="text-muted">'+this.lang.video.providers+"<\/small><\/label>",'<input class="note-video-url form-control note-form-control note-input" type="text" />',"<\/div>"].join(""),i='<button type="submit" href="#" class="btn btn-primary note-btn note-btn-primary note-video-btn" disabled>'+this.lang.video.insert+"<\/button>";this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:t,footer:i}).render().appendTo(n)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()},t.prototype.bindEnterKey=function(n,t){n.on("keypress",function(n){n.keyCode===o.code.ENTER&&(n.preventDefault(),t.trigger("click"))})},t.prototype.createVideoNode=function(t){var u=t.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/),f=t.match(/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/),e=t.match(/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/),o=t.match(/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/),s=t.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),h=t.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),r=t.match(/\/\/v\.qq\.com.*?vid=(.+)/),c=t.match(/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/),v=t.match(/^.+.(mp4|m4v)$/),y=t.match(/^.+.(ogg|ogv)$/),p=t.match(/^.+.(webm)$/),i,l,a;if(u&&u[1].length===11)l=u[1],i=n("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+l).attr("width","640").attr("height","360");else if(f&&f[0].length)i=n("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+f[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(e&&e[0].length)i=n("<iframe>").attr("frameborder",0).attr("src",e[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(o&&o[3].length)i=n("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+o[3]).attr("width","640").attr("height","360");else if(s&&s[2].length)i=n("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+s[2]).attr("width","640").attr("height","360");else if(h&&h[1].length)i=n("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+h[1]);else if(r&&r[1].length||c&&c[2].length)a=r&&r[1].length?r[1]:c[2],i=n("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","http://v.qq.com/iframe/player.html?vid="+a+"&amp;auto=0");else if(v||y||p)i=n("<video controls>").attr("src",t).attr("width","640").attr("height","360");else return!1;return i.addClass("note-video-clip"),i[0]},t.prototype.show=function(){var n=this,t=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange");this.showVideoDialog(t).then(function(t){n.ui.hideDialog(n.$dialog);n.context.invoke("editor.restoreRange");var i=n.createVideoNode(t);i&&n.context.invoke("editor.insertNode",i)}).fail(function(){n.context.invoke("editor.restoreRange")})},t.prototype.showVideoDialog=function(t){var i=this;return n.Deferred(function(n){var r=i.$dialog.find(".note-video-url"),u=i.$dialog.find(".note-video-btn");i.ui.onDialogShown(i.$dialog,function(){i.context.triggerEvent("dialog.shown");r.val(t).on("input",function(){i.ui.toggleBtn(u,r.val())});e.isSupportTouch||r.trigger("focus");u.click(function(t){t.preventDefault();n.resolve(r.val())});i.bindEnterKey(r,u)});i.ui.onDialogHidden(i.$dialog,function(){r.off("input");u.off("click");n.state()==="pending"&&n.reject()});i.ui.showDialog(i.$dialog)})},t}(),vs=function(){function t(t){this.context=t;this.ui=n.summernote.ui;this.$body=n(document.body);this.$editor=t.layoutInfo.editor;this.options=t.options;this.lang=this.options.langInfo}return t.prototype.initialize=function(){var n=this.options.dialogsInBody?this.$body:this.$editor,t='<p class="text-center"><a href="http://summernote.org/" target="_blank">Summernote 0.8.9<\/a> Â· <a href="https://github.com/summernote/summernote" target="_blank">Project<\/a> Â· <a href="https://github.com/summernote/summernote/issues" target="_blank">Issues<\/a><\/p>';this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:t,callback:function(n){n.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(n)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()},t.prototype.createShortcutList=function(){var i=this,t=this.options.keyMap[e.isMac?"mac":"pc"];return Object.keys(t).map(function(r){var u=t[r],f=n('<div><div class="help-list-item"/><\/div>');return f.append(n("<label><kbd>"+r+"<\/kdb><\/label>").css({width:180,"margin-right":10})).append(n("<span/>").html(i.context.memo("help."+u)||u)),f.html()}).join("")},t.prototype.showHelpDialog=function(){var t=this;return n.Deferred(function(n){t.ui.onDialogShown(t.$dialog,function(){t.context.triggerEvent("dialog.shown");n.resolve()});t.ui.showDialog(t.$dialog)}).promise()},t.prototype.show=function(){var n=this;this.context.invoke("editor.saveRange");this.showHelpDialog().then(function(){n.context.invoke("editor.restoreRange")})},t}(),ys=20,ps=function(){function r(i){var r=this;this.context=i;this.ui=n.summernote.ui;this.options=i.options;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){r.update()},"summernote.disable summernote.change summernote.dialog.shown":function(){r.hide()},"summernote.focusout":function(n,i){e.isFF||i.relatedTarget&&t.ancestor(i.relatedTarget,u.eq(r.$popover[0]))||r.hide()}}}return r.prototype.shouldInitialize=function(){return this.options.airMode&&!i.isEmpty(this.options.popover.air)},r.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var n=this.$popover.find(".popover-content");this.context.invoke("buttons.build",n,this.options.popover.air)},r.prototype.destroy=function(){this.$popover.remove()},r.prototype.update=function(){var t=this.context.invoke("editor.currentStyle"),r,n;t.range&&!t.range.isCollapsed()?(r=i.last(t.range.getClientRects()),r&&(n=u.rect2bnd(r),this.$popover.css({display:"block",left:Math.max(n.left+n.width/2,0)-ys,top:n.top+n.height}),this.context.invoke("buttons.updateCurrentStyle",this.$popover))):this.hide()},r.prototype.hide=function(){this.$popover.hide()},r}(),cr=5,ws=function(){function r(t){var i=this;this.context=t;this.ui=n.summernote.ui;this.$editable=t.layoutInfo.editable;this.options=t.options;this.hint=this.options.hint||[];this.direction=this.options.hintDirection||"bottom";this.hints=n.isArray(this.hint)?this.hint:[this.hint];this.events={"summernote.keyup":function(n,t){t.isDefaultPrevented()||i.handleKeyup(t)},"summernote.keydown":function(n,t){i.handleKeydown(t)},"summernote.disable summernote.dialog.shown":function(){i.hide()}}}return r.prototype.shouldInitialize=function(){return this.hints.length>0},r.prototype.initialize=function(){var t=this;this.lastWordRange=null;this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container);this.$popover.hide();this.$content=this.$popover.find(".popover-content,.note-popover-content");this.$content.on("click",".note-hint-item",function(){t.$content.find(".active").removeClass("active");n(t).addClass("active");t.replace()})},r.prototype.destroy=function(){this.$popover.remove()},r.prototype.selectItem=function(n){this.$content.find(".active").removeClass("active");n.addClass("active");this.$content[0].scrollTop=n[0].offsetTop-this.$content.innerHeight()/2},r.prototype.moveDown=function(){var t=this.$content.find(".note-hint-item.active"),i=t.next(),n;i.length?this.selectItem(i):(n=t.parent().next(),n.length||(n=this.$content.find(".note-hint-group").first()),this.selectItem(n.find(".note-hint-item").first()))},r.prototype.moveUp=function(){var t=this.$content.find(".note-hint-item.active"),i=t.prev(),n;i.length?this.selectItem(i):(n=t.parent().prev(),n.length||(n=this.$content.find(".note-hint-group").last()),this.selectItem(n.find(".note-hint-item").last()))},r.prototype.replace=function(){var t=this.$content.find(".note-hint-item.active"),n;t.length&&(n=this.nodeFromItem(t),this.lastWordRange.insertNode(n),f.createFromNode(n).collapse().select(),this.lastWordRange=null,this.hide(),this.context.triggerEvent("change",this.$editable.html(),this.$editable[0]),this.context.invoke("editor.focus"))},r.prototype.nodeFromItem=function(n){var r=this.hints[n.data("index")],u=n.data("item"),i=r.content?r.content(u):u;return typeof i=="string"&&(i=t.createText(i)),i},r.prototype.createItemTemplates=function(t,i){var r=this.hints[t];return i.map(function(i){var u=n('<div class="note-hint-item"/>');return u.append(r.template?r.template(i):i+""),u.data({index:t,item:i}),u})},r.prototype.handleKeydown=function(n){this.$popover.is(":visible")&&(n.keyCode===o.code.ENTER?(n.preventDefault(),this.replace()):n.keyCode===o.code.UP?(n.preventDefault(),this.moveUp()):n.keyCode===o.code.DOWN&&(n.preventDefault(),this.moveDown()))},r.prototype.searchKeyword=function(n,t,i){var r=this.hints[n],u;r&&r.match.test(t)&&r.search?(u=r.match.exec(t),r.search(u[1],i)):i()},r.prototype.createGroup=function(t,i){var r=this,u=n('<div class="note-hint-group note-hint-group-'+t+'"/>');return this.searchKeyword(t,i,function(n){n=n||[];n.length&&(u.html(r.createItemTemplates(t,n)),r.show())}),u},r.prototype.handleKeyup=function(n){var e=this,r,f,t;i.contains([o.code.ENTER,o.code.UP,o.code.DOWN],n.keyCode)||(r=this.context.invoke("editor.createRange").getWordRange(),f=r.toString(),this.hints.length&&f?(this.$content.empty(),t=u.rect2bnd(i.last(r.getClientRects())),t&&(this.$popover.hide(),this.lastWordRange=r,this.hints.forEach(function(n,t){n.match.test(f)&&e.createGroup(t,f).appendTo(e.$content)}),this.$content.find(".note-hint-item:first").addClass("active"),this.direction==="top"?this.$popover.css({left:t.left,top:t.top-this.$popover.outerHeight()-cr}):this.$popover.css({left:t.left,top:t.top+t.height+cr}))):this.hide())},r.prototype.show=function(){this.$popover.show()},r.prototype.hide=function(){this.$popover.hide()},r}(),bs=function(){function r(t,i){this.ui=n.summernote.ui;this.$note=t;this.memos={};this.modules={};this.layoutInfo={};this.options=i;this.initialize()}return r.prototype.initialize=function(){return this.layoutInfo=this.ui.createLayout(this.$note,this.options),this._initialize(),this.$note.hide(),this},r.prototype.destroy=function(){this._destroy();this.$note.removeData("summernote");this.ui.removeLayout(this.$note,this.layoutInfo)},r.prototype.reset=function(){var n=this.isDisabled();this.code(t.emptyPara);this._destroy();this._initialize();n&&this.disable()},r.prototype._initialize=function(){var t=this,r=n.extend({},this.options.buttons),i;Object.keys(r).forEach(function(n){t.memo("button."+n,r[n])});i=n.extend({},this.options.modules,n.summernote.plugins||{});Object.keys(i).forEach(function(n){t.module(n,i[n],!0)});Object.keys(this.modules).forEach(function(n){t.initializeModule(n)})},r.prototype._destroy=function(){var n=this;Object.keys(this.modules).reverse().forEach(function(t){n.removeModule(t)});Object.keys(this.memos).forEach(function(t){n.removeMemo(t)});this.triggerEvent("destroy",this)},r.prototype.code=function(n){var t=this.invoke("codeview.isActivated");if(n===undefined)return this.invoke("codeview.sync"),t?this.layoutInfo.codable.val():this.layoutInfo.editable.html();t?this.layoutInfo.codable.val(n):this.layoutInfo.editable.html(n);this.$note.val(n);this.triggerEvent("change",n)},r.prototype.isDisabled=function(){return this.layoutInfo.editable.attr("contenteditable")==="false"},r.prototype.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0);this.invoke("toolbar.activate",!0);this.triggerEvent("disable",!1)},r.prototype.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate");this.layoutInfo.editable.attr("contenteditable",!1);this.invoke("toolbar.deactivate",!0);this.triggerEvent("disable",!0)},r.prototype.triggerEvent=function(){var n=i.head(arguments),t=i.tail(i.from(arguments)),r=this.options.callbacks[u.namespaceToCamel(n,"on")];r&&r.apply(this.$note[0],t);this.$note.trigger("summernote."+n,t)},r.prototype.initializeModule=function(n){var i=this.modules[n];(i.shouldInitialize=i.shouldInitialize||u.ok,i.shouldInitialize())&&(i.initialize&&i.initialize(),i.events&&t.attachEvents(this.$note,i.events))},r.prototype.module=function(n,t,i){if(arguments.length===1)return this.modules[n];this.modules[n]=new t(this);i||this.initializeModule(n)},r.prototype.removeModule=function(n){var i=this.modules[n];i.shouldInitialize()&&(i.events&&t.detachEvents(this.$note,i.events),i.destroy&&i.destroy());delete this.modules[n]},r.prototype.memo=function(n,t){if(arguments.length===1)return this.memos[n];this.memos[n]=t},r.prototype.removeMemo=function(n){this.memos[n]&&this.memos[n].destroy&&this.memos[n].destroy();delete this.memos[n]},r.prototype.createInvokeHandlerAndUpdateState=function(n,t){var i=this;return function(r){i.createInvokeHandler(n,t)(r);i.invoke("buttons.updateCurrentStyle")}},r.prototype.createInvokeHandler=function(t,i){var r=this;return function(u){u.preventDefault();var f=n(u.target);r.invoke(t,i||f.closest("[data-value]").data("value"),f)}},r.prototype.invoke=function(){var o=i.head(arguments),u=i.tail(i.from(arguments)),t=o.split("."),f=t.length>1,e=f&&i.head(t),r=f?i.last(t):i.head(t),n=this.modules[e||"editor"];return!e&&this[r]?this[r].apply(this,u):n&&n[r]&&n.shouldInitialize()?n[r].apply(n,u):void 0},r}();n.fn.extend({summernote:function(){var f=n.type(i.head(arguments)),o=f==="string",s=f==="object",t=n.extend({},n.summernote.options,s?i.head(arguments):{}),u,r;if(t.langInfo=n.extend(!0,{},n.summernote.lang["en-US"],n.summernote.lang[t.lang]),t.icons=n.extend(!0,{},n.summernote.options.icons,t.icons),t.tooltip=t.tooltip==="auto"?!e.isSupportTouch:t.tooltip,this.each(function(i,r){var u=n(r),f;u.data("summernote")||(f=new bs(u,t),u.data("summernote",f),u.data("summernote").triggerEvent("init",f.layoutInfo))}),u=this.first(),u.length){if(r=u.data("summernote"),o)return r.invoke.apply(r,i.from(arguments));t.focus&&r.invoke("editor.focus")}return this}});n.summernote=n.extend(n.summernote,{version:"0.8.9",ui:l,dom:t,plugins:{},options:{modules:{editor:ao,clipboard:vo,dropzone:yo,codeview:po,statusbar:bo,fullscreen:ko,handle:go,hintPopover:ws,autoLink:is,autoSync:rs,placeholder:us,buttons:fs,toolbar:es,linkDialog:os,linkPopover:ss,imageDialog:hs,imagePopover:cs,tablePopover:ls,videoDialog:as,helpDialog:vs,airPopover:ps},buttons:{},lang:"en-US",followingToolbar:!0,otherStaticBar:"",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:!0,popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,linkTargetBlank:!0,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,hintDirection:"bottom",tooltip:"auto",container:"body",maxTextLength:0,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onBlurCodeview:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})});!function(n){function r(){return new Date(Date.UTC.apply(Date,arguments))}function c(t,i){var u,f=n(t).data(),e={},o=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase()),r;for(r in f)i.test(r)&&(u=r.replace(o,function(n,t){return t.toLowerCase()}),e[u]=f[r]);return e}function l(t){var u={},r;if(i[t]||(t=t.split("-")[0],i[t]))return r=i[t],n.each(h,function(n,t){t in r&&(u[t]=r[t])}),u}var e=n(window),u=function(i,r){this._process_options(r);this.element=n(i);this.isInline=!1;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1;this.hasInput=this.component&&this.element.find("input").length;this.component&&0===this.component.length&&(this.component=!1);this.picker=n(t.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right"));this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(n,t){return parseInt(t)+1});this._allow_update=!1;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()},o,s,f,h,i,t;u.prototype={constructor:u,_process_options:function(r){var u,o,h,e,s;this._o=n.extend({},this._o,r);u=this.o=n.extend({},this._o);o=u.language;switch(i[o]||(o=o.split("-")[0],i[o]||(o=f.language)),u.language=o,u.startView){case 2:case"decade":u.startView=2;break;case 1:case"year":u.startView=1;break;default:u.startView=0}switch(u.minViewMode){case 1:case"months":u.minViewMode=1;break;case 2:case"years":u.minViewMode=2;break;default:u.minViewMode=0}if(u.startView=Math.max(u.startView,u.minViewMode),u.weekStart%=7,u.weekEnd=(u.weekStart+6)%7,h=t.parseFormat(u.format),u.startDate!==-1/0&&(u.startDate=u.startDate?u.startDate instanceof Date?this._local_to_utc(this._zero_time(u.startDate)):t.parseDate(u.startDate,h,u.language):-1/0),1/0!==u.endDate&&(u.endDate=u.endDate?u.endDate instanceof Date?this._local_to_utc(this._zero_time(u.endDate)):t.parseDate(u.endDate,h,u.language):1/0),u.daysOfWeekDisabled=u.daysOfWeekDisabled||[],n.isArray(u.daysOfWeekDisabled)||(u.daysOfWeekDisabled=u.daysOfWeekDisabled.split(/[,\s]*/)),u.daysOfWeekDisabled=n.map(u.daysOfWeekDisabled,function(n){return parseInt(n,10)}),e=String(u.orientation).toLowerCase().split(/\s+/g),s=u.orientation.toLowerCase(),e=n.grep(e,function(n){return/^auto|left|right|top|bottom$/.test(n)}),u.orientation={x:"auto",y:"auto"},s&&"auto"!==s)if(1===e.length)switch(e[0]){case"top":case"bottom":u.orientation.y=e[0];break;case"left":case"right":u.orientation.x=e[0]}else s=n.grep(e,function(n){return/^left|right$/.test(n)}),u.orientation.x=s[0]||"auto",s=n.grep(e,function(n){return/^top|bottom$/.test(n)}),u.orientation.y=s[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(n){for(var i,r,t=0;t<n.length;t++)i=n[t][0],r=n[t][1],i.on(r)},_unapplyEvents:function(n){for(var i,r,t=0;t<n.length;t++)i=n[t][0],r=n[t][1],i.off(r)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:n.proxy(this.show,this),keyup:n.proxy(this.update,this),keydown:n.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:n.proxy(this.show,this),keyup:n.proxy(this.update,this),keydown:n.proxy(this.keydown,this)}],[this.component,{click:n.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:n.proxy(this.show,this)}]];this._secondaryEvents=[[this.picker,{click:n.proxy(this.click,this)}],[n(window),{resize:n.proxy(this.place,this)}],[n(document),{mousedown:n.proxy(function(n){this.element.is(n.target)||this.element.find(n.target).length||this.picker.is(n.target)||this.picker.find(n.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(i,r){var u=r||this.date,f=this._utc_to_local(u);this.element.trigger({type:i,date:f,format:n.proxy(function(n){var i=n||this.o.format;return t.formatDate(u,i,this.o.language)},this)})},show:function(n){this.isInline||this.picker.appendTo("body");this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();n&&n.preventDefault();this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date},_utc_to_local:function(n){return new Date(n.getTime()+6e4*n.getTimezoneOffset())},_local_to_utc:function(n){return new Date(n.getTime()-6e4*n.getTimezoneOffset())},_zero_time:function(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())},_zero_utc_time:function(n){return new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()))},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return this.date},setDate:function(n){this.setUTCDate(this._local_to_utc(n))},setUTCDate:function(n){this.date=n;this.setValue()},setValue:function(){var n=this.getFormattedDate();this.isInput?this.element.val(n).change():this.component&&this.element.find("input").val(n).change()},getFormattedDate:function(n){return void 0===n&&(n=this.o.format),t.formatDate(this.date,n,this.o.language)},setStartDate:function(n){this._process_options({startDate:n});this.update();this.updateNavArrows()},setEndDate:function(n){this._process_options({endDate:n});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(n){this._process_options({daysOfWeekDisabled:n});this.update();this.updateNavArrows()},place:function(){var v,s,i;if(!this.isInline){var u=this.picker.outerWidth(),f=this.picker.outerHeight(),h=10,c=e.width(),y=e.height(),l=e.scrollTop(),p=parseInt(this.element.parents().filter(function(){return"auto"!=n(this).css("z-index")}).first().css("z-index"))+10,t=this.component?this.component.parent().offset():this.element.offset(),a=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),w=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),r=t.left,o=t.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(r-=u-w)):(this.picker.addClass("datepicker-orient-left"),t.left<0?r-=t.left-h:t.left+u>c&&(r=c-u-h));i=this.o.orientation.y;"auto"===i&&(v=-l+t.top-f,s=l+y-(t.top+a+f),i=Math.max(v,s)===s?"top":"bottom");this.picker.addClass("datepicker-orient-"+i);"top"===i?o+=a:o-=f+parseInt(this.picker.css("padding-top"));this.picker.css({top:o,left:r,zIndex:p})}},_allow_update:!0,update:function(){if(this._allow_update){var n,r=new Date(this.date),i=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(n=arguments[0],n instanceof Date&&(n=this._local_to_utc(n)),i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date);this.date=t.parseDate(n,this.o.format,this.o.language);i?this.setValue():n?r.getTime()!==this.date.getTime()&&this._trigger("changeDate"):this._trigger("clearDate");this.date<this.o.startDate?(this.viewDate=new Date(this.o.startDate),this.date=new Date(this.o.startDate)):this.date>this.o.endDate?(this.viewDate=new Date(this.o.endDate),this.date=new Date(this.o.endDate)):(this.viewDate=new Date(this.date),this.date=new Date(this.date));this.fill()}},fillDow:function(){var r=this.o.weekStart,n="<tr>",t;for(this.o.calendarWeeks&&(t='<th class="cw">&nbsp;<\/th>',n+=t,this.picker.find(".datepicker-days thead tr:first-child").prepend(t));r<this.o.weekStart+7;)n+='<th class="dow">'+i[this.o.language].daysMin[r++%7]+"<\/th>";n+="<\/tr>";this.picker.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var n="",t=0;12>t;)n+='<span class="month">'+i[this.o.language].monthsShort[t++]+"<\/span>";this.picker.find(".datepicker-months td").html(n)},setRange:function(t){t&&t.length?this.range=n.map(t,function(n){return n.valueOf()}):delete this.range;this.fill()},getClassNames:function(t){var i=[],r=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),e=this.date.valueOf(),u=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()==r&&t.getUTCMonth()<f?i.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()==r&&t.getUTCMonth()>f)&&i.push("new"),this.o.todayHighlight&&t.getUTCFullYear()==u.getFullYear()&&t.getUTCMonth()==u.getMonth()&&t.getUTCDate()==u.getDate()&&i.push("today"),e&&t.valueOf()==e&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||-1!==n.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),-1!=n.inArray(t.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var v,k=new Date(this.viewDate),u=k.getUTCFullYear(),d=k.getUTCMonth(),y=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,it=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,p=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,rt=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0,f,w,h,s,o,e,a,c,tt,l;for(this.date&&this.date.valueOf(),this.picker.find(".datepicker-days thead th.datepicker-switch").text(i[this.o.language].months[d]+" "+u),this.picker.find("tfoot th.today").text(i[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(i[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths(),f=r(u,d-1,28,0,0,0,0),w=t.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth()),f.setUTCDate(w),f.setUTCDate(w-(f.getUTCDay()-this.o.weekStart+7)%7),h=new Date(f),h.setUTCDate(h.getUTCDate()+42),h=h.valueOf(),o=[];f.valueOf()<h;){if(f.getUTCDay()==this.o.weekStart&&(o.push("<tr>"),this.o.calendarWeeks)){var g=new Date(+f+864e5*((this.o.weekStart-f.getUTCDay()-7)%7)),nt=new Date(+g+864e5*((11-g.getUTCDay())%7)),b=new Date(+(b=r(nt.getUTCFullYear(),0,1))+864e5*((11-b.getUTCDay())%7)),ut=(nt-b)/6048e5+1;o.push('<td class="cw">'+ut+"<\/td>")}(s=this.getClassNames(f),s.push("day"),this.o.beforeShowDay!==n.noop)&&(e=this.o.beforeShowDay(this._utc_to_local(f)),void 0===e?e={}:"boolean"==typeof e?e={enabled:e}:"string"==typeof e&&(e={classes:e}),e.enabled===!1&&s.push("disabled"),e.classes&&(s=s.concat(e.classes.split(/\s+/))),e.tooltip&&(v=e.tooltip));s=n.unique(s);o.push('<td class="'+s.join(" ")+'"'+(v?' title="'+v+'"':"")+">"+f.getUTCDate()+"<\/td>");f.getUTCDay()==this.o.weekEnd&&o.push("<\/tr>");f.setUTCDate(f.getUTCDate()+1)}for(this.picker.find(".datepicker-days tbody").empty().append(o.join("")),a=this.date&&this.date.getUTCFullYear(),c=this.picker.find(".datepicker-months").find("th:eq(1)").text(u).end().find("span").removeClass("active"),a&&a==u&&c.eq(this.date.getUTCMonth()).addClass("active"),(y>u||u>p)&&c.addClass("disabled"),u==y&&c.slice(0,it).addClass("disabled"),u==p&&c.slice(rt+1).addClass("disabled"),o="",u=10*parseInt(u/10,10),tt=this.picker.find(".datepicker-years").find("th:eq(1)").text(u+"-"+(u+9)).end().find("td"),u-=1,l=-1;11>l;l++)o+='<span class="year'+(-1==l?" old":10==l?" new":"")+(a==u?" active":"")+(y>u||u>p?" disabled":"")+'">'+u+"<\/span>",u+=1;tt.html(o)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),n=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&n<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});1/0!==this.o.endDate&&n>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-1/0&&n<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});1/0!==this.o.endDate&&n>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(i){var u,c,o,l,h;if(i.preventDefault(),u=n(i.target).closest("span, td, th"),1==u.length)switch(u[0].nodeName.toLowerCase()){case"th":switch(u[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":c=t.modes[this.viewMode].navStep*("prev"==u[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,c);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,c);1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":o=new Date;o=r(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0);this.showMode(-2);l="linked"==this.o.todayBtn?null:"view";this._setDate(o,l);break;case"clear":this.isInput?h=this.element:this.component&&(h=this.element.find("input"));h&&h.val("").change();this._trigger("changeDate");this.update();this.o.autoclose&&this.hide()}break;case"span":if(!u.is(".disabled")){if(this.viewDate.setUTCDate(1),u.is(".month")){var s=1,f=u.parent().find("span").index(u),e=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(f);this._trigger("changeMonth",this.viewDate);1===this.o.minViewMode&&this._setDate(r(e,f,s,0,0,0,0))}else{var e=parseInt(u.text(),10)||0,s=1,f=0;this.viewDate.setUTCFullYear(e);this._trigger("changeYear",this.viewDate);2===this.o.minViewMode&&this._setDate(r(e,f,s,0,0,0,0))}this.showMode(-1);this.fill()}break;case"td":if(u.is(".day")&&!u.is(".disabled")){var s=parseInt(u.text(),10)||1,e=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth();u.is(".old")?0===f?(f=11,e-=1):f-=1:u.is(".new")&&(11==f?(f=0,e+=1):f+=1);this._setDate(r(e,f,s,0,0,0,0))}}},_setDate:function(n,t){t&&"date"!=t||(this.date=new Date(n));t&&"view"!=t||(this.viewDate=new Date(n));this.fill();this.setValue();this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input"));i&&i.change();!this.o.autoclose||t&&"date"!=t||this.hide()},moveMonth:function(n,t){var f;if(!t)return n;var r,u,i=new Date(n.valueOf()),e=i.getUTCDate(),o=i.getUTCMonth(),s=Math.abs(t);if(t=t>0?1:-1,1==s)u=-1==t?function(){return i.getUTCMonth()==o}:function(){return i.getUTCMonth()!=r},r=o+t,i.setUTCMonth(r),(0>r||r>11)&&(r=(r+12)%12);else{for(f=0;s>f;f++)i=this.moveMonth(i,t);r=i.getUTCMonth();i.setUTCDate(e);u=function(){return r!=i.getUTCMonth()}}for(;u();)i.setUTCDate(--e),i.setUTCMonth(r);return i},moveYear:function(n,t){return this.moveMonth(n,12*t)},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(n){var t,i,r,u,f;if(this.picker.is(":not(:visible)"))return 27==n.keyCode&&this.show(),void 0;u=!1;switch(n.keyCode){case 27:this.hide();n.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37==n.keyCode?-1:1;n.ctrlKey?(i=this.moveYear(this.date,t),r=this.moveYear(this.viewDate,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveMonth(this.date,t),r=this.moveMonth(this.viewDate,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+t),r=new Date(this.viewDate),r.setUTCDate(this.viewDate.getUTCDate()+t));this.dateWithinRange(i)&&(this.date=i,this.viewDate=r,this.setValue(),this.update(),n.preventDefault(),u=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38==n.keyCode?-1:1;n.ctrlKey?(i=this.moveYear(this.date,t),r=this.moveYear(this.viewDate,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveMonth(this.date,t),r=this.moveMonth(this.viewDate,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+7*t),r=new Date(this.viewDate),r.setUTCDate(this.viewDate.getUTCDate()+7*t));this.dateWithinRange(i)&&(this.date=i,this.viewDate=r,this.setValue(),this.update(),n.preventDefault(),u=!0);break;case 13:this.hide();n.preventDefault();break;case 9:this.hide()}u&&(this._trigger("changeDate"),this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change())},showMode:function(n){n&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+n)));this.picker.find(">div").hide().filter(".datepicker-"+t.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};o=function(t,i){this.element=n(t);this.inputs=n.map(i.inputs,function(n){return n.jquery?n[0]:n});delete i.inputs;n(this.inputs).datepicker(i).bind("changeDate",n.proxy(this.dateUpdated,this));this.pickers=n.map(this.inputs,function(t){return n(t).data("datepicker")});this.updateDates()};o.prototype={updateDates:function(){this.dates=n.map(this.pickers,function(n){return n.date});this.updateRanges()},updateRanges:function(){var t=n.map(this.dates,function(n){return n.valueOf()});n.each(this.pickers,function(n,i){i.setRange(t)})},dateUpdated:function(t){var u=n(t.target).data("datepicker"),r=u.getUTCDate(),i=n.inArray(t.target,this.inputs),f=this.inputs.length;if(-1!=i){if(r<this.dates[i])for(;i>=0&&r<this.dates[i];)this.pickers[i--].setUTCDate(r);else if(r>this.dates[i])for(;f>i&&r>this.dates[i];)this.pickers[i++].setUTCDate(r);this.updateDates()}},remove:function(){n.map(this.pickers,function(n){n.remove()});delete this.element.data().datepicker}};s=n.fn.datepicker;n.fn.datepicker=function(t){var r=Array.apply(null,arguments),i;return r.shift(),this.each(function(){var s=n(this),e=s.data("datepicker"),a="object"==typeof t&&t,y;if(!e){var v=c(this,"date"),p=n.extend({},f,v,a),w=l(p.language),h=n.extend({},f,w,v,a);s.is(".input-daterange")||h.inputs?(y={inputs:h.inputs||s.find("input").toArray()},s.data("datepicker",e=new o(this,n.extend(h,y)))):s.data("datepicker",e=new u(this,h))}if("string"==typeof t&&"function"==typeof e[t]&&(i=e[t].apply(e,r),void 0!==i))return!1}),void 0!==i?i:this};f=n.fn.datepicker.defaults={autoclose:!1,beforeShowDay:n.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0};h=n.fn.datepicker.locale_opts=["format","rtl","weekStart"];n.fn.datepicker.Constructor=u;i=n.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};t={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return 0==n%4&&0!=n%100||0==n%400},getDaysInMonth:function(n,i){return[31,t.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][i]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(n){var t=n.replace(this.validParts,"\0").split("\0"),i=n.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(f,e,o){var a,v,g,h,l,nt,k,p,s;if(f instanceof Date)return f;if("string"==typeof e&&(e=t.parseFormat(e)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(f)){for(g=/([\-+]\d+)([dmwy])/,h=f.match(/([\-+]\d+)([dmwy])/g),f=new Date,s=0;s<h.length;s++)switch(a=g.exec(h[s]),v=parseInt(a[1]),a[2]){case"d":f.setUTCDate(f.getUTCDate()+v);break;case"m":f=u.prototype.moveMonth.call(u.prototype,f,v);break;case"w":f.setUTCDate(f.getUTCDate()+7*v);break;case"y":f=u.prototype.moveYear.call(u.prototype,f,v)}return r(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),0,0,0)}var y,w,a,h=f&&f.match(this.nonpunctuation)||[],f=new Date,b={},d=["yyyy","yy","M","MM","m","mm","d","dd"],c={yyyy:function(n,t){return n.setUTCFullYear(t)},yy:function(n,t){return n.setUTCFullYear(2e3+t)},m:function(n,t){if(isNaN(n))return n;for(t-=1;0>t;)t+=12;for(t%=12,n.setUTCMonth(t);n.getUTCMonth()!=t;)n.setUTCDate(n.getUTCDate()-1);return n},d:function(n,t){return n.setUTCDate(t)}};if(c.M=c.MM=c.mm=c.m,c.dd=c.d,f=r(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0),l=e.parts.slice(),h.length!=l.length&&(l=n(l).filter(function(t,i){return-1!==n.inArray(i,d)}).toArray()),h.length==l.length){for(s=0,nt=l.length;nt>s;s++){if(y=parseInt(h[s],10),a=l[s],isNaN(y))switch(a){case"MM":w=n(i[o].months).filter(function(){var n=this.slice(0,h[s].length),t=h[s].slice(0,n.length);return n==t});y=n.inArray(w[0],i[o].months)+1;break;case"M":w=n(i[o].monthsShort).filter(function(){var n=this.slice(0,h[s].length),t=h[s].slice(0,n.length);return n==t});y=n.inArray(w[0],i[o].monthsShort)+1}b[a]=y}for(s=0;s<d.length;s++)p=d[s],p in b&&!isNaN(b[p])&&(k=new Date(f),c[p](k,b[p]),isNaN(k)||(f=k))}return f},formatDate:function(r,u,f){var e;"string"==typeof u&&(u=t.parseFormat(u));e={d:r.getUTCDate(),D:i[f].daysShort[r.getUTCDay()],DD:i[f].days[r.getUTCDay()],m:r.getUTCMonth()+1,M:i[f].monthsShort[r.getUTCMonth()],MM:i[f].months[r.getUTCMonth()],yy:r.getUTCFullYear().toString().substring(2),yyyy:r.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d;e.mm=(e.m<10?"0":"")+e.m;for(var r=[],s=n.extend([],u.separators),o=0,h=u.parts.length;h>=o;o++)s.length&&r.push(s.shift()),r.push(e[u.parts[o]]);return r.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;<\/th><th colspan="5" class="datepicker-switch"><\/th><th class="next">&raquo;<\/th><\/tr><\/thead>',contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"><\/th><\/tr><tr><th colspan="7" class="clear"><\/th><\/tr><\/tfoot>'};t.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+t.headTemplate+"<tbody><\/tbody>"+t.footTemplate+'<\/table><\/div><div class="datepicker-months"><table class="table-condensed">'+t.headTemplate+t.contTemplate+t.footTemplate+'<\/table><\/div><div class="datepicker-years"><table class="table-condensed">'+t.headTemplate+t.contTemplate+t.footTemplate+"<\/table><\/div><\/div>";n.fn.datepicker.DPGlobal=t;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=s,this};n(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=n(this);i.data("datepicker")||(t.preventDefault(),i.datepicker("show"))});n(function(){n('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery);!function(n,t){"use strict";function y(n){function i(i){return t.identifier&&i[t.identifier]===n[t.identifier]}var t=this;return this.rows.contains(i)?!1:(this.rows.push(n),!0)}function s(t){var i=this.footer?this.footer.find(t):n(),r=this.header?this.header.find(t):n();return n.merge(i,r)}function r(t){return t?n.extend({},this.cachedParams,{ctx:t}):this.cachedParams}function d(){var i={current:this.current,rowCount:this.rowCount,sort:this.sortDictionary,searchPhrase:this.searchPhrase},t=this.options.post;return t=n.isFunction(t)?t():t,this.options.requestHandler(n.extend(!0,i,t))}function u(t){return"."+n.trim(t).replace(/\s+/gm,".")}function g(){var t=this.options.url;return n.isFunction(t)?t():t}function nt(){this.element.trigger("initialize"+i);it.call(this);this.selection=this.options.selection&&null!=this.identifier;rt.call(this);ut.call(this);v.call(this);at.call(this);ft.call(this);e.call(this);this.element.trigger("initialized"+i)}function tt(){this.options.highlightRows}function a(n){return n.visible}function it(){var t=this,r=this.element.find("thead > tr").first(),i=!1;r.children().each(function(){var f=n(this),r=f.data(),u={id:r.columnId,identifier:null==t.identifier&&r.identifier||!1,converter:t.options.converters[r.converter||r.type]||t.options.converters.string,text:f.text(),align:r.align||"left",headerAlign:r.headerAlign||"left",cssClass:r.cssClass||"",headerCssClass:r.headerCssClass||"",formatter:t.options.formatters[r.formatter]||null,order:i||"asc"!==r.order&&"desc"!==r.order?null:r.order,searchable:!(r.searchable===!1),sortable:!(r.sortable===!1),visible:!(r.visible===!1),visibleInSelection:!(r.visibleInSelection===!1),width:n.isNumeric(r.width)?r.width+"px":"string"==typeof r.width?r.width:null};t.columns.push(u);null!=u.order&&(t.sortDictionary[u.id]=u.order);u.identifier&&(t.identifier=u.id,t.converter=u.converter);t.options.multiSort||null===u.order||(i=!0)})}function e(){function c(n){for(var t,u=new RegExp(r.searchPhrase,r.options.caseSensitive?"g":"gi"),i=0;i<r.columns.length;i++)if(t=r.columns[i],t.searchable&&t.visible&&t.converter.to(n[t.id]).search(u)>-1)return!0;return!1}function o(n,t){r.currentRows=n;p.call(r,t);r.options.keepSelection||(r.selectedRows=[]);ct.call(r,n);ot.call(r);st.call(r);r.element._bgBusyAria(!1).trigger("loaded"+i)}var r=this,s,u,e,f,h;if(this.element._bgBusyAria(!0).trigger("load"+i),yt.call(this),this.options.ajax){if(s=d.call(this),u=g.call(this),null==u||"string"!=typeof u||0===u.length)throw new Error("Url setting must be a none empty string or a function that returns one.");this.xqr&&this.xqr.abort();e={url:u,data:s,success:function(t){r.xqr=null;"string"==typeof t&&(t=n.parseJSON(t));t=r.options.responseHandler(t);r.current=t.current;o(t.rows,t.total)},error:function(n,t){r.xqr=null;"abort"!==t&&(w.call(r),r.element._bgBusyAria(!1).trigger("loaded"+i))}};e=n.extend(this.options.ajaxSettings,e);this.xqr=n.ajax(e)}else f=this.searchPhrase.length>0?this.rows.where(c):this.rows,h=f.length,-1!==this.rowCount&&(f=f.page(this.current,this.rowCount)),t.setTimeout(function(){o(f,h)},10)}function rt(){if(!this.options.ajax){var t=this,i=this.element.find("tbody > tr");i.each(function(){var r=n(this),u=r.children("td"),i={};n.each(t.columns,function(n,t){i[t.id]=t.converter.from(u.eq(n).text())});y.call(t,i)});p.call(this,this.rows.length);l.call(this)}}function p(n){this.total=n;this.totalPages=-1===this.rowCount?1:Math.ceil(this.total/this.rowCount)}function ut(){var t=this.options.templates,i=this.element.parent().hasClass(this.options.css.responsiveTable)?this.element.parent():this.element;this.element.addClass(this.options.css.table);0===this.element.children("tbody").length&&this.element.append(t.body);1&this.options.navigation&&(this.header=n(t.header.resolve(r.call(this,{id:this.element._bgId()+"-header"}))),i.before(this.header));2&this.options.navigation&&(this.footer=n(t.footer.resolve(r.call(this,{id:this.element._bgId()+"-footer"}))),i.after(this.footer))}function ft(){var a,v;if(0!==this.options.navigation){var o=this.options.css,y=u(o.actions),h=s.call(this,y);if(h.length>0){var l=this,f=this.options.templates,t=n(f.actions.resolve(r.call(this)));this.options.ajax&&(a=f.icon.resolve(r.call(this,{iconCss:o.iconRefresh})),v=n(f.actionButton.resolve(r.call(this,{content:a,text:this.options.labels.refresh}))).on("click"+i,function(n){n.stopPropagation();l.current=1;e.call(l)}),t.append(v));ht.call(this,t);et.call(this,t);c.call(this,h,t)}}}function et(t){if(this.options.columnSelection&&this.columns.length>1){var f=this,o=this.options.css,s=this.options.templates,y=s.icon.resolve(r.call(this,{iconCss:o.iconColumns})),c=n(s.actionDropDown.resolve(r.call(this,{content:y}))),l=u(o.dropDownItem),h=u(o.dropDownItemCheckbox),p=u(o.dropDownMenuItems);n.each(this.columns,function(t,y){if(y.visibleInSelection){var w=n(s.actionDropDownCheckboxItem.resolve(r.call(f,{name:y.id,label:y.text,checked:y.visible}))).on("click"+i,l,function(t){var i,r,u;t.stopPropagation();i=n(this);r=i.find(h);r.prop("disabled")||(y.visible=r.prop("checked"),u=f.columns.where(a).length>1,i.parents(p).find(l+":has("+h+":checked)")._bgEnableAria(u).find(h)._bgEnableField(u),f.element.find("tbody").empty(),v.call(f),e.call(f))});c.find(u(o.dropDownMenuItems)).append(w)}});t.append(c)}}function ot(){var f,i,t,e;0!==this.options.navigation&&(f=u(this.options.css.infos),i=s.call(this,f),i.length>0&&(t=this.current*this.rowCount,e=n(this.options.templates.infos.resolve(r.call(this,{end:0===this.total||-1===t||t>this.total?this.total:t,start:0===this.total?0:t-this.rowCount+1,total:this.total}))),c.call(this,i,e)))}function w(){var t=this.element.children("tbody").first(),i=this.options.templates,n=this.columns.where(a).length;this.selection&&(n+=1);t.html(i.noResults.resolve(r.call(this,{columns:n})))}function st(){var a,l,h,e;if(0!==this.options.navigation&&(a=u(this.options.css.pagination),l=s.call(this,a)._bgShowAria(-1!==this.rowCount),-1!==this.rowCount&&l.length>0)){var b=this.options.templates,t=this.current,f=this.totalPages,i=n(b.pagination.resolve(r.call(this))),v=f-t,y=-1*(this.options.padding-t),k=v>=this.options.padding?Math.max(y,1):Math.max(y-this.options.padding+v,1),p=2*this.options.padding+1,w=f>=p?p:f;for(o.call(this,i,"first","&laquo;","first")._bgEnableAria(t>1),o.call(this,i,"prev","&lt;","prev")._bgEnableAria(t>1),h=0;w>h;h++)e=h+k,o.call(this,i,e,e,"page-"+e)._bgEnableAria()._bgSelectAria(e===t);0===w&&o.call(this,i,1,1,"page-1")._bgEnableAria(!1)._bgSelectAria();o.call(this,i,"next","&gt;","next")._bgEnableAria(f>t);o.call(this,i,"last","&raquo;","last")._bgEnableAria(f>t);c.call(this,l,i)}}function o(t,f,o,s){var h=this,l=this.options.templates,a=this.options.css,v=r.call(this,{css:s,text:o,page:f}),c=n(l.paginationItem.resolve(v)).on("click"+i,u(a.paginationButton),function(t){var i,r,f,u;t.stopPropagation();t.preventDefault();i=n(this);r=i.parent();r.hasClass("active")||r.hasClass("disabled")||(f={first:1,prev:h.current-1,next:h.current+1,last:h.totalPages},u=i.data("page"),h.current=f[u]||u,e.call(h));i.trigger("blur")});return t.append(c),c}function ht(t){function s(n){return-1===n?f.options.labels.all:n}var f=this,h=this.options.rowCount;if(n.isArray(h)){var o=this.options.css,c=this.options.templates,l=n(c.actionDropDown.resolve(r.call(this,{content:s(this.rowCount)}))),y=u(o.dropDownMenu),p=u(o.dropDownMenuText),a=u(o.dropDownMenuItems),v=u(o.dropDownItemButton);n.each(h,function(t,u){var o=n(c.actionDropDownItem.resolve(r.call(f,{text:s(u),action:u})))._bgSelectAria(u===f.rowCount).on("click"+i,v,function(t){t.preventDefault();var r=n(this),i=r.data("action");i!==f.rowCount&&(f.current=1,f.rowCount=i,r.parents(a).children().each(function(){var t=n(this),r=t.find(v).data("action");t._bgSelectAria(r===i)}),r.parents(y).find(p).text(s(i)),e.call(f))});l.find(a).append(o)});t.append(l)}}function ct(t){if(t.length>0){var i=this,f=this.options.css,e=this.options.templates,s=this.element.children("tbody").first(),o=!0,h="";n.each(t,function(t,u){var l="",a=' data-row-id="'+(null==i.identifier?t:u[i.identifier])+'"',s="",c,y,v;i.selection&&(c=-1!==n.inArray(u[i.identifier],i.selectedRows),y=e.select.resolve(r.call(i,{type:"checkbox",value:u[i.identifier],checked:c})),l+=e.cell.resolve(r.call(i,{content:y,css:f.selectCell})),o=o&&c,c&&(s+=f.selected,a+=' aria-selected="true"'));v=null!=u.status&&i.options.statusMapping[u.status];v&&(s+=v);n.each(i.columns,function(t,o){if(o.visible){var s=n.isFunction(o.formatter)?o.formatter.call(i,o,u):o.converter.to(u[o.id]),h=o.cssClass.length>0?" "+o.cssClass:"";l+=e.cell.resolve(r.call(i,{content:null==s||""===s?"&nbsp;":s,css:("right"===o.align?f.right:"center"===o.align?f.center:f.left)+h,style:null==o.width?"":"width:"+o.width+";"}))}});s.length>0&&(a+=' class="'+s+'"');h+=e.row.resolve(r.call(i,{attr:a,cells:l}))});i.element.find("thead "+u(i.options.css.selectBox)).prop("checked",o);s.html(h);lt.call(this,s)}else w.call(this)}function lt(t){var r=this,f=u(this.options.css.selectBox);this.selection&&t.off("click"+i,f).on("click"+i,f,function(t){t.stopPropagation();var i=n(this),u=r.converter.from(i.val());i.prop("checked")?r.select([u]):r.deselect([u])});t.off("click"+i,"> tr").on("click"+i,"> tr",function(t){t.stopPropagation();var f=n(this),u=null==r.identifier?f.data("row-id"):r.converter.from(f.data("row-id")+""),e=null==r.identifier?r.currentRows[u]:r.currentRows.first(function(n){return n[r.identifier]===u});r.selection&&r.options.rowSelect&&(f.hasClass(r.options.css.selected)?r.deselect([u]):r.select([u]));r.element.trigger("click"+i,[r.columns,e])})}function at(){if(0!==this.options.navigation){var o=this.options.css,y=u(o.search),h=s.call(this,y);if(h.length>0){var e=this,p=this.options.templates,l=null,a="",v=u(o.searchField),f=n(p.search.resolve(r.call(this))),w=f.is(v)?f:f.find(v);w.on("keyup"+i,function(i){i.stopPropagation();var r=n(this).val();(a!==r||13===i.which&&""!==r)&&(a=r,(13===i.which||0===r.length||r.length>=e.options.searchSettings.characters)&&(t.clearTimeout(l),l=t.setTimeout(function(){b.call(e,r)},e.options.searchSettings.delay)))});c.call(this,h,f)}}}function b(n){this.searchPhrase!==n&&(this.current=1,this.searchPhrase=n,e.call(this))}function v(){var t=this,h=this.element.find("thead > tr"),f=this.options.css,o=this.options.templates,c="",s=this.options.sorting,y,a,v;if(this.selection&&(y=this.options.multiSelect?o.select.resolve(r.call(t,{type:"checkbox",value:"all"})):"",c+=o.rawHeaderCell.resolve(r.call(t,{content:y,css:f.selectCell}))),n.each(this.columns,function(n,i){if(i.visible){var u=t.sortDictionary[i.id],h=s&&u&&"asc"===u?f.iconUp:s&&u&&"desc"===u?f.iconDown:"",l=o.icon.resolve(r.call(t,{iconCss:h})),e=i.headerAlign,a=i.headerCssClass.length>0?" "+i.headerCssClass:"";c+=o.headerCell.resolve(r.call(t,{column:i,icon:l,sortable:s&&i.sortable&&f.sortable||"",css:("right"===e?f.right:"center"===e?f.center:f.left)+a,style:null==i.width?"":"width:"+i.width+";"}))}}),h.html(c),s){a=u(f.sortable);h.off("click"+i,a).on("click"+i,a,function(i){i.preventDefault();vt.call(t,n(this));l.call(t);e.call(t)})}if(this.selection&&this.options.multiSelect){v=u(f.selectBox);h.off("click"+i,v).on("click"+i,v,function(i){i.stopPropagation();n(this).prop("checked")?t.select():t.deselect()})}}function vt(n){var t=this.options.css,s=u(t.icon),i=n.data("column-id")||n.parents("th").first().data("column-id"),r=this.sortDictionary[i],f=n.find(s),o,e;if(this.options.multiSort||(n.parents("tr").first().find(s).removeClass(t.iconDown+" "+t.iconUp),this.sortDictionary={}),r&&"asc"===r)this.sortDictionary[i]="desc",f.removeClass(t.iconUp).addClass(t.iconDown);else if(r&&"desc"===r)if(this.options.multiSort){o={};for(e in this.sortDictionary)e!==i&&(o[e]=this.sortDictionary[e]);this.sortDictionary=o;f.removeClass(t.iconDown)}else this.sortDictionary[i]="asc",f.removeClass(t.iconDown).addClass(t.iconUp);else this.sortDictionary[i]="asc",f.addClass(t.iconUp)}function c(t,i){t.each(function(t,r){n(r).before(i.clone(!0)).remove()})}function yt(){var n=this;t.setTimeout(function(){if("true"===n.element._bgAria("busy")){var f=n.options.templates,e=n.element.children("thead").first(),t=n.element.children("tbody").first(),o=t.find("tr > td").first(),i=n.element.height()-e.height()-(o.height()+20),u=n.columns.where(a).length;n.selection&&(u+=1);t.html(f.loading.resolve(r.call(n,{columns:u})));-1!==n.rowCount&&i>0&&t.find("tr > td").css("padding","20px 0 "+i+"px")}},250)}function l(){function i(t,r,u){function e(n){return"asc"===f.order?n:-1*n}u=u||0;var o=u+1,f=n[u];return t[f.id]>r[f.id]?e(1):t[f.id]<r[f.id]?e(-1):n.length>o?i(t,r,o):0}var n=[],t;if(!this.options.ajax){for(t in this.sortDictionary)(this.options.multiSort||0===n.length)&&n.push({id:t,order:this.sortDictionary[t]});n.length>0&&this.rows.sort(i)}}var i=".rs.jquery.bootgrid",f=function(t,i){this.element=n(t);this.origin=this.element.clone();this.options=n.extend(!0,{},f.defaults,this.element.data(),i);var r=this.options.rowCount=this.element.data().rowCount||i.rowCount||this.options.rowCount;this.columns=[];this.current=1;this.currentRows=[];this.identifier=null;this.selection=!1;this.converter=null;this.rowCount=n.isArray(r)?r[0]:r;this.rows=[];this.searchPhrase="";this.selectedRows=[];this.sortDictionary={};this.total=0;this.totalPages=0;this.cachedParams={lbl:this.options.labels,css:this.options.css,ctx:{}};this.header=null;this.footer=null;this.xqr=null},h,k;(f.defaults={navigation:3,padding:2,columnSelection:!0,rowCount:[10,25,50,-1],selection:!1,multiSelect:!1,rowSelect:!1,keepSelection:!1,highlightRows:!1,sorting:!0,multiSort:!1,searchSettings:{delay:250,characters:1},ajax:!1,ajaxSettings:{method:"POST"},post:{},url:"",caseSensitive:!0,requestHandler:function(n){return n},responseHandler:function(n){return n},converters:{numeric:{from:function(n){return+n},to:function(n){return n+""}},string:{from:function(n){return n},to:function(n){return n}}},css:{actions:"actions btn-group",center:"text-center",columnHeaderAnchor:"column-header-anchor",columnHeaderText:"text",dropDownItem:"dropdown-item",dropDownItemButton:"dropdown-item-button",dropDownItemCheckbox:"dropdown-item-checkbox",dropDownMenu:"dropdown btn-group",dropDownMenuItems:"dropdown-menu pull-right",dropDownMenuText:"dropdown-text",footer:"bootgrid-footer container-fluid",header:"bootgrid-header container-fluid",icon:"icon glyphicon",iconColumns:"glyphicon-th-list",iconDown:"glyphicon-chevron-down",iconRefresh:"glyphicon-refresh",iconSearch:"glyphicon-search",iconUp:"glyphicon-chevron-up",infos:"infos",left:"text-left",pagination:"pagination",paginationButton:"button",responsiveTable:"table-responsive",right:"text-right",search:"search form-group",searchField:"search-field form-control",selectBox:"select-box",selectCell:"select-cell",selected:"active",sortable:"sortable",table:"bootgrid-table table"},formatters:{},labels:{all:"All",infos:"Showing {{ctx.start}} to {{ctx.end}} of {{ctx.total}} entries",loading:"Loading...",noResults:"No results found!",refresh:"Refresh",search:"Search"},statusMapping:{0:"success",1:"info",2:"warning",3:"danger"},templates:{actionButton:'<button class="btn btn-default" type="button" title="{{ctx.text}}">{{ctx.content}}<\/button>',actionDropDown:'<div class="{{css.dropDownMenu}}"><button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"><span class="{{css.dropDownMenuText}}">{{ctx.content}}<\/span> <span class="caret"><\/span><\/button><ul class="{{css.dropDownMenuItems}}" role="menu"><\/ul><\/div>',actionDropDownItem:'<li><a data-action="{{ctx.action}}" class="{{css.dropDownItem}} {{css.dropDownItemButton}}">{{ctx.text}}<\/a><\/li>',actionDropDownCheckboxItem:'<li><label class="{{css.dropDownItem}}"><input name="{{ctx.name}}" type="checkbox" value="1" class="{{css.dropDownItemCheckbox}}" {{ctx.checked}} /> {{ctx.label}}<\/label><\/li>',actions:'<div class="{{css.actions}}"><\/div>',body:"<tbody><\/tbody>",cell:'<td class="{{ctx.css}}" style="{{ctx.style}}">{{ctx.content}}<\/td>',footer:'<div id="{{ctx.id}}" class="{{css.footer}}"><div class="row"><div class="col-sm-6"><p class="{{css.pagination}}"><\/p><\/div><div class="col-sm-6 infoBar"><p class="{{css.infos}}"><\/p><\/div><\/div><\/div>',header:'<div id="{{ctx.id}}" class="{{css.header}}"><div class="row"><div class="col-sm-12 actionBar"><p class="{{css.search}}"><\/p><p class="{{css.actions}}"><\/p><\/div><\/div><\/div>',headerCell:'<th data-column-id="{{ctx.column.id}}" class="{{ctx.css}}" style="{{ctx.style}}"><a href="javascript:void(0);" class="{{css.columnHeaderAnchor}} {{ctx.sortable}}"><span class="{{css.columnHeaderText}}">{{ctx.column.text}}<\/span>{{ctx.icon}}<\/a><\/th>',icon:'<span class="{{css.icon}} {{ctx.iconCss}}"><\/span>',infos:'<div class="{{css.infos}}">{{lbl.infos}}<\/div>',loading:'<tr><td colspan="{{ctx.columns}}" class="loading">{{lbl.loading}}<\/td><\/tr>',noResults:'<tr><td colspan="{{ctx.columns}}" class="no-results">{{lbl.noResults}}<\/td><\/tr>',pagination:'<ul class="{{css.pagination}}"><\/ul>',paginationItem:'<li class="{{ctx.css}}"><a data-page="{{ctx.page}}" class="{{css.paginationButton}}">{{ctx.text}}<\/a><\/li>',rawHeaderCell:'<th class="{{ctx.css}}">{{ctx.content}}<\/th>',row:"<tr{{ctx.attr}}>{{ctx.cells}}<\/tr>",search:'<div class="{{css.search}}"><div class="input-group"><span class="{{css.icon}} input-group-addon {{css.iconSearch}}"><\/span> <input type="text" class="{{css.searchField}}" placeholder="{{lbl.search}}" /><\/div><\/div>',select:'<input name="select" type="{{ctx.type}}" class="{{css.selectBox}}" value="{{ctx.value}}" {{ctx.checked}} />'}},f.prototype.append=function(n){if(!this.options.ajax){for(var r=[],t=0;t<n.length;t++)y.call(this,n[t])&&r.push(n[t]);l.call(this);tt.call(this,r);e.call(this);this.element.trigger("appended"+i,[r])}return this},f.prototype.clear=function(){if(!this.options.ajax){var t=n.extend([],this.rows);this.rows=[];this.current=1;this.total=0;e.call(this);this.element.trigger("cleared"+i,[t])}return this},f.prototype.destroy=function(){return n(t).off(i),1&this.options.navigation&&this.header.remove(),2&this.options.navigation&&this.footer.remove(),this.element.before(this.origin).remove(),this},f.prototype.reload=function(){return this.current=1,e.call(this),this},f.prototype.remove=function(n){var f,u,r,t;if(null!=this.identifier&&!this.options.ajax){for(n=n||this.selectedRows,u=[],r=0;r<n.length;r++)for(f=n[r],t=0;t<this.rows.length;t++)if(this.rows[t][this.identifier]===f){u.push(this.rows[t]);this.rows.splice(t,1);break}this.current=1;e.call(this);this.element.trigger("removed"+i,[u])}return this},f.prototype.search=function(n){if(n=n||"",this.searchPhrase!==n){var t=u(this.options.css.searchField),i=s.call(this,t);i.val(n)}return b.call(this,n),this},f.prototype.select=function(t){var e,r,f,o,s;if(this.selection){for(t=t||this.currentRows.propValues(this.identifier),f=[];t.length>0&&(this.options.multiSelect||1!==f.length);)if(e=t.pop(),-1===n.inArray(e,this.selectedRows))for(r=0;r<this.currentRows.length;r++)if(this.currentRows[r][this.identifier]===e){f.push(this.currentRows[r]);this.selectedRows.push(e);break}if(f.length>0){for(o=u(this.options.css.selectBox),s=this.selectedRows.length>=this.currentRows.length,r=0;!this.options.keepSelection&&s&&r<this.currentRows.length;)s=-1!==n.inArray(this.currentRows[r++][this.identifier],this.selectedRows);for(this.element.find("thead "+o).prop("checked",s),this.options.multiSelect||this.element.find("tbody > tr "+o+":checked").trigger("click"+i),r=0;r<this.selectedRows.length;r++)this.element.find('tbody > tr[data-row-id="'+this.selectedRows[r]+'"]').addClass(this.options.css.selected)._bgAria("selected","true").find(o).prop("checked",!0);this.element.trigger("selected"+i,[f])}}return this},f.prototype.deselect=function(t){var e,r,o,f,s;if(this.selection){for(t=t||this.currentRows.propValues(this.identifier),f=[];t.length>0;)if(e=t.pop(),o=n.inArray(e,this.selectedRows),-1!==o)for(r=0;r<this.currentRows.length;r++)if(this.currentRows[r][this.identifier]===e){f.push(this.currentRows[r]);this.selectedRows.splice(o,1);break}if(f.length>0){for(s=u(this.options.css.selectBox),this.element.find("thead "+s).prop("checked",!1),r=0;r<f.length;r++)this.element.find('tbody > tr[data-row-id="'+f[r][this.identifier]+'"]').removeClass(this.options.css.selected)._bgAria("selected","false").find(s).prop("checked",!1);this.element.trigger("deselected"+i,[f])}}return this},f.prototype.sort=function(t){var i=t?n.extend({},t):{};return i===this.sortDictionary?this:(this.sortDictionary=i,v.call(this),l.call(this),e.call(this),this)},f.prototype.getColumnSettings=function(){return n.merge([],this.columns)},f.prototype.getCurrentPage=function(){return this.current},f.prototype.getCurrentRows=function(){return n.merge([],this.currentRows)},f.prototype.getRowCount=function(){return this.rowCount},f.prototype.getSearchPhrase=function(){return this.searchPhrase},f.prototype.getSelectedRows=function(){return n.merge([],this.selectedRows)},f.prototype.getSortDictionary=function(){return n.extend({},this.sortDictionary)},f.prototype.getTotalPageCount=function(){return this.totalPages},f.prototype.getTotalRowCount=function(){return this.total},n.fn.extend({_bgAria:function(n,t){return t?this.attr("aria-"+n,t):this.attr("aria-"+n)},_bgBusyAria:function(n){return null==n||n?this._bgAria("busy","true"):this._bgAria("busy","false")},_bgRemoveAria:function(n){return this.removeAttr("aria-"+n)},_bgEnableAria:function(n){return null==n||n?this.removeClass("disabled")._bgAria("disabled","false"):this.addClass("disabled")._bgAria("disabled","true")},_bgEnableField:function(n){return null==n||n?this.removeAttr("disabled"):this.attr("disabled","disable")},_bgShowAria:function(n){return null==n||n?this.show()._bgAria("hidden","false"):this.hide()._bgAria("hidden","true")},_bgSelectAria:function(n){return null==n||n?this.addClass("active")._bgAria("selected","true"):this.removeClass("active")._bgAria("selected","false")},_bgId:function(n){return n?this.attr("id",n):this.attr("id")}}),String.prototype.resolve)||(h={checked:function(n){return"boolean"==typeof n?n?'checked="checked"':"":n}},String.prototype.resolve=function(t,i){var r=this;return n.each(t,function(t,u){var f,e;null!=u&&"function"!=typeof u&&("object"==typeof u?(f=i?n.extend([],i):[],f.push(t),r=r.resolve(u,f)+""):(h&&h[t]&&"function"==typeof h[t]&&(u=h[t](u)),t=i?i.join(".")+"."+t:t,e=new RegExp("\\{\\{"+t+"\\}\\}","gm"),r=r.replace(e,u.replace?u.replace(/\$/gi,"&#36;"):u)))}),r});Array.prototype.first||(Array.prototype.first=function(n){for(var i,t=0;t<this.length;t++)if(i=this[t],n(i))return i;return null});Array.prototype.contains||(Array.prototype.contains=function(n){for(var i,t=0;t<this.length;t++)if(i=this[t],n(i))return!0;return!1});Array.prototype.page||(Array.prototype.page=function(n,t){var i=(n-1)*t,r=i+t;return this.length>i?this.length>r?this.slice(i,r):this.slice(i):[]});Array.prototype.where||(Array.prototype.where=function(n){for(var r,i=[],t=0;t<this.length;t++)r=this[t],n(r)&&i.push(r);return i});Array.prototype.propValues||(Array.prototype.propValues=function(n){for(var i=[],t=0;t<this.length;t++)i.push(this[t][n]);return i});k=n.fn.bootgrid;n.fn.bootgrid=function(t){var r=Array.prototype.slice.call(arguments,1),u=null,e=this.each(function(e){var s=n(this),o=s.data(i),h="object"==typeof t&&t;if((o||"destroy"!==t)&&(o||(s.data(i,o=new f(this,h)),nt.call(o)),"string"==typeof t))if(0===t.indexOf("get")&&0===e)u=o[t].apply(o,r);else if(0!==t.indexOf("get"))return o[t].apply(o,r)});return"string"==typeof t&&0===t.indexOf("get")?u:e};n.fn.bootgrid.Constructor=f;n.fn.bootgrid.noConflict=function(){return n.fn.bootgrid=k,this};n('[data-toggle="bootgrid"]').bootgrid()}(jQuery,window);!function(n,t){"use strict";if("undefined"!=typeof module&&module.exports){var i="object"==typeof process&&"object"==typeof process.versions,r=i&&"electron"in process.versions;r?n.BootstrapDialog=t(n.jQuery):module.exports=t(require("jquery"),require("bootstrap"))}else"function"==typeof define&&define.amd?define("bootstrap-dialog",["jquery","bootstrap"],function(n){return t(n)}):n.BootstrapDialog=t(n.jQuery)}(this,function(n){"use strict";var r=n.fn.modal.Constructor,i=function(n,t){r.call(this,n,t)},t;return i.getModalVersion=function(){return"undefined"==typeof n.fn.modal.Constructor.VERSION?"v3.1":/3\.2\.\d+/.test(n.fn.modal.Constructor.VERSION)?"v3.2":/3\.3\.[1,2]/.test(n.fn.modal.Constructor.VERSION)?"v3.3":"v3.3.4"},i.ORIGINAL_BODY_PADDING=parseInt(n("body").css("padding-right")||0,10),i.METHODS_TO_OVERRIDE={},i.METHODS_TO_OVERRIDE["v3.1"]={},i.METHODS_TO_OVERRIDE["v3.2"]={hide:function(t){if(t&&t.preventDefault(),t=n.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()){this.isShown=!1;var i=this.getGlobalOpenedDialogs();0===i.length&&this.$body.removeClass("modal-open");this.resetScrollbar();this.escape();n(document).off("focusin.bs.modal");this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal");n.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",n.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()}}},i.METHODS_TO_OVERRIDE["v3.3"]={setScrollbar:function(){var n=i.ORIGINAL_BODY_PADDING;this.bodyIsOverflowing&&this.$body.css("padding-right",n+this.scrollbarWidth)},resetScrollbar:function(){var n=this.getGlobalOpenedDialogs();0===n.length&&this.$body.css("padding-right",i.ORIGINAL_BODY_PADDING)},hideModal:function(){this.$element.hide();this.backdrop(n.proxy(function(){var n=this.getGlobalOpenedDialogs();0===n.length&&this.$body.removeClass("modal-open");this.resetAdjustments();this.resetScrollbar();this.$element.trigger("hidden.bs.modal")},this))}},i.METHODS_TO_OVERRIDE["v3.3.4"]=n.extend({},i.METHODS_TO_OVERRIDE["v3.3"]),i.prototype={constructor:i,getGlobalOpenedDialogs:function(){var i=[];return n.each(t.dialogs,function(n,t){t.isRealized()&&t.isOpened()&&i.push(t)}),i}},i.prototype=n.extend(i.prototype,r.prototype,i.METHODS_TO_OVERRIDE[i.getModalVersion()]),t=function(i){this.defaultOptions=n.extend(!0,{id:t.newGuid(),buttons:[],data:{},onshow:null,onshown:null,onhide:null,onhidden:null},t.defaultOptions);this.indexedButtons={};this.registeredButtonHotkeys={};this.draggableData={isMouseDown:!1,mouseOffset:{}};this.realized=!1;this.opened=!1;this.initOptions(i);this.holdThisInstance()},t.BootstrapDialogModal=i,t.NAMESPACE="bootstrap-dialog",t.TYPE_DEFAULT="type-default",t.TYPE_INFO="type-info",t.TYPE_PRIMARY="type-primary",t.TYPE_SUCCESS="type-success",t.TYPE_WARNING="type-warning",t.TYPE_DANGER="type-danger",t.DEFAULT_TEXTS={},t.DEFAULT_TEXTS[t.TYPE_DEFAULT]="Information",t.DEFAULT_TEXTS[t.TYPE_INFO]="Information",t.DEFAULT_TEXTS[t.TYPE_PRIMARY]="Information",t.DEFAULT_TEXTS[t.TYPE_SUCCESS]="Success",t.DEFAULT_TEXTS[t.TYPE_WARNING]="Warning",t.DEFAULT_TEXTS[t.TYPE_DANGER]="Danger",t.DEFAULT_TEXTS.OK="OK",t.DEFAULT_TEXTS.CANCEL="Cancel",t.DEFAULT_TEXTS.CONFIRM="Confirmation",t.SIZE_NORMAL="size-normal",t.SIZE_SMALL="size-small",t.SIZE_WIDE="size-wide",t.SIZE_LARGE="size-large",t.BUTTON_SIZES={},t.BUTTON_SIZES[t.SIZE_NORMAL]="",t.BUTTON_SIZES[t.SIZE_SMALL]="",t.BUTTON_SIZES[t.SIZE_WIDE]="",t.BUTTON_SIZES[t.SIZE_LARGE]="btn-lg",t.ICON_SPINNER="glyphicon glyphicon-asterisk",t.defaultOptions={type:t.TYPE_PRIMARY,size:t.SIZE_NORMAL,cssClass:"",title:null,message:null,nl2br:!0,closable:!0,closeByBackdrop:!0,closeByKeyboard:!0,closeIcon:"&#215;",spinicon:t.ICON_SPINNER,autodestroy:!0,draggable:!1,animate:!0,description:"",tabindex:-1},t.configDefaultOptions=function(i){t.defaultOptions=n.extend(!0,t.defaultOptions,i)},t.dialogs={},t.openAll=function(){n.each(t.dialogs,function(n,t){t.open()})},t.closeAll=function(){n.each(t.dialogs,function(n,t){t.close()})},t.getDialog=function(n){var i=null;return"undefined"!=typeof t.dialogs[n]&&(i=t.dialogs[n]),i},t.setDialog=function(n){return t.dialogs[n.getId()]=n,n},t.addDialog=function(n){return t.setDialog(n)},t.moveFocus=function(){var i=null;n.each(t.dialogs,function(n,t){t.isRealized()&&t.isOpened()&&(i=t)});null!==i&&i.getModal().focus()},t.METHODS_TO_OVERRIDE={},t.METHODS_TO_OVERRIDE["v3.1"]={handleModalBackdropEvent:function(){return this.getModal().on("click",{dialog:this},function(n){n.target===this&&n.data.dialog.isClosable()&&n.data.dialog.canCloseByBackdrop()&&n.data.dialog.close()}),this},updateZIndex:function(){var r,u;if(this.isOpened()){var i=0;n.each(t.dialogs,function(n,t){t.isRealized()&&t.isOpened()&&i++});r=this.getModal();u=r.data("bs.modal").$backdrop;r.css("z-index",1050+20*(i-1));u.css("z-index",1040+20*(i-1))}return this},open:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("show"),this.updateZIndex(),this}},t.METHODS_TO_OVERRIDE["v3.2"]={handleModalBackdropEvent:t.METHODS_TO_OVERRIDE["v3.1"].handleModalBackdropEvent,updateZIndex:t.METHODS_TO_OVERRIDE["v3.1"].updateZIndex,open:t.METHODS_TO_OVERRIDE["v3.1"].open},t.METHODS_TO_OVERRIDE["v3.3"]={},t.METHODS_TO_OVERRIDE["v3.3.4"]=n.extend({},t.METHODS_TO_OVERRIDE["v3.1"]),t.prototype={constructor:t,initOptions:function(t){return this.options=n.extend(!0,this.defaultOptions,t),this},holdThisInstance:function(){return t.addDialog(this),this},initModalStuff:function(){return this.setModal(this.createModal()).setModalDialog(this.createModalDialog()).setModalContent(this.createModalContent()).setModalHeader(this.createModalHeader()).setModalBody(this.createModalBody()).setModalFooter(this.createModalFooter()),this.getModal().append(this.getModalDialog()),this.getModalDialog().append(this.getModalContent()),this.getModalContent().append(this.getModalHeader()).append(this.getModalBody()).append(this.getModalFooter()),this},createModal:function(){var t=n('<div class="modal" role="dialog" aria-hidden="true"><\/div>');return t.prop("id",this.getId()),t.attr("aria-labelledby",this.getId()+"_title"),t},getModal:function(){return this.$modal},setModal:function(n){return this.$modal=n,this},createModalDialog:function(){return n('<div class="modal-dialog"><\/div>')},getModalDialog:function(){return this.$modalDialog},setModalDialog:function(n){return this.$modalDialog=n,this},createModalContent:function(){return n('<div class="modal-content"><\/div>')},getModalContent:function(){return this.$modalContent},setModalContent:function(n){return this.$modalContent=n,this},createModalHeader:function(){return n('<div class="modal-header"><\/div>')},getModalHeader:function(){return this.$modalHeader},setModalHeader:function(n){return this.$modalHeader=n,this},createModalBody:function(){return n('<div class="modal-body"><\/div>')},getModalBody:function(){return this.$modalBody},setModalBody:function(n){return this.$modalBody=n,this},createModalFooter:function(){return n('<div class="modal-footer"><\/div>')},getModalFooter:function(){return this.$modalFooter},setModalFooter:function(n){return this.$modalFooter=n,this},createDynamicContent:function(n){var t=null;return t="function"==typeof n?n.call(n,this):n,"string"==typeof t&&(t=this.formatStringContent(t)),t},formatStringContent:function(n){return this.options.nl2br?n.replace(/\r\n/g,"<br />").replace(/[\r\n]/g,"<br />"):n},setData:function(n,t){return this.options.data[n]=t,this},getData:function(n){return this.options.data[n]},setId:function(n){return this.options.id=n,this},getId:function(){return this.options.id},getType:function(){return this.options.type},setType:function(n){return this.options.type=n,this.updateType(),this},updateType:function(){if(this.isRealized()){var n=[t.TYPE_DEFAULT,t.TYPE_INFO,t.TYPE_PRIMARY,t.TYPE_SUCCESS,t.TYPE_WARNING,t.TYPE_DANGER];this.getModal().removeClass(n.join(" ")).addClass(this.getType())}return this},getSize:function(){return this.options.size},setSize:function(n){return this.options.size=n,this.updateSize(),this},updateSize:function(){if(this.isRealized()){var i=this;this.getModal().removeClass(t.SIZE_NORMAL).removeClass(t.SIZE_SMALL).removeClass(t.SIZE_WIDE).removeClass(t.SIZE_LARGE);this.getModal().addClass(this.getSize());this.getModalDialog().removeClass("modal-sm");this.getSize()===t.SIZE_SMALL&&this.getModalDialog().addClass("modal-sm");this.getModalDialog().removeClass("modal-lg");this.getSize()===t.SIZE_WIDE&&this.getModalDialog().addClass("modal-lg");n.each(this.options.buttons,function(t,r){var u=i.getButton(r.id),f=["btn-lg","btn-sm","btn-xs"],e=!1,o;"string"==typeof r.cssClass&&(o=r.cssClass.split(" "),n.each(o,function(t,i){-1!==n.inArray(i,f)&&(e=!0)}));e||(u.removeClass(f.join(" ")),u.addClass(i.getButtonSize()))})}return this},getCssClass:function(){return this.options.cssClass},setCssClass:function(n){return this.options.cssClass=n,this},getTitle:function(){return this.options.title},setTitle:function(n){return this.options.title=n,this.updateTitle(),this},updateTitle:function(){if(this.isRealized()){var n=null!==this.getTitle()?this.createDynamicContent(this.getTitle()):this.getDefaultText();this.getModalHeader().find("."+this.getNamespace("title")).html("").append(n).prop("id",this.getId()+"_title")}return this},getMessage:function(){return this.options.message},setMessage:function(n){return this.options.message=n,this.updateMessage(),this},updateMessage:function(){if(this.isRealized()){var n=this.createDynamicContent(this.getMessage());this.getModalBody().find("."+this.getNamespace("message")).html("").append(n)}return this},isClosable:function(){return this.options.closable},setClosable:function(n){return this.options.closable=n,this.updateClosable(),this},setCloseByBackdrop:function(n){return this.options.closeByBackdrop=n,this},canCloseByBackdrop:function(){return this.options.closeByBackdrop},setCloseByKeyboard:function(n){return this.options.closeByKeyboard=n,this},canCloseByKeyboard:function(){return this.options.closeByKeyboard},isAnimate:function(){return this.options.animate},setAnimate:function(n){return this.options.animate=n,this},updateAnimate:function(){return this.isRealized()&&this.getModal().toggleClass("fade",this.isAnimate()),this},getSpinicon:function(){return this.options.spinicon},setSpinicon:function(n){return this.options.spinicon=n,this},addButton:function(n){return this.options.buttons.push(n),this},addButtons:function(t){var i=this;return n.each(t,function(n,t){i.addButton(t)}),this},getButtons:function(){return this.options.buttons},setButtons:function(n){return this.options.buttons=n,this.updateButtons(),this},getButton:function(n){return"undefined"!=typeof this.indexedButtons[n]?this.indexedButtons[n]:null},getButtonSize:function(){return"undefined"!=typeof t.BUTTON_SIZES[this.getSize()]?t.BUTTON_SIZES[this.getSize()]:""},updateButtons:function(){return this.isRealized()&&(0===this.getButtons().length?this.getModalFooter().hide():this.getModalFooter().show().find("."+this.getNamespace("footer")).html("").append(this.createFooterButtons())),this},isAutodestroy:function(){return this.options.autodestroy},setAutodestroy:function(n){this.options.autodestroy=n},getDescription:function(){return this.options.description},setDescription:function(n){return this.options.description=n,this},setTabindex:function(n){return this.options.tabindex=n,this},getTabindex:function(){return this.options.tabindex},updateTabindex:function(){return this.isRealized()&&this.getModal().attr("tabindex",this.getTabindex()),this},getDefaultText:function(){return t.DEFAULT_TEXTS[this.getType()]},getNamespace:function(n){return t.NAMESPACE+"-"+n},createHeaderContent:function(){var t=n("<div><\/div>");return t.addClass(this.getNamespace("header")),t.append(this.createTitleContent()),t.prepend(this.createCloseButton()),t},createTitleContent:function(){var t=n("<div><\/div>");return t.addClass(this.getNamespace("title")),t},createCloseButton:function(){var t=n("<div><\/div>"),i;return t.addClass(this.getNamespace("close-button")),i=n('<button class="close"><\/button>'),i.append(this.options.closeIcon),t.append(i),t.on("click",{dialog:this},function(n){n.data.dialog.close()}),t},createBodyContent:function(){var t=n("<div><\/div>");return t.addClass(this.getNamespace("body")),t.append(this.createMessageContent()),t},createMessageContent:function(){var t=n("<div><\/div>");return t.addClass(this.getNamespace("message")),t},createFooterContent:function(){var t=n("<div><\/div>");return t.addClass(this.getNamespace("footer")),t},createFooterButtons:function(){var r=this,i=n("<div><\/div>");return i.addClass(this.getNamespace("footer-buttons")),this.indexedButtons={},n.each(this.options.buttons,function(n,u){u.id||(u.id=t.newGuid());var f=r.createButton(u);r.indexedButtons[u.id]=f;i.append(f)}),i},createButton:function(t){var i=n('<button class="btn"><\/button>');return i.prop("id",t.id),i.data("button",t),"undefined"!=typeof t.icon&&""!==n.trim(t.icon)&&i.append(this.createButtonIcon(t.icon)),"undefined"!=typeof t.label&&i.append(t.label),i.addClass("undefined"!=typeof t.cssClass&&""!==n.trim(t.cssClass)?t.cssClass:"btn-default"),"undefined"!=typeof t.hotkey&&(this.registeredButtonHotkeys[t.hotkey]=i),i.on("click",{dialog:this,$button:i,button:t},function(n){var r=n.data.dialog,t=n.data.$button,i=t.data("button");return i.autospin&&t.toggleSpin(!0),"function"==typeof i.action?i.action.call(t,r,n):void 0}),this.enhanceButton(i),"undefined"!=typeof t.enabled&&i.toggleEnable(t.enabled),i},enhanceButton:function(n){return n.dialog=this,n.toggleEnable=function(n){var t=this;return"undefined"!=typeof n?t.prop("disabled",!n).toggleClass("disabled",!n):t.prop("disabled",!t.prop("disabled")),t},n.enable=function(){var n=this;return n.toggleEnable(!0),n},n.disable=function(){var n=this;return n.toggleEnable(!1),n},n.toggleSpin=function(t){var i=this,r=i.dialog,u=i.find("."+r.getNamespace("button-icon"));return"undefined"==typeof t&&(t=!(n.find(".icon-spin").length>0)),t?(u.hide(),n.prepend(r.createButtonIcon(r.getSpinicon()).addClass("icon-spin"))):(u.show(),n.find(".icon-spin").remove()),i},n.spin=function(){var n=this;return n.toggleSpin(!0),n},n.stopSpin=function(){var n=this;return n.toggleSpin(!1),n},this},createButtonIcon:function(t){var i=n("<span><\/span>");return i.addClass(this.getNamespace("button-icon")).addClass(t),i},enableButtons:function(t){return n.each(this.indexedButtons,function(n,i){i.toggleEnable(t)}),this},updateClosable:function(){return this.isRealized()&&this.getModalHeader().find("."+this.getNamespace("close-button")).toggle(this.isClosable()),this},onShow:function(n){return this.options.onshow=n,this},onShown:function(n){return this.options.onshown=n,this},onHide:function(n){return this.options.onhide=n,this},onHidden:function(n){return this.options.onhidden=n,this},isRealized:function(){return this.realized},setRealized:function(n){return this.realized=n,this},isOpened:function(){return this.opened},setOpened:function(n){return this.opened=n,this},handleModalEvents:function(){return this.getModal().on("show.bs.modal",{dialog:this},function(n){var t=n.data.dialog,i;if(t.setOpened(!0),t.isModalEvent(n)&&"function"==typeof t.options.onshow)return i=t.options.onshow(t),i===!1&&t.setOpened(!1),i}),this.getModal().on("shown.bs.modal",{dialog:this},function(n){var t=n.data.dialog;t.isModalEvent(n)&&"function"==typeof t.options.onshown&&t.options.onshown(t)}),this.getModal().on("hide.bs.modal",{dialog:this},function(n){var t=n.data.dialog,i;if(t.setOpened(!1),t.isModalEvent(n)&&"function"==typeof t.options.onhide)return i=t.options.onhide(t),i===!1&&t.setOpened(!0),i}),this.getModal().on("hidden.bs.modal",{dialog:this},function(i){var r=i.data.dialog;r.isModalEvent(i)&&"function"==typeof r.options.onhidden&&r.options.onhidden(r);r.isAutodestroy()&&(r.setRealized(!1),delete t.dialogs[r.getId()],n(this).remove());t.moveFocus()}),this.handleModalBackdropEvent(),this.getModal().on("keyup",{dialog:this},function(n){27===n.which&&n.data.dialog.isClosable()&&n.data.dialog.canCloseByKeyboard()&&n.data.dialog.close()}),this.getModal().on("keyup",{dialog:this},function(t){var r=t.data.dialog,i;"undefined"!=typeof r.registeredButtonHotkeys[t.which]&&(i=n(r.registeredButtonHotkeys[t.which]),i.prop("disabled")||i.focus().trigger("click"))}),this},handleModalBackdropEvent:function(){return this.getModal().on("click",{dialog:this},function(t){n(t.target).hasClass("modal-backdrop")&&t.data.dialog.isClosable()&&t.data.dialog.canCloseByBackdrop()&&t.data.dialog.close()}),this},isModalEvent:function(n){return"undefined"!=typeof n.namespace&&"bs.modal"===n.namespace},makeModalDraggable:function(){return this.options.draggable&&(this.getModalHeader().addClass(this.getNamespace("draggable")).on("mousedown",{dialog:this},function(n){var t=n.data.dialog,i;t.draggableData.isMouseDown=!0;i=t.getModalDialog().offset();t.draggableData.mouseOffset={top:n.clientY-i.top,left:n.clientX-i.left}}),this.getModal().on("mouseup mouseleave",{dialog:this},function(n){n.data.dialog.draggableData.isMouseDown=!1}),n("body").on("mousemove",{dialog:this},function(n){var t=n.data.dialog;t.draggableData.isMouseDown&&t.getModalDialog().offset({top:n.clientY-t.draggableData.mouseOffset.top,left:n.clientX-t.draggableData.mouseOffset.left})})),this},realize:function(){return this.initModalStuff(),this.getModal().addClass(t.NAMESPACE).addClass(this.getCssClass()),this.updateSize(),this.getDescription()&&this.getModal().attr("aria-describedby",this.getDescription()),this.getModalFooter().append(this.createFooterContent()),this.getModalHeader().append(this.createHeaderContent()),this.getModalBody().append(this.createBodyContent()),this.getModal().data("bs.modal",new i(this.getModal(),{backdrop:"static",keyboard:!1,show:!1})),this.makeModalDraggable(),this.handleModalEvents(),this.setRealized(!0),this.updateButtons(),this.updateType(),this.updateTitle(),this.updateMessage(),this.updateClosable(),this.updateAnimate(),this.updateSize(),this.updateTabindex(),this},open:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("show"),this},close:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("hide"),this}},t.prototype=n.extend(t.prototype,t.METHODS_TO_OVERRIDE[i.getModalVersion()]),t.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=16*Math.random()|0,i="x"===n?t:3&t|8;return i.toString(16)})},t.show=function(n){return new t(n).open()},t.alert=function(){var r={},u={type:t.TYPE_PRIMARY,title:null,message:null,closable:!1,draggable:!1,buttonLabel:t.DEFAULT_TEXTS.OK,callback:null},i;return r="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?n.extend(!0,u,arguments[0]):n.extend(!0,u,{message:arguments[0],callback:"undefined"!=typeof arguments[1]?arguments[1]:null}),i=new t(r),i.setData("callback",r.callback),i.addButton({label:r.buttonLabel,action:function(n){return"function"==typeof n.getData("callback")&&n.getData("callback").call(this,!0)===!1?!1:(n.setData("btnClicked",!0),n.close())}}),i.onHide("function"==typeof i.options.onhide?function(n){var t=!0;return!n.getData("btnClicked")&&n.isClosable()&&"function"==typeof n.getData("callback")&&(t=n.getData("callback")(!1)),t===!1?!1:t=this.onhide(n)}.bind({onhide:i.options.onhide}):function(n){var t=!0;return!n.getData("btnClicked")&&n.isClosable()&&"function"==typeof n.getData("callback")&&(t=n.getData("callback")(!1)),t}),i.open()},t.confirm=function(){var i={},u={type:t.TYPE_PRIMARY,title:null,message:null,closable:!1,draggable:!1,btnCancelLabel:t.DEFAULT_TEXTS.CANCEL,btnCancelClass:null,btnOKLabel:t.DEFAULT_TEXTS.OK,btnOKClass:null,callback:null},r;return i="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?n.extend(!0,u,arguments[0]):n.extend(!0,u,{message:arguments[0],callback:"undefined"!=typeof arguments[1]?arguments[1]:null}),null===i.btnOKClass&&(i.btnOKClass=["btn",i.type.split("-")[1]].join("-")),r=new t(i),r.setData("callback",i.callback),r.addButton({label:i.btnCancelLabel,cssClass:i.btnCancelClass,action:function(n){return"function"==typeof n.getData("callback")&&n.getData("callback").call(this,!1)===!1?!1:n.close()}}),r.addButton({label:i.btnOKLabel,cssClass:i.btnOKClass,action:function(n){return"function"==typeof n.getData("callback")&&n.getData("callback").call(this,!0)===!1?!1:n.close()}}),r.open()},t.warning=function(n){return new t({type:t.TYPE_WARNING,message:n}).open()},t.danger=function(n){return new t({type:t.TYPE_DANGER,message:n}).open()},t.success=function(n){return new t({type:t.TYPE_SUCCESS,message:n}).open()},t});+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.toggle"),f="object"==typeof i&&i;r||u.data("bs.toggle",r=new t(this,f));"string"==typeof i&&r[i]&&r[i]()})}var t=function(t,i){this.$element=n(t);this.options=n.extend({},this.defaults(),i);this.render()},i;t.VERSION="2.2.0";t.DEFAULTS={on:"On",off:"Off",onstyle:"primary",offstyle:"default",size:"normal",style:"",width:null,height:null};t.prototype.defaults=function(){return{on:this.$element.attr("data-on")||t.DEFAULTS.on,off:this.$element.attr("data-off")||t.DEFAULTS.off,onstyle:this.$element.attr("data-onstyle")||t.DEFAULTS.onstyle,offstyle:this.$element.attr("data-offstyle")||t.DEFAULTS.offstyle,size:this.$element.attr("data-size")||t.DEFAULTS.size,style:this.$element.attr("data-style")||t.DEFAULTS.style,width:this.$element.attr("data-width")||t.DEFAULTS.width,height:this.$element.attr("data-height")||t.DEFAULTS.height}};t.prototype.render=function(){var e,o;this._onstyle="btn-"+this.options.onstyle;this._offstyle="btn-"+this.options.offstyle;var r="large"===this.options.size?"btn-lg":"small"===this.options.size?"btn-sm":"mini"===this.options.size?"btn-xs":"",t=n('<label class="btn">').html(this.options.on).addClass(this._onstyle+" "+r),i=n('<label class="btn">').html(this.options.off).addClass(this._offstyle+" "+r+" active"),u=n('<span class="toggle-handle btn btn-default">').addClass(r),f=n('<div class="toggle-group">').append(t,i,u),s=n('<div class="toggle btn" data-toggle="toggle">').addClass(this.$element.prop("checked")?this._onstyle:this._offstyle+" off").addClass(r).addClass(this.options.style);this.$element.wrap(s);n.extend(this,{$toggle:this.$element.parent(),$toggleOn:t,$toggleOff:i,$toggleGroup:f});this.$toggle.append(f);e=this.options.width||Math.max(t.outerWidth(),i.outerWidth())+u.outerWidth()/2;o=this.options.height||Math.max(t.outerHeight(),i.outerHeight());t.addClass("toggle-on");i.addClass("toggle-off");this.$toggle.css({width:e,height:o});this.options.height&&(t.css("line-height",t.height()+"px"),i.css("line-height",i.height()+"px"));this.update(!0);this.trigger(!0)};t.prototype.toggle=function(){this.$element.prop("checked")?this.off():this.on()};t.prototype.on=function(n){return this.$element.prop("disabled")?!1:(this.$toggle.removeClass(this._offstyle+" off").addClass(this._onstyle),this.$element.prop("checked",!0),void(n||this.trigger()))};t.prototype.off=function(n){return this.$element.prop("disabled")?!1:(this.$toggle.removeClass(this._onstyle).addClass(this._offstyle+" off"),this.$element.prop("checked",!1),void(n||this.trigger()))};t.prototype.enable=function(){this.$toggle.removeAttr("disabled");this.$element.prop("disabled",!1)};t.prototype.disable=function(){this.$toggle.attr("disabled","disabled");this.$element.prop("disabled",!0)};t.prototype.update=function(n){this.$element.prop("disabled")?this.disable():this.enable();this.$element.prop("checked")?this.on(n):this.off(n)};t.prototype.trigger=function(t){this.$element.off("change.bs.toggle");t||this.$element.change();this.$element.on("change.bs.toggle",n.proxy(function(){this.update()},this))};t.prototype.destroy=function(){this.$element.off("change.bs.toggle");this.$toggleGroup.remove();this.$element.removeData("bs.toggle");this.$element.unwrap()};i=n.fn.bootstrapToggle;n.fn.bootstrapToggle=r;n.fn.bootstrapToggle.Constructor=t;n.fn.toggle.noConflict=function(){return n.fn.bootstrapToggle=i,this};n(function(){n("input[type=checkbox][data-toggle^=toggle]").bootstrapToggle()});n(document).on("click.bs.toggle","div[data-toggle^=toggle]",function(t){var i=n(this).find("input[type=checkbox]");i.bootstrapToggle("toggle");t.preventDefault()})}(jQuery),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof module=="object"&&module.exports?module.exports=function(t,i){return i===undefined&&(i=typeof window!="undefined"?require("jquery"):require("jquery")(t)),n(i),i}:n(jQuery)}(function(n){function i(i,r,u){typeof u=="string"&&(u={className:u});this.options=et(p,n.isPlainObject(u)?u:{});this.loadHTML();this.wrapper=n(k.html);this.options.clickToHide&&this.wrapper.addClass(t+"-hidable");this.wrapper.data(t,this);this.arrow=this.wrapper.find("."+t+"-arrow");this.container=this.wrapper.find("."+t+"-container");this.container.append(this.userContainer);i&&i.length&&(this.elementType=i.attr("type"),this.originalElement=i,this.elem=rt(i),this.elem.data(t,this),this.elem.before(this.wrapper));this.container.hide();this.run(r)}var f=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1},e="notify",t=e+"js",a=e+"!blank",r={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"},h=["l","c","r"],v=["t","m","b"],o=["t","b","l","r"],b={t:"b",m:null,b:"t",l:"r",c:null,r:"l"},ut=function(t){var i;return i=[],n.each(t.split(/\W+/),function(n,t){var u;return u=t.toLowerCase().charAt(0),r[u]?i.push(u):void 0}),i},s={},k={name:"core",html:'<div class="'+t+'-wrapper">\n\t<div class="'+t+'-arrow"><\/div>\n\t<div class="'+t+'-container"><\/div>\n<\/div>',css:"."+t+"-corner {\n\tposition: fixed;\n\tmargin: 5px;\n\tz-index: 1050;\n}\n\n."+t+"-corner ."+t+"-wrapper,\n."+t+"-corner ."+t+"-container {\n\tposition: relative;\n\tdisplay: block;\n\theight: inherit;\n\twidth: inherit;\n\tmargin: 3px;\n}\n\n."+t+"-wrapper {\n\tz-index: 1;\n\tposition: absolute;\n\tdisplay: inline-block;\n\theight: 0;\n\twidth: 0;\n}\n\n."+t+"-container {\n\tdisplay: none;\n\tz-index: 1;\n\tposition: absolute;\n}\n\n."+t+"-hidable {\n\tcursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n\tposition: relative;\n}\n\n."+t+"-arrow {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 0;\n\theight: 0;\n}"},d={"border-radius":["-webkit-","-moz-"]},ft=function(n){return s[n]},g=function(i,r){var o,u,f,h;if(!i)throw"Missing Style name";if(!r)throw"Missing Style definition";if(!r.html)throw"Missing Style HTML";o=s[i];o&&o.cssElem&&(window.console&&console.warn(e+": overwriting style '"+i+"'"),s[i].cssElem.remove());r.name=i;s[i]=r;u="";r.classes&&n.each(r.classes,function(i,f){return u+="."+t+"-"+r.name+"-"+i+" {\n",n.each(f,function(t,i){return d[t]&&n.each(d[t],function(n,r){return u+="\t"+r+t+": "+i+";\n"}),u+="\t"+t+": "+i+";\n"}),u+="}\n"});r.css&&(u+="/* styles for "+r.name+" */\n"+r.css);u&&(r.cssElem=y(u),r.cssElem.attr("id","notify-"+r.name));f={};h=n(r.html);nt("html",h,f);nt("text",h,f);r.fields=f},y=function(t){var i;i=w("style");i.attr("type","text/css");n("head").append(i);try{i.html(t)}catch(r){i[0].styleSheet.cssText=t}return i},nt=function(t,i,r){var u;return t!=="html"&&(t="text"),u="data-notify-"+t,tt(i,"["+u+"]").each(function(){var i;i=n(this).attr(u);i||(i=a);r[i]=t})},tt=function(n,t){return n.is(t)?n:n.find(t)},p={clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,breakNewLines:!0,elementPosition:"bottom",globalPosition:"top right",style:"bootstrap",className:"error",showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:5},et=function(t,i){var r;return r=function(){},r.prototype=t,n.extend(!0,new r,i)},ot=function(t){return n.extend(p,t)},w=function(t){return n("<"+t+"><\/"+t+">")},it={},rt=function(t){var i;return t.is("[type=radio]")&&(i=t.parents("form:first").find("[type=radio]").filter(function(i,r){return n(r).attr("name")===t.attr("name")}),t=i.first()),t},u=function(n,t,i){var u,f;if(typeof i=="string")i=parseInt(i,10);else if(typeof i!="number")return;if(!isNaN(i))return u=r[b[t.charAt(0)]],f=t,n[u]!==undefined&&(t=r[u.charAt(0)],i=-i),n[t]===undefined?n[t]=i:n[t]+=i,null},c=function(n,t,i){if(n==="l"||n==="t")return 0;if(n==="c"||n==="m")return i/2-t/2;if(n==="r"||n==="b")return i-t;throw"Invalid alignment";},l=function(n){return l.e=l.e||w("div"),l.e.text(n).html()};i.prototype.loadHTML=function(){var t;t=this.getStyle();this.userContainer=n(t.html);this.userFields=t.fields};i.prototype.show=function(n,t){var i,f,e,r,u;if(f=function(i){return function(){return n||i.elem||i.destroy(),t?t():void 0}}(this),u=this.container.parent().parents(":hidden").length>0,e=this.container.add(this.arrow),i=[],u&&n)r="show";else if(u&&!n)r="hide";else if(!u&&n)r=this.options.showAnimation,i.push(this.options.showDuration);else{if(!!u||!!n)return f();r=this.options.hideAnimation;i.push(this.options.hideDuration)}return i.push(f),e[r].apply(e,i)};i.prototype.setGlobalPosition=function(){var e=this.getPosition(),o=e[0],s=e[1],c=r[o],f=r[s],h=o+"|"+s,u=it[h],i;return u||(u=it[h]=w("div"),i={},i[c]=0,f==="middle"?i.top="45%":f==="center"?i.left="45%":i[f]=0,u.css(i).addClass(t+"-corner"),n("body").append(u)),u.prepend(this.wrapper)};i.prototype.setElementPosition=function(){var et,i,e,ot,st,ht,t,d,ct,lt,g,nt,at,y,p,vt,yt,pt,tt,w,it,s,wt,l,a,rt,k,ut,ft;for(k=this.getPosition(),l=k[0],s=k[1],wt=k[2],g=this.elem.position(),d=this.elem.outerHeight(),nt=this.elem.outerWidth(),ct=this.elem.innerHeight(),lt=this.elem.innerWidth(),ft=this.wrapper.position(),st=this.container.height(),ht=this.container.width(),pt=r[l],w=b[l],it=r[w],t={},t[it]=l==="b"?d:l==="r"?nt:0,u(t,"top",g.top-ft.top),u(t,"left",g.left-ft.left),ut=["top","left"],y=0,vt=ut.length;y<vt;y++)a=ut[y],tt=parseInt(this.elem.css("margin-"+a),10),tt&&u(t,a,tt);if(at=Math.max(0,this.options.gap-(this.options.arrowShow?e:0)),u(t,it,at),this.options.arrowShow){for(e=this.options.arrowSize,i=n.extend({},t),et=this.userContainer.css("border-color")||this.userContainer.css("border-top-color")||this.userContainer.css("background-color")||"white",p=0,yt=o.length;p<yt;p++)(a=o[p],rt=r[a],a!==w)&&(ot=rt===pt?et:"transparent",i["border-"+rt]=e+"px solid "+ot);u(t,r[w],e);f.call(o,s)>=0&&u(i,r[s],e*2)}else this.arrow.hide();return f.call(v,l)>=0?(u(t,"left",c(s,ht,nt)),i&&u(i,"left",c(s,e,lt))):f.call(h,l)>=0&&(u(t,"top",c(s,st,d)),i&&u(i,"top",c(s,e,ct))),this.container.is(":visible")&&(t.display="block"),this.container.removeAttr("style").css(t),i?this.arrow.removeAttr("style").css(i):void 0};i.prototype.getPosition=function(){var n,t,i,r,u,e,s,c;if(c=this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition),n=ut(c),n.length===0&&(n[0]="b"),t=n[0],f.call(o,t)<0)throw"Must be one of ["+o+"]";return(n.length===1||(i=n[0],f.call(v,i)>=0)&&(r=n[1],f.call(h,r)<0)||(u=n[0],f.call(h,u)>=0)&&(e=n[1],f.call(v,e)<0))&&(n[1]=(s=n[0],f.call(h,s)>=0)?"m":"l"),n.length===2&&(n[2]=n[1]),n};i.prototype.getStyle=function(n){var t;if(n||(n=this.options.style),n||(n="default"),t=s[n],!t)throw"Missing style: "+n;return t};i.prototype.updateClasses=function(){var i,r;return i=["base"],n.isArray(this.options.className)?i=i.concat(this.options.className):this.options.className&&i.push(this.options.className),r=this.getStyle(),i=n.map(i,function(n){return t+"-"+r.name+"-"+n}).join(" "),this.userContainer.attr("class",i)};i.prototype.run=function(t,i){var r,u,f,e,o;if(n.isPlainObject(i)?n.extend(this.options,i):n.type(i)==="string"&&(this.options.className=i),this.container&&!t){this.show(!1);return}if(this.container||t){u={};n.isPlainObject(t)?u=t:u[a]=t;for(f in u)(r=u[f],e=this.userFields[f],e)&&(e==="text"&&(r=l(r),this.options.breakNewLines&&(r=r.replace(/\n/g,"<br/>"))),o=f===a?"":"="+f,tt(this.userContainer,"[data-notify-"+e+o+"]").html(r));this.updateClasses();this.elem?this.setElementPosition():this.setGlobalPosition();this.show(!0);this.options.autoHide&&(clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(this.show.bind(this,!1),this.options.autoHideDelay))}};i.prototype.destroy=function(){this.wrapper.data(t,null);this.wrapper.remove()};n[e]=function(t,r,u){return t&&t.nodeName||t.jquery?n(t)[e](r,u):(u=r,r=t,new i(null,r,u)),t};n.fn[e]=function(r,u){return n(this).each(function(){var f=rt(n(this)).data(t),e;f&&f.destroy();e=new i(n(this),r,u)}),this};n.extend(n[e],{defaults:ot,addStyle:g,pluginOptions:p,getStyle:ft,insertCSS:y});g("bootstrap",{html:"<div>\n<span data-notify-text><\/span>\n<\/div>",classes:{base:{"font-weight":"bold",padding:"8px 15px 8px 14px","text-shadow":"0 1px 0 rgba(255, 255, 255, 0.5)","background-color":"#fcf8e3",border:"1px solid #fbeed5","border-radius":"4px","white-space":"nowrap","padding-left":"25px","background-repeat":"no-repeat","background-position":"3px 7px"},error:{color:"#B94A48","background-color":"#F2DEDE","border-color":"#EED3D7","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtRJREFUeNqkVc1u00AQHq+dOD+0poIQfkIjalW0SEGqRMuRnHos3DjwAH0ArlyQeANOOSMeAA5VjyBxKBQhgSpVUKKQNGloFdw4cWw2jtfMOna6JOUArDTazXi/b3dm55socPqQhFka++aHBsI8GsopRJERNFlY88FCEk9Yiwf8RhgRyaHFQpPHCDmZG5oX2ui2yilkcTT1AcDsbYC1NMAyOi7zTX2Agx7A9luAl88BauiiQ/cJaZQfIpAlngDcvZZMrl8vFPK5+XktrWlx3/ehZ5r9+t6e+WVnp1pxnNIjgBe4/6dAysQc8dsmHwPcW9C0h3fW1hans1ltwJhy0GxK7XZbUlMp5Ww2eyan6+ft/f2FAqXGK4CvQk5HueFz7D6GOZtIrK+srupdx1GRBBqNBtzc2AiMr7nPplRdKhb1q6q6zjFhrklEFOUutoQ50xcX86ZlqaZpQrfbBdu2R6/G19zX6XSgh6RX5ubyHCM8nqSID6ICrGiZjGYYxojEsiw4PDwMSL5VKsC8Yf4VRYFzMzMaxwjlJSlCyAQ9l0CW44PBADzXhe7xMdi9HtTrdYjFYkDQL0cn4Xdq2/EAE+InCnvADTf2eah4Sx9vExQjkqXT6aAERICMewd/UAp/IeYANM2joxt+q5VI+ieq2i0Wg3l6DNzHwTERPgo1ko7XBXj3vdlsT2F+UuhIhYkp7u7CarkcrFOCtR3H5JiwbAIeImjT/YQKKBtGjRFCU5IUgFRe7fF4cCNVIPMYo3VKqxwjyNAXNepuopyqnld602qVsfRpEkkz+GFL1wPj6ySXBpJtWVa5xlhpcyhBNwpZHmtX8AGgfIExo0ZpzkWVTBGiXCSEaHh62/PoR0p/vHaczxXGnj4bSo+G78lELU80h1uogBwWLf5YlsPmgDEd4M236xjm+8nm4IuE/9u+/PH2JXZfbwz4zw1WbO+SQPpXfwG/BBgAhCNZiSb/pOQAAAAASUVORK5CYII=)"},success:{color:"#468847","background-color":"#DFF0D8","border-color":"#D6E9C6","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNq0lctPE0Ecx38zu/RFS1EryqtgJFA08YCiMZIAQQ4eRG8eDGdPJiYeTIwHTfwPiAcvXIwXLwoXPaDxkWgQ6islKlJLSQWLUraPLTv7Gme32zoF9KSTfLO7v53vZ3d/M7/fIth+IO6INt2jjoA7bjHCJoAlzCRw59YwHYjBnfMPqAKWQYKjGkfCJqAF0xwZjipQtA3MxeSG87VhOOYegVrUCy7UZM9S6TLIdAamySTclZdYhFhRHloGYg7mgZv1Zzztvgud7V1tbQ2twYA34LJmF4p5dXF1KTufnE+SxeJtuCZNsLDCQU0+RyKTF27Unw101l8e6hns3u0PBalORVVVkcaEKBJDgV3+cGM4tKKmI+ohlIGnygKX00rSBfszz/n2uXv81wd6+rt1orsZCHRdr1Imk2F2Kob3hutSxW8thsd8AXNaln9D7CTfA6O+0UgkMuwVvEFFUbbAcrkcTA8+AtOk8E6KiQiDmMFSDqZItAzEVQviRkdDdaFgPp8HSZKAEAL5Qh7Sq2lIJBJwv2scUqkUnKoZgNhcDKhKg5aH+1IkcouCAdFGAQsuWZYhOjwFHQ96oagWgRoUov1T9kRBEODAwxM2QtEUl+Wp+Ln9VRo6BcMw4ErHRYjH4/B26AlQoQQTRdHWwcd9AH57+UAXddvDD37DmrBBV34WfqiXPl61g+vr6xA9zsGeM9gOdsNXkgpEtTwVvwOklXLKm6+/p5ezwk4B+j6droBs2CsGa/gNs6RIxazl4Tc25mpTgw/apPR1LYlNRFAzgsOxkyXYLIM1V8NMwyAkJSctD1eGVKiq5wWjSPdjmeTkiKvVW4f2YPHWl3GAVq6ymcyCTgovM3FzyRiDe2TaKcEKsLpJvNHjZgPNqEtyi6mZIm4SRFyLMUsONSSdkPeFtY1n0mczoY3BHTLhwPRy9/lzcziCw9ACI+yql0VLzcGAZbYSM5CCSZg1/9oc/nn7+i8N9p/8An4JMADxhH+xHfuiKwAAAABJRU5ErkJggg==)"},info:{color:"#3A87AD","background-color":"#D9EDF7","border-color":"#BCE8F1","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYFAhkSsdes/QAAA8dJREFUOMvVlGtMW2UYx//POaWHXg6lLaW0ypAtw1UCgbniNOLcVOLmAjHZolOYlxmTGXVZdAnRfXQm+7SoU4mXaOaiZsEpC9FkiQs6Z6bdCnNYruM6KNBw6YWewzl9z+sHImEWv+vz7XmT95f/+3/+7wP814v+efDOV3/SoX3lHAA+6ODeUFfMfjOWMADgdk+eEKz0pF7aQdMAcOKLLjrcVMVX3xdWN29/GhYP7SvnP0cWfS8caSkfHZsPE9Fgnt02JNutQ0QYHB2dDz9/pKX8QjjuO9xUxd/66HdxTeCHZ3rojQObGQBcuNjfplkD3b19Y/6MrimSaKgSMmpGU5WevmE/swa6Oy73tQHA0Rdr2Mmv/6A1n9w9suQ7097Z9lM4FlTgTDrzZTu4StXVfpiI48rVcUDM5cmEksrFnHxfpTtU/3BFQzCQF/2bYVoNbH7zmItbSoMj40JSzmMyX5qDvriA7QdrIIpA+3cdsMpu0nXI8cV0MtKXCPZev+gCEM1S2NHPvWfP/hL+7FSr3+0p5RBEyhEN5JCKYr8XnASMT0xBNyzQGQeI8fjsGD39RMPk7se2bd5ZtTyoFYXftF6y37gx7NeUtJJOTFlAHDZLDuILU3j3+H5oOrD3yWbIztugaAzgnBKJuBLpGfQrS8wO4FZgV+c1IxaLgWVU0tMLEETCos4xMzEIv9cJXQcyagIwigDGwJgOAtHAwAhisQUjy0ORGERiELgG4iakkzo4MYAxcM5hAMi1WWG1yYCJIcMUaBkVRLdGeSU2995TLWzcUAzONJ7J6FBVBYIggMzmFbvdBV44Corg8vjhzC+EJEl8U1kJtgYrhCzgc/vvTwXKSib1paRFVRVORDAJAsw5FuTaJEhWM2SHB3mOAlhkNxwuLzeJsGwqWzf5TFNdKgtY5qHp6ZFf67Y/sAVadCaVY5YACDDb3Oi4NIjLnWMw2QthCBIsVhsUTU9tvXsjeq9+X1d75/KEs4LNOfcdf/+HthMnvwxOD0wmHaXr7ZItn2wuH2SnBzbZAbPJwpPx+VQuzcm7dgRCB57a1uBzUDRL4bfnI0RE0eaXd9W89mpjqHZnUI5Hh2l2dkZZUhOqpi2qSmpOmZ64Tuu9qlz/SEXo6MEHa3wOip46F1n7633eekV8ds8Wxjn37Wl63VVa+ej5oeEZ/82ZBETJjpJ1Rbij2D3Z/1trXUvLsblCK0XfOx0SX2kMsn9dX+d+7Kf6h8o4AIykuffjT8L20LU+w4AZd5VvEPY+XpWqLV327HR7DzXuDnD8r+ovkBehJ8i+y8YAAAAASUVORK5CYII=)"},warn:{color:"#C09853","background-color":"#FCF8E3","border-color":"#FBEED5","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABJlBMVEXr6eb/2oD/wi7/xjr/0mP/ykf/tQD/vBj/3o7/uQ//vyL/twebhgD/4pzX1K3z8e349vK6tHCilCWbiQymn0jGworr6dXQza3HxcKkn1vWvV/5uRfk4dXZ1bD18+/52YebiAmyr5S9mhCzrWq5t6ufjRH54aLs0oS+qD751XqPhAybhwXsujG3sm+Zk0PTwG6Shg+PhhObhwOPgQL4zV2nlyrf27uLfgCPhRHu7OmLgAafkyiWkD3l49ibiAfTs0C+lgCniwD4sgDJxqOilzDWowWFfAH08uebig6qpFHBvH/aw26FfQTQzsvy8OyEfz20r3jAvaKbhgG9q0nc2LbZxXanoUu/u5WSggCtp1anpJKdmFz/zlX/1nGJiYmuq5Dx7+sAAADoPUZSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfdBgUBGhh4aah5AAAAlklEQVQY02NgoBIIE8EUcwn1FkIXM1Tj5dDUQhPU502Mi7XXQxGz5uVIjGOJUUUW81HnYEyMi2HVcUOICQZzMMYmxrEyMylJwgUt5BljWRLjmJm4pI1hYp5SQLGYxDgmLnZOVxuooClIDKgXKMbN5ggV1ACLJcaBxNgcoiGCBiZwdWxOETBDrTyEFey0jYJ4eHjMGWgEAIpRFRCUt08qAAAAAElFTkSuQmCC)"}}});n(function(){y(k.css).attr("id","core-notify");n(document).on("click","."+t+"-hidable",function(){n(this).trigger("notify-hide")});n(document).on("notify-hide","."+t+"-wrapper",function(){var i=n(this).data(t);i&&i.show(!1)})})});!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof exports?require("jquery"):jQuery)}(function(n){"use strict";function i(n){return"number"==typeof n&&!isNaN(n)}function c(n){return"undefined"==typeof n}function tt(n,t){var r=[];return i(t)&&r.push(t),r.slice.apply(n,r)}function it(n,t){var i=tt(arguments,2);return function(){return n.apply(t,i.concat(tt(arguments)))}}function yt(n){var t=n.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return t&&(t[1]!==ut.protocol||t[2]!==ut.hostname||t[3]!==ut.port)}function pt(n){var t="timestamp="+(new Date).getTime();return n+(n.indexOf("?")===-1?"?":"&")+t}function wt(n){return n?' crossOrigin="'+n+'"':""}function tr(n,t){var i;return n.naturalWidth&&!ki?t(n.naturalWidth,n.naturalHeight):(i=document.createElement("img"),i.onload=function(){t(this.width,this.height)},void(i.src=n.src))}function rt(n){var t=[],r=n.rotate,u=n.scaleX,f=n.scaleY;return i(r)&&0!==r&&t.push("rotate("+r+"deg)"),i(u)&&1!==u&&t.push("scaleX("+u+")"),i(f)&&1!==f&&t.push("scaleY("+f+")"),t.length?t.join(" "):"none"}function b(n,t){var i,r,u=h(n.degree)%180,s=(u>90?180-u:u)*Math.PI/180,f=wr(s),e=br(s),o=n.width,c=n.height,l=n.aspectRatio;return t?(i=o/(e+f/l),r=i/l):(i=o*e+c*f,r=o*f+c*e),{width:i,height:r}}function bt(t,r){var v,y,p,s=n("<canvas>")[0],u=s.getContext("2d"),nt=0,tt=0,w=r.naturalWidth,k=r.naturalHeight,c=r.rotate,l=r.scaleX,a=r.scaleY,d=i(l)&&i(a)&&(1!==l||1!==a),g=i(c)&&0!==c,it=g||d,e=w*h(l||1),o=k*h(a||1);return d&&(v=e/2,y=o/2),g&&(p=b({width:e,height:o,degree:c}),e=p.width,o=p.height,v=e/2,y=o/2),s.width=e,s.height=o,it&&(nt=-w/2,tt=-k/2,u.save(),u.translate(v,y)),g&&u.rotate(c*Math.PI/180),d&&u.scale(l,a),u.drawImage(t,f(nt),f(tt),f(w),f(k)),it&&u.restore(),s}function ir(t){var i=t.length,r=0,u=0;return i&&(n.each(t,function(n,t){r+=t.pageX;u+=t.pageY}),r/=i,u/=i),{pageX:r,pageY:u}}function rr(n,t,i){var r,u="";for(r=t,i+=t;r<i;r++)u+=nr(n.getUint8(r));return u}function ur(n){var l,a,u,s,r,h,f,e,i,o,t=new or(n),c=t.byteLength;if(255===t.getUint8(0)&&216===t.getUint8(1))for(i=2;i<c;){if(255===t.getUint8(i)&&225===t.getUint8(i+1)){f=i;break}i++}if(f&&(a=f+4,u=f+10,"Exif"===rr(t,a,4)&&(h=t.getUint16(u),r=18761===h,(r||19789===h)&&42===t.getUint16(u+2,r)&&(s=t.getUint32(u+4,r),s>=8&&(e=u+s)))),e)for(c=t.getUint16(e,r),o=0;o<c;o++)if(i=e+12*o+2,274===t.getUint16(i,r)){i+=8;l=t.getUint16(i,r);ki&&t.setUint16(i,1,r);break}return l}function fr(n){for(var f=n.replace(vr,""),i=atob(f),r=i.length,u=new ni(r),e=new ti(u),t=0;t<r;t++)e[t]=i.charCodeAt(t);return u}function er(n){for(var i=new ti(n),u=i.length,r="",t=0;t<u;t++)r+=nr(i[t]);return"data:image/jpeg;base64,"+sr(r)}function e(t,i){this.$element=n(t);this.options=n.extend({},e.DEFAULTS,n.isPlainObject(i)&&i);this.isLoaded=!1;this.isBuilt=!1;this.isCompleted=!1;this.isRotated=!1;this.isCropped=!1;this.isDisabled=!1;this.isReplaced=!1;this.isLimited=!1;this.wheeling=!1;this.isImg=!1;this.originalUrl="";this.canvas=null;this.cropBox=null;this.init()}var kt=n(window),dt=n(document),ut=window.location,gt=window.navigator,ni=window.ArrayBuffer,ti=window.Uint8Array,or=window.DataView,sr=window.btoa,o="cropper",l="cropper-modal",ii="cropper-hide",s="cropper-hidden",hr="cropper-invisible",ft="cropper-move",et="cropper-crop",ri="cropper-disabled",cr="cropper-bg",ui="mousedown touchstart pointerdown MSPointerDown",fi="mousemove touchmove pointermove MSPointerMove",ei="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",oi="wheel mousewheel DOMMouseScroll",si="dblclick",ot="load."+o,hi="error."+o,ci="resize."+o,li="build."+o,ai="built."+o,st="cropstart."+o,ht="cropmove."+o,ct="cropend."+o,k="crop."+o,lt="zoom."+o,lr=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,ar=/^data:/,vr=/^data:([^;]+);base64,/,yr=/^data:image\/jpeg.*;base64,/,d="preview",a="action",vi="e",yi="w",pi="s",wi="n",v="se",y="sw",p="ne",w="nw",at="all",g="crop",nt="move",vt="zoom",pr="none",bi=n.isFunction(n("<canvas>")[0].getContext),ki=gt&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(gt.userAgent),u=Number,t=Math.min,r=Math.max,h=Math.abs,wr=Math.sin,br=Math.cos,di=Math.sqrt,gi=Math.round,f=Math.floor,nr=String.fromCharCode;e.prototype={constructor:e,init:function(){var n,t=this.$element;if(t.is("img")){if(this.isImg=!0,this.originalUrl=n=t.attr("src"),!n)return;n=t.prop("src")}else t.is("canvas")&&bi&&(n=t[0].toDataURL());this.load(n)},trigger:function(t,i){var r=n.Event(t,i);return this.$element.trigger(r),r},load:function(t){var r,i,u=this.options,f=this.$element;if(t&&(f.one(li,u.build),!this.trigger(li).isDefaultPrevented())){if(this.url=t,this.image={},!u.checkOrientation||!ni)return this.clone();if(r=n.proxy(this.read,this),ar.test(t))return yr.test(t)?r(fr(t)):this.clone();i=new XMLHttpRequest;i.onerror=i.onabort=n.proxy(function(){this.clone()},this);i.onload=function(){r(this.response)};u.checkCrossOrigin&&yt(t)&&f.prop("crossOrigin")&&(t=pt(t));i.open("get",t);i.responseType="arraybuffer";i.send()}},read:function(n){var f=this.options,e=ur(n),i=this.image,t=0,r=1,u=1;if(e>1)switch(this.url=er(n),e){case 2:r=-1;break;case 3:t=-180;break;case 4:u=-1;break;case 5:t=90;u=-1;break;case 6:t=90;break;case 7:t=90;r=-1;break;case 8:t=-90}f.rotatable&&(i.rotate=t);f.scalable&&(i.scaleX=r,i.scaleY=u);this.clone()},clone:function(){var i,f,e=this.options,r=this.$element,u=this.url,t="";e.checkCrossOrigin&&yt(u)&&(t=r.prop("crossOrigin"),t?i=u:(t="anonymous",i=pt(u)));this.crossOrigin=t;this.crossOriginUrl=i;this.$clone=f=n("<img"+wt(t)+' src="'+(i||u)+'">');this.isImg?r[0].complete?this.start():r.one(ot,n.proxy(this.start,this)):f.one(ot,n.proxy(this.start,this)).one(hi,n.proxy(this.stop,this)).addClass(ii).insertAfter(r)},start:function(){var t=this.$element,i=this.$clone;this.isImg||(i.off(hi,this.stop),t=i);tr(t[0],n.proxy(function(t,i){n.extend(this.image,{naturalWidth:t,naturalHeight:i,aspectRatio:t/i});this.isLoaded=!0;this.build()},this))},stop:function(){this.$clone.remove();this.$clone=null},build:function(){var u,f,o,i=this.options,h=this.$element,c=this.$clone;this.isLoaded&&(this.isBuilt&&this.unbuild(),this.$container=h.parent(),this.$cropper=u=n(e.TEMPLATE),this.$canvas=u.find(".cropper-canvas").append(c),this.$dragBox=u.find(".cropper-drag-box"),this.$cropBox=f=u.find(".cropper-crop-box"),this.$viewBox=u.find(".cropper-view-box"),this.$face=o=f.find(".cropper-face"),h.addClass(s).after(u),this.isImg||c.removeClass(ii),this.initPreview(),this.bind(),i.aspectRatio=r(0,i.aspectRatio)||NaN,i.viewMode=r(0,t(3,gi(i.viewMode)))||0,i.autoCrop?(this.isCropped=!0,i.modal&&this.$dragBox.addClass(l)):f.addClass(s),i.guides||f.find(".cropper-dashed").addClass(s),i.center||f.find(".cropper-center").addClass(s),i.cropBoxMovable&&o.addClass(ft).data(a,at),i.highlight||o.addClass(hr),i.background&&u.addClass(cr),i.cropBoxResizable||f.find(".cropper-line, .cropper-point").addClass(s),this.setDragMode(i.dragMode),this.render(),this.isBuilt=!0,this.setData(i.data),h.one(ai,i.built),this.completing=setTimeout(n.proxy(function(){this.trigger(ai);this.trigger(k,this.getData());this.isCompleted=!0},this),0))},unbuild:function(){this.isBuilt&&(this.isCompleted||clearTimeout(this.completing),this.isBuilt=!1,this.isCompleted=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},render:function(){this.initContainer();this.initCanvas();this.initCropBox();this.renderCanvas();this.isCropped&&this.renderCropBox()},initContainer:function(){var t=this.options,i=this.$element,f=this.$container,n=this.$cropper;n.addClass(s);i.removeClass(s);n.css(this.container={width:r(f.width(),u(t.minContainerWidth)||200),height:r(f.height(),u(t.minContainerHeight)||100)});i.addClass(s);n.removeClass(s)},initCanvas:function(){var t,f=this.options.viewMode,c=this.container,r=c.width,u=c.height,e=this.image,l=e.naturalWidth,a=e.naturalHeight,v=90===h(e.rotate),y=v?a:l,p=v?l:a,i=y/p,o=r,s=u;u*i>r?3===f?o=u*i:s=r/i:3===f?s=r/i:o=u*i;t={naturalWidth:y,naturalHeight:p,aspectRatio:i,width:o,height:s};t.oldLeft=t.left=(r-o)/2;t.oldTop=t.top=(u-s)/2;this.canvas=t;this.isLimited=1===f||2===f;this.limitCanvas(!0,!0);this.initialImage=n.extend({},e);this.initialCanvas=n.extend({},t)},limitCanvas:function(n,i){var e,o,c,l,w=this.options,a=w.viewMode,b=this.container,v=b.width,y=b.height,f=this.canvas,h=f.aspectRatio,s=this.cropBox,p=this.isCropped&&s;n&&(e=u(w.minCanvasWidth)||0,o=u(w.minCanvasHeight)||0,a&&(a>1?(e=r(e,v),o=r(o,y),3===a&&(o*h>e?e=o*h:o=e/h)):e?e=r(e,p?s.width:0):o?o=r(o,p?s.height:0):p&&(e=s.width,o=s.height,o*h>e?e=o*h:o=e/h)),e&&o?o*h>e?o=e/h:e=o*h:e?o=e/h:o&&(e=o*h),f.minWidth=e,f.minHeight=o,f.maxWidth=1/0,f.maxHeight=1/0);i&&(a?(c=v-f.width,l=y-f.height,f.minLeft=t(0,c),f.minTop=t(0,l),f.maxLeft=r(0,c),f.maxTop=r(0,l),p&&this.isLimited&&(f.minLeft=t(s.left,s.left+s.width-f.width),f.minTop=t(s.top,s.top+s.height-f.height),f.maxLeft=s.left,f.maxTop=s.top,2===a&&(f.width>=v&&(f.minLeft=t(0,c),f.maxLeft=r(0,c)),f.height>=y&&(f.minTop=t(0,l),f.maxTop=r(0,l))))):(f.minLeft=-f.width,f.minTop=-f.height,f.maxLeft=v,f.maxTop=y))},renderCanvas:function(n){var e,u,i=this.canvas,f=this.image,o=f.rotate,s=f.naturalWidth,h=f.naturalHeight;this.isRotated&&(this.isRotated=!1,u=b({width:f.width,height:f.height,degree:o}),e=u.width/u.height,e!==i.aspectRatio&&(i.left-=(u.width-i.width)/2,i.top-=(u.height-i.height)/2,i.width=u.width,i.height=u.height,i.aspectRatio=e,i.naturalWidth=s,i.naturalHeight=h,o%180&&(u=b({width:s,height:h,degree:o}),i.naturalWidth=u.width,i.naturalHeight=u.height),this.limitCanvas(!0,!1)));(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft);(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop);i.width=t(r(i.width,i.minWidth),i.maxWidth);i.height=t(r(i.height,i.minHeight),i.maxHeight);this.limitCanvas(!1,!0);i.oldLeft=i.left=t(r(i.left,i.minLeft),i.maxLeft);i.oldTop=i.top=t(r(i.top,i.minTop),i.maxTop);this.$canvas.css({width:i.width,height:i.height,left:i.left,top:i.top});this.renderImage();this.isCropped&&this.isLimited&&this.limitCropBox(!0,!0);n&&this.output()},renderImage:function(t){var r,u=this.canvas,i=this.image;i.rotate&&(r=b({width:u.width,height:u.height,degree:i.rotate,aspectRatio:i.aspectRatio},!0));n.extend(i,r?{width:r.width,height:r.height,left:(u.width-r.width)/2,top:(u.height-r.height)/2}:{width:u.width,height:u.height,left:0,top:0});this.$clone.css({width:i.width,height:i.height,marginLeft:i.left,marginTop:i.top,transform:rt(i)});t&&this.output()},initCropBox:function(){var o=this.options,f=this.canvas,e=o.aspectRatio,s=u(o.autoCropArea)||.8,i={width:f.width,height:f.height};e&&(f.height*e>f.width?i.height=i.width/e:i.width=i.height*e);this.cropBox=i;this.limitCropBox(!0,!0);i.width=t(r(i.width,i.minWidth),i.maxWidth);i.height=t(r(i.height,i.minHeight),i.maxHeight);i.width=r(i.minWidth,i.width*s);i.height=r(i.minHeight,i.height*s);i.oldLeft=i.left=f.left+(f.width-i.width)/2;i.oldTop=i.top=f.top+(f.height-i.height)/2;this.initialCropBox=n.extend({},i)},limitCropBox:function(n,i){var e,o,c,l,y=this.options,s=y.aspectRatio,w=this.container,a=w.width,v=w.height,h=this.canvas,f=this.cropBox,p=this.isLimited;n&&(e=u(y.minCropBoxWidth)||0,o=u(y.minCropBoxHeight)||0,e=t(e,a),o=t(o,v),c=t(a,p?h.width:a),l=t(v,p?h.height:v),s&&(e&&o?o*s>e?o=e/s:e=o*s:e?o=e/s:o&&(e=o*s),l*s>c?l=c/s:c=l*s),f.minWidth=t(e,c),f.minHeight=t(o,l),f.maxWidth=c,f.maxHeight=l);i&&(p?(f.minLeft=r(0,h.left),f.minTop=r(0,h.top),f.maxLeft=t(a,h.left+h.width)-f.width,f.maxTop=t(v,h.top+h.height)-f.height):(f.minLeft=0,f.minTop=0,f.maxLeft=a-f.width,f.maxTop=v-f.height))},renderCropBox:function(){var i=this.options,u=this.container,f=u.width,e=u.height,n=this.cropBox;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft);(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop);n.width=t(r(n.width,n.minWidth),n.maxWidth);n.height=t(r(n.height,n.minHeight),n.maxHeight);this.limitCropBox(!1,!0);n.oldLeft=n.left=t(r(n.left,n.minLeft),n.maxLeft);n.oldTop=n.top=t(r(n.top,n.minTop),n.maxTop);i.movable&&i.cropBoxMovable&&this.$face.data(a,n.width===f&&n.height===e?nt:at);this.$cropBox.css({width:n.width,height:n.height,left:n.left,top:n.top});this.isCropped&&this.isLimited&&this.limitCanvas(!0,!0);this.isDisabled||this.output()},output:function(){this.preview();this.isCompleted&&this.trigger(k,this.getData())},initPreview:function(){var i,t=wt(this.crossOrigin),r=t?this.crossOriginUrl:this.url;this.$preview=n(this.options.preview);this.$clone2=i=n("<img"+t+' src="'+r+'">');this.$viewBox.html(i);this.$preview.each(function(){var i=n(this);i.data(d,{width:i.width(),height:i.height(),html:i.html()});i.html("<img"+t+' src="'+r+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')})},resetPreview:function(){this.$preview.each(function(){var i=n(this),t=i.data(d);i.css({width:t.width,height:t.height}).html(t.html).removeData(d)})},preview:function(){var t=this.image,f=this.canvas,i=this.cropBox,r=i.width,u=i.height,e=t.width,o=t.height,s=i.left-f.left-t.left,h=i.top-f.top-t.top;this.isCropped&&!this.isDisabled&&(this.$clone2.css({width:e,height:o,marginLeft:-s,marginTop:-h,transform:rt(t)}),this.$preview.each(function(){var l=n(this),a=l.data(d),v=a.width,f=a.height,y=v,c=f,i=1;r&&(i=v/r,c=u*i);u&&c>f&&(i=f/u,y=r*i,c=f);l.css({width:y,height:c}).find("img").css({width:e*i,height:o*i,marginLeft:-s*i,marginTop:-h*i,transform:rt(t)})}))},bind:function(){var t=this.options,i=this.$element,r=this.$cropper;n.isFunction(t.cropstart)&&i.on(st,t.cropstart);n.isFunction(t.cropmove)&&i.on(ht,t.cropmove);n.isFunction(t.cropend)&&i.on(ct,t.cropend);n.isFunction(t.crop)&&i.on(k,t.crop);n.isFunction(t.zoom)&&i.on(lt,t.zoom);r.on(ui,n.proxy(this.cropStart,this));t.zoomable&&t.zoomOnWheel&&r.on(oi,n.proxy(this.wheel,this));t.toggleDragModeOnDblclick&&r.on(si,n.proxy(this.dblclick,this));dt.on(fi,this._cropMove=it(this.cropMove,this)).on(ei,this._cropEnd=it(this.cropEnd,this));t.responsive&&kt.on(ci,this._resize=it(this.resize,this))},unbind:function(){var t=this.options,i=this.$element,r=this.$cropper;n.isFunction(t.cropstart)&&i.off(st,t.cropstart);n.isFunction(t.cropmove)&&i.off(ht,t.cropmove);n.isFunction(t.cropend)&&i.off(ct,t.cropend);n.isFunction(t.crop)&&i.off(k,t.crop);n.isFunction(t.zoom)&&i.off(lt,t.zoom);r.off(ui,this.cropStart);t.zoomable&&t.zoomOnWheel&&r.off(oi,this.wheel);t.toggleDragModeOnDblclick&&r.off(si,this.dblclick);dt.off(fi,this._cropMove).off(ei,this._cropEnd);t.responsive&&kt.off(ci,this._resize)},resize:function(){var i,r,t,f=this.options.restore,e=this.$container,u=this.container;!this.isDisabled&&u&&(t=e.width()/u.width,1===t&&e.height()===u.height||(f&&(i=this.getCanvasData(),r=this.getCropBoxData()),this.render(),f&&(this.setCanvasData(n.each(i,function(n,r){i[n]=r*t})),this.setCropBoxData(n.each(r,function(n,i){r[n]=i*t})))))},dblclick:function(){this.isDisabled||(this.$dragBox.hasClass(et)?this.setDragMode(nt):this.setDragMode(g))},wheel:function(t){var i=t.originalEvent||t,f=u(this.options.wheelZoomRatio)||.1,r=1;this.isDisabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(n.proxy(function(){this.wheeling=!1},this),50),i.deltaY?r=i.deltaY>0?1:-1:i.wheelDelta?r=-i.wheelDelta/120:i.detail&&(r=i.detail>0?1:-1),this.zoom(-r*f,t)))},cropStart:function(t){var e,i,o=this.options,r=t.originalEvent,f=r&&r.touches,u=t;if(!this.isDisabled){if(f){if(e=f.length,e>1){if(!o.zoomable||!o.zoomOnTouch||2!==e)return;u=f[1];this.startX2=u.pageX;this.startY2=u.pageY;i=vt}u=f[0]}if(i=i||n(u.target).data(a),lr.test(i)){if(this.trigger(st,{originalEvent:r,action:i}).isDefaultPrevented())return;t.preventDefault();this.action=i;this.cropping=!1;this.startX=u.pageX||r&&r.pageX;this.startY=u.pageY||r&&r.pageY;i===g&&(this.cropping=!0,this.$dragBox.addClass(l))}}},cropMove:function(n){var u,e=this.options,t=n.originalEvent,r=t&&t.touches,i=n,f=this.action;if(!this.isDisabled){if(r){if(u=r.length,u>1){if(!e.zoomable||!e.zoomOnTouch||2!==u)return;i=r[1];this.endX2=i.pageX;this.endY2=i.pageY}i=r[0]}if(f){if(this.trigger(ht,{originalEvent:t,action:f}).isDefaultPrevented())return;n.preventDefault();this.endX=i.pageX||t&&t.pageX;this.endY=i.pageY||t&&t.pageY;this.change(i.shiftKey,f===vt?n:null)}}},cropEnd:function(n){var i=n.originalEvent,t=this.action;this.isDisabled||t&&(n.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(l,this.isCropped&&this.options.modal)),this.action="",this.trigger(ct,{originalEvent:i,action:t}))},change:function(n,i){var ot,r,st=this.options,e=st.aspectRatio,l=this.action,et=this.container,ft=this.canvas,b=this.cropBox,u=b.width,f=b.height,c=b.left,o=b.top,ut=c+u,tt=o+f,it=0,k=0,rt=et.width,d=et.height,a=!0;switch(!e&&n&&(e=u&&f?u/f:1),this.isLimited&&(it=b.minLeft,k=b.minTop,rt=it+t(et.width,ft.width,ft.left+ft.width),d=k+t(et.height,ft.height,ft.top+ft.height)),r={x:this.endX-this.startX,y:this.endY-this.startY},e&&(r.X=r.y*e,r.Y=r.x/e),l){case at:c+=r.x;o+=r.y;break;case vi:if(r.x>=0&&(ut>=rt||e&&(o<=k||tt>=d))){a=!1;break}u+=r.x;e&&(f=u/e,o-=r.Y/2);u<0&&(l=yi,u=0);break;case wi:if(r.y<=0&&(o<=k||e&&(c<=it||ut>=rt))){a=!1;break}f-=r.y;o+=r.y;e&&(u=f*e,c+=r.X/2);f<0&&(l=pi,f=0);break;case yi:if(r.x<=0&&(c<=it||e&&(o<=k||tt>=d))){a=!1;break}u-=r.x;c+=r.x;e&&(f=u/e,o+=r.Y/2);u<0&&(l=vi,u=0);break;case pi:if(r.y>=0&&(tt>=d||e&&(c<=it||ut>=rt))){a=!1;break}f+=r.y;e&&(u=f*e,c-=r.X/2);f<0&&(l=wi,f=0);break;case p:if(e){if(r.y<=0&&(o<=k||ut>=rt)){a=!1;break}f-=r.y;o+=r.y;u=f*e}else r.x>=0?ut<rt?u+=r.x:r.y<=0&&o<=k&&(a=!1):u+=r.x,r.y<=0?o>k&&(f-=r.y,o+=r.y):(f-=r.y,o+=r.y);u<0&&f<0?(l=y,f=0,u=0):u<0?(l=w,u=0):f<0&&(l=v,f=0);break;case w:if(e){if(r.y<=0&&(o<=k||c<=it)){a=!1;break}f-=r.y;o+=r.y;u=f*e;c+=r.X}else r.x<=0?c>it?(u-=r.x,c+=r.x):r.y<=0&&o<=k&&(a=!1):(u-=r.x,c+=r.x),r.y<=0?o>k&&(f-=r.y,o+=r.y):(f-=r.y,o+=r.y);u<0&&f<0?(l=v,f=0,u=0):u<0?(l=p,u=0):f<0&&(l=y,f=0);break;case y:if(e){if(r.x<=0&&(c<=it||tt>=d)){a=!1;break}u-=r.x;c+=r.x;f=u/e}else r.x<=0?c>it?(u-=r.x,c+=r.x):r.y>=0&&tt>=d&&(a=!1):(u-=r.x,c+=r.x),r.y>=0?tt<d&&(f+=r.y):f+=r.y;u<0&&f<0?(l=p,f=0,u=0):u<0?(l=v,u=0):f<0&&(l=w,f=0);break;case v:if(e){if(r.x>=0&&(ut>=rt||tt>=d)){a=!1;break}u+=r.x;f=u/e}else r.x>=0?ut<rt?u+=r.x:r.y>=0&&tt>=d&&(a=!1):u+=r.x,r.y>=0?tt<d&&(f+=r.y):f+=r.y;u<0&&f<0?(l=w,f=0,u=0):u<0?(l=y,u=0):f<0&&(l=p,f=0);break;case nt:this.move(r.x,r.y);a=!1;break;case vt:this.zoom(function(n,t,i,r){var u=di(n*n+t*t),f=di(i*i+r*r);return(f-u)/u}(h(this.startX-this.startX2),h(this.startY-this.startY2),h(this.endX-this.endX2),h(this.endY-this.endY2)),i);this.startX2=this.endX2;this.startY2=this.endY2;a=!1;break;case g:if(!r.x||!r.y){a=!1;break}ot=this.$cropper.offset();c=this.startX-ot.left;o=this.startY-ot.top;u=b.minWidth;f=b.minHeight;r.x>0?l=r.y>0?v:p:r.x<0&&(c-=u,l=r.y>0?y:w);r.y<0&&(o-=f);this.isCropped||(this.$cropBox.removeClass(s),this.isCropped=!0,this.isLimited&&this.limitCropBox(!0,!0))}a&&(b.width=u,b.height=f,b.left=c,b.top=o,this.action=l,this.renderCropBox());this.startX=this.endX;this.startY=this.endY},crop:function(){this.isBuilt&&!this.isDisabled&&(this.isCropped||(this.isCropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(l),this.$cropBox.removeClass(s)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.isBuilt&&!this.isDisabled&&(this.image=n.extend({},this.initialImage),this.canvas=n.extend({},this.initialCanvas),this.cropBox=n.extend({},this.initialCropBox),this.renderCanvas(),this.isCropped&&this.renderCropBox())},clear:function(){this.isCropped&&!this.isDisabled&&(n.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.isCropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),this.$dragBox.removeClass(l),this.$cropBox.addClass(s))},replace:function(n,t){!this.isDisabled&&n&&(this.isImg&&this.$element.attr("src",n),t?(this.url=n,this.$clone.attr("src",n),this.isBuilt&&this.$preview.find("img").add(this.$clone2).attr("src",n)):(this.isImg&&(this.isReplaced=!0),this.options.data=null,this.load(n)))},enable:function(){this.isBuilt&&(this.isDisabled=!1,this.$cropper.removeClass(ri))},disable:function(){this.isBuilt&&(this.isDisabled=!0,this.$cropper.addClass(ri))},destroy:function(){var n=this.$element;this.isLoaded?(this.isImg&&this.isReplaced&&n.attr("src",this.originalUrl),this.unbuild(),n.removeClass(s)):this.isImg?n.off(ot,this.start):this.$clone&&this.$clone.remove();n.removeData(o)},move:function(n,t){var i=this.canvas;this.moveTo(c(n)?n:i.left+u(n),c(t)?t:i.top+u(t))},moveTo:function(n,t){var f=this.canvas,r=!1;c(t)&&(t=n);n=u(n);t=u(t);this.isBuilt&&!this.isDisabled&&this.options.movable&&(i(n)&&(f.left=n,r=!0),i(t)&&(f.top=t,r=!0),r&&this.renderCanvas(!0))},zoom:function(n,t){var i=this.canvas;n=u(n);n=n<0?1/(1-n):1+n;this.zoomTo(i.width*n/i.naturalWidth,t)},zoomTo:function(n,t){var r,f,e,s,h,a=this.options,i=this.canvas,o=i.width,c=i.height,l=i.naturalWidth,v=i.naturalHeight;if(n=u(n),n>=0&&this.isBuilt&&!this.isDisabled&&a.zoomable){if(f=l*n,e=v*n,t&&(r=t.originalEvent),this.trigger(lt,{originalEvent:r,oldRatio:o/l,ratio:f/l}).isDefaultPrevented())return;r?(s=this.$cropper.offset(),h=r.touches?ir(r.touches):{pageX:t.pageX||r.pageX||0,pageY:t.pageY||r.pageY||0},i.left-=(f-o)*((h.pageX-s.left-i.left)/o),i.top-=(e-c)*((h.pageY-s.top-i.top)/c)):(i.left-=(f-o)/2,i.top-=(e-c)/2);i.width=f;i.height=e;this.renderCanvas(!0)}},rotate:function(n){this.rotateTo((this.image.rotate||0)+u(n))},rotateTo:function(n){n=u(n);i(n)&&this.isBuilt&&!this.isDisabled&&this.options.rotatable&&(this.image.rotate=n%360,this.isRotated=!0,this.renderCanvas(!0))},scale:function(n,t){var f=this.image,r=!1;c(t)&&(t=n);n=u(n);t=u(t);this.isBuilt&&!this.isDisabled&&this.options.scalable&&(i(n)&&(f.scaleX=n,r=!0),i(t)&&(f.scaleY=t,r=!0),r&&this.renderImage(!0))},scaleX:function(n){var t=this.image.scaleY;this.scale(n,i(t)?t:1)},scaleY:function(n){var t=this.image.scaleX;this.scale(i(t)?t:1,n)},getData:function(t){var f,i,e=this.options,r=this.image,o=this.canvas,u=this.cropBox;return this.isBuilt&&this.isCropped?(i={x:u.left-o.left,y:u.top-o.top,width:u.width,height:u.height},f=r.width/r.naturalWidth,n.each(i,function(n,r){r/=f;i[n]=t?gi(r):r})):i={x:0,y:0,width:0,height:0},e.rotatable&&(i.rotate=r.rotate||0),e.scalable&&(i.scaleX=r.scaleX||1,i.scaleY=r.scaleY||1),i},setData:function(t){var o,e,u,s=this.options,r=this.image,h=this.canvas,f={};n.isFunction(t)&&(t=t.call(this.element));this.isBuilt&&!this.isDisabled&&n.isPlainObject(t)&&(s.rotatable&&i(t.rotate)&&t.rotate!==r.rotate&&(r.rotate=t.rotate,this.isRotated=o=!0),s.scalable&&(i(t.scaleX)&&t.scaleX!==r.scaleX&&(r.scaleX=t.scaleX,e=!0),i(t.scaleY)&&t.scaleY!==r.scaleY&&(r.scaleY=t.scaleY,e=!0)),o?this.renderCanvas():e&&this.renderImage(),u=r.width/r.naturalWidth,i(t.x)&&(f.left=t.x*u+h.left),i(t.y)&&(f.top=t.y*u+h.top),i(t.width)&&(f.width=t.width*u),i(t.height)&&(f.height=t.height*u),this.setCropBoxData(f))},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var i=this.canvas,t={};return this.isBuilt&&n.each(["left","top","width","height","naturalWidth","naturalHeight"],function(n,r){t[r]=i[r]}),t},setCanvasData:function(t){var r=this.canvas,u=r.aspectRatio;n.isFunction(t)&&(t=t.call(this.$element));this.isBuilt&&!this.isDisabled&&n.isPlainObject(t)&&(i(t.left)&&(r.left=t.left),i(t.top)&&(r.top=t.top),i(t.width)?(r.width=t.width,r.height=t.width/u):i(t.height)&&(r.height=t.height,r.width=t.height*u),this.renderCanvas(!0))},getCropBoxData:function(){var t,n=this.cropBox;return this.isBuilt&&this.isCropped&&(t={left:n.left,top:n.top,width:n.width,height:n.height}),t||{}},setCropBoxData:function(t){var f,e,r=this.cropBox,u=this.options.aspectRatio;n.isFunction(t)&&(t=t.call(this.$element));this.isBuilt&&this.isCropped&&!this.isDisabled&&n.isPlainObject(t)&&(i(t.left)&&(r.left=t.left),i(t.top)&&(r.top=t.top),i(t.width)&&(f=!0,r.width=t.width),i(t.height)&&(e=!0,r.height=t.height),u&&(f?r.height=r.width/u:e&&(r.width=r.height*u)),this.renderCropBox())},getCroppedCanvas:function(i){var r,u,v,y,s,c,e,p,l,a,o;if(this.isBuilt&&bi)return this.isCropped?(n.isPlainObject(i)||(i={}),o=this.getData(),r=o.width,u=o.height,p=r/u,n.isPlainObject(i)&&(s=i.width,c=i.height,s?(c=s/p,e=s/r):c&&(s=c*p,e=c/u)),v=f(s||r),y=f(c||u),l=n("<canvas>")[0],l.width=v,l.height=y,a=l.getContext("2d"),i.fillColor&&(a.fillStyle=i.fillColor,a.fillRect(0,0,v,y)),a.drawImage.apply(a,function(){var l,y,a,v,s,c,b=bt(this.$clone[0],this.image),p=b.width,w=b.height,d=this.canvas,k=[b],n=o.x+d.naturalWidth*(h(o.scaleX||1)-1)/2,i=o.y+d.naturalHeight*(h(o.scaleY||1)-1)/2;return n<=-r||n>p?n=l=a=s=0:n<=0?(a=-n,n=0,l=s=t(p,r+n)):n<=p&&(a=0,l=s=t(r,p-n)),l<=0||i<=-u||i>w?i=y=v=c=0:i<=0?(v=-i,i=0,y=c=t(w,u+i)):i<=w&&(v=0,y=c=t(u,w-i)),k.push(f(n),f(i),f(l),f(y)),e&&(a*=e,v*=e,s*=e,c*=e),s>0&&c>0&&k.push(f(a),f(v),f(s),f(c)),k}.call(this)),l):bt(this.$clone[0],this.image)},setAspectRatio:function(n){var t=this.options;this.isDisabled||c(n)||(t.aspectRatio=r(0,n)||NaN,this.isBuilt&&(this.initCropBox(),this.isCropped&&this.renderCropBox()))},setDragMode:function(n){var t,i,r=this.options;this.isLoaded&&!this.isDisabled&&(t=n===g,i=r.movable&&n===nt,n=t||i?n:pr,this.$dragBox.data(a,n).toggleClass(et,t).toggleClass(ft,i),r.cropBoxMovable||this.$face.data(a,n).toggleClass(et,t).toggleClass(ft,i))}};e.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null};e.setDefaults=function(t){n.extend(e.DEFAULTS,t)};e.TEMPLATE='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"><\/div><\/div><div class="cropper-drag-box"><\/div><div class="cropper-crop-box"><span class="cropper-view-box"><\/span><span class="cropper-dashed dashed-h"><\/span><span class="cropper-dashed dashed-v"><\/span><span class="cropper-center"><\/span><span class="cropper-face"><\/span><span class="cropper-line line-e" data-action="e"><\/span><span class="cropper-line line-n" data-action="n"><\/span><span class="cropper-line line-w" data-action="w"><\/span><span class="cropper-line line-s" data-action="s"><\/span><span class="cropper-point point-e" data-action="e"><\/span><span class="cropper-point point-n" data-action="n"><\/span><span class="cropper-point point-w" data-action="w"><\/span><span class="cropper-point point-s" data-action="s"><\/span><span class="cropper-point point-ne" data-action="ne"><\/span><span class="cropper-point point-nw" data-action="nw"><\/span><span class="cropper-point point-sw" data-action="sw"><\/span><span class="cropper-point point-se" data-action="se"><\/span><\/div><\/div>';e.other=n.fn.cropper;n.fn.cropper=function(t){var i,r=tt(arguments,1);return this.each(function(){var s,h,f=n(this),u=f.data(o);if(!u){if(/destroy/.test(t))return;s=n.extend({},f.data(),n.isPlainObject(t)&&t);f.data(o,u=new e(this,s))}"string"==typeof t&&n.isFunction(h=u[t])&&(i=h.apply(u,r))}),c(i)?this:i};n.fn.cropper.Constructor=e;n.fn.cropper.setDefaults=e.setDefaults;n.fn.cropper.noConflict=function(){return n.fn.cropper=e.other,this}});!function(n,t,i){"use strict";var r=function(t,i){this.widget="";this.$element=n(t);this.defaultTime=i.defaultTime;this.disableFocus=i.disableFocus;this.disableMousewheel=i.disableMousewheel;this.isOpen=i.isOpen;this.minuteStep=i.minuteStep;this.modalBackdrop=i.modalBackdrop;this.orientation=i.orientation;this.secondStep=i.secondStep;this.snapToStep=i.snapToStep;this.showInputs=i.showInputs;this.showMeridian=i.showMeridian;this.showSeconds=i.showSeconds;this.template=i.template;this.appendWidgetTo=i.appendWidgetTo;this.showWidgetOnAddonClick=i.showWidgetOnAddonClick;this.icons=i.icons;this.maxHours=i.maxHours;this.explicitMode=i.explicitMode;this.handleDocumentClick=function(n){var t=n.data.scope;t.$element.parent().find(n.target).length||t.$widget.is(n.target)||t.$widget.find(n.target).length||t.hideWidget()};this._init()};r.prototype={constructor:r,_init:function(){var t=this;this.showWidgetOnAddonClick&&this.$element.parent().hasClass("input-group")&&this.$element.parent().hasClass("bootstrap-timepicker")?(this.$element.parent(".input-group.bootstrap-timepicker").find(".input-group-addon").on({"click.timepicker":n.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":n.proxy(this.highlightUnit,this),"click.timepicker":n.proxy(this.highlightUnit,this),"keydown.timepicker":n.proxy(this.elementKeydown,this),"blur.timepicker":n.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":n.proxy(this.mousewheel,this)})):this.template?this.$element.on({"focus.timepicker":n.proxy(this.showWidget,this),"click.timepicker":n.proxy(this.showWidget,this),"blur.timepicker":n.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":n.proxy(this.mousewheel,this)}):this.$element.on({"focus.timepicker":n.proxy(this.highlightUnit,this),"click.timepicker":n.proxy(this.highlightUnit,this),"keydown.timepicker":n.proxy(this.elementKeydown,this),"blur.timepicker":n.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":n.proxy(this.mousewheel,this)});this.$widget=this.template!==!1?n(this.getTemplate()).on("click",n.proxy(this.widgetClick,this)):!1;this.showInputs&&this.$widget!==!1&&this.$widget.find("input").each(function(){n(this).on({"click.timepicker":function(){n(this).select()},"keydown.timepicker":n.proxy(t.widgetKeydown,t),"keyup.timepicker":n.proxy(t.widgetKeyup,t)})});this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=null;this.updateFromElementVal()},clear:function(){this.hour="";this.minute="";this.second="";this.meridian="";this.$element.val("")},decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else this.hour<=0?this.hour=this.maxHours-1:this.hour--},decrementMinute:function(n){var t;t=n?this.minute-n:this.minute-this.minuteStep;0>t?(this.decrementHour(),this.minute=t+60):this.minute=t},decrementSecond:function(){var n=this.second-this.secondStep;0>n?(this.decrementMinute(!0),this.second=n+60):this.second=n},elementKeydown:function(n){switch(n.which){case 9:if(n.shiftKey){if("hour"===this.highlightedUnit){this.hideWidget();break}this.highlightPrevUnit()}else{if(this.showMeridian&&"meridian"===this.highlightedUnit||this.showSeconds&&"second"===this.highlightedUnit||!this.showMeridian&&!this.showSeconds&&"minute"===this.highlightedUnit){this.hideWidget();break}this.highlightNextUnit()}n.preventDefault();this.updateFromElementVal();break;case 27:this.updateFromElementVal();break;case 37:n.preventDefault();this.highlightPrevUnit();this.updateFromElementVal();break;case 38:switch(n.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour();this.highlightHour();break;case"minute":this.incrementMinute();this.highlightMinute();break;case"second":this.incrementSecond();this.highlightSecond();break;case"meridian":this.toggleMeridian();this.highlightMeridian()}this.update();break;case 39:n.preventDefault();this.highlightNextUnit();this.updateFromElementVal();break;case 40:switch(n.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour();this.highlightHour();break;case"minute":this.decrementMinute();this.highlightMinute();break;case"second":this.decrementSecond();this.highlightSecond();break;case"meridian":this.toggleMeridian();this.highlightMeridian()}this.update()}},getCursorPosition:function(){var n=this.$element.get(0),t,r;return"selectionStart"in n?n.selectionStart:i.selection?(n.focus(),t=i.selection.createRange(),r=i.selection.createRange().text.length,t.moveStart("character",-n.value.length),t.text.length-r):void 0},getTemplate:function(){var n,t,i,r,u,f;switch(this.showInputs?(t='<input type="text" class="bootstrap-timepicker-hour" maxlength="2"/>',i='<input type="text" class="bootstrap-timepicker-minute" maxlength="2"/>',r='<input type="text" class="bootstrap-timepicker-second" maxlength="2"/>',u='<input type="text" class="bootstrap-timepicker-meridian" maxlength="2"/>'):(t='<span class="bootstrap-timepicker-hour"><\/span>',i='<span class="bootstrap-timepicker-minute"><\/span>',r='<span class="bootstrap-timepicker-second"><\/span>',u='<span class="bootstrap-timepicker-meridian"><\/span>'),f='<table><tr><td><a href="#" data-action="incrementHour"><span class="'+this.icons.up+'"><\/span><\/a><\/td><td class="separator">&nbsp;<\/td><td><a href="#" data-action="incrementMinute"><span class="'+this.icons.up+'"><\/span><\/a><\/td>'+(this.showSeconds?'<td class="separator">&nbsp;<\/td><td><a href="#" data-action="incrementSecond"><span class="'+this.icons.up+'"><\/span><\/a><\/td>':"")+(this.showMeridian?'<td class="separator">&nbsp;<\/td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><span class="'+this.icons.up+'"><\/span><\/a><\/td>':"")+"<\/tr><tr><td>"+t+'<\/td> <td class="separator">:<\/td><td>'+i+"<\/td> "+(this.showSeconds?'<td class="separator">:<\/td><td>'+r+"<\/td>":"")+(this.showMeridian?'<td class="separator">&nbsp;<\/td><td>'+u+"<\/td>":"")+'<\/tr><tr><td><a href="#" data-action="decrementHour"><span class="'+this.icons.down+'"><\/span><\/a><\/td><td class="separator"><\/td><td><a href="#" data-action="decrementMinute"><span class="'+this.icons.down+'"><\/span><\/a><\/td>'+(this.showSeconds?'<td class="separator">&nbsp;<\/td><td><a href="#" data-action="decrementSecond"><span class="'+this.icons.down+'"><\/span><\/a><\/td>':"")+(this.showMeridian?'<td class="separator">&nbsp;<\/td><td><a href="#" data-action="toggleMeridian"><span class="'+this.icons.down+'"><\/span><\/a><\/td>':"")+"<\/tr><\/table>",this.template){case"modal":n='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">&times;<\/a><h3>Pick a Time<\/h3><\/div><div class="modal-content">'+f+'<\/div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK<\/a><\/div><\/div>';break;case"dropdown":n='<div class="bootstrap-timepicker-widget dropdown-menu">'+f+"<\/div>"}return n},getTime:function(){return""===this.hour?"":this.hour+":"+(1===this.minute.toString().length?"0"+this.minute:this.minute)+(this.showSeconds?":"+(1===this.second.toString().length?"0"+this.second:this.second):"")+(this.showMeridian?" "+this.meridian:"")},hideWidget:function(){this.isOpen!==!1&&(this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template&&this.$widget.modal?this.$widget.modal("hide"):this.$widget.removeClass("open"),n(i).off("mousedown.timepicker, touchend.timepicker",this.handleDocumentClick),this.isOpen=!1,this.$widget.detach())},highlightUnit:function(){this.position=this.getCursorPosition();this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.showMeridian?this.highlightMeridian():this.showSeconds?this.highlightSecond():this.highlightMinute();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var n=this.$element.get(0),t=this;this.highlightedUnit="hour";n.setSelectionRange&&setTimeout(function(){t.hour<10?n.setSelectionRange(0,1):n.setSelectionRange(0,2)},0)},highlightMinute:function(){var n=this.$element.get(0),t=this;this.highlightedUnit="minute";n.setSelectionRange&&setTimeout(function(){t.hour<10?n.setSelectionRange(2,4):n.setSelectionRange(3,5)},0)},highlightSecond:function(){var n=this.$element.get(0),t=this;this.highlightedUnit="second";n.setSelectionRange&&setTimeout(function(){t.hour<10?n.setSelectionRange(5,7):n.setSelectionRange(6,8)},0)},highlightMeridian:function(){var n=this.$element.get(0),t=this;this.highlightedUnit="meridian";n.setSelectionRange&&(this.showSeconds?setTimeout(function(){t.hour<10?n.setSelectionRange(8,10):n.setSelectionRange(9,11)},0):setTimeout(function(){t.hour<10?n.setSelectionRange(5,7):n.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}return this.hour===this.maxHours-1?void(this.hour=0):void this.hour++},incrementMinute:function(n){var t;t=n?this.minute+n:this.minute+this.minuteStep-this.minute%this.minuteStep;t>59?(this.incrementHour(),this.minute=t-60):this.minute=t},incrementSecond:function(){var n=this.second+this.secondStep-this.second%this.secondStep;n>59?(this.incrementMinute(!0),this.second=n-60):this.second=n},mousewheel:function(t){if(!this.disableMousewheel){t.preventDefault();t.stopPropagation();var r=t.originalEvent.wheelDelta||-t.originalEvent.detail,i=null;switch("mousewheel"===t.type?i=-1*t.originalEvent.wheelDelta:"DOMMouseScroll"===t.type&&(i=40*t.originalEvent.detail),i&&(t.preventDefault(),n(this).scrollTop(i+n(this).scrollTop())),this.highlightedUnit){case"minute":r>0?this.incrementMinute():this.decrementMinute();this.highlightMinute();break;case"second":r>0?this.incrementSecond():this.decrementSecond();this.highlightSecond();break;case"meridian":this.toggleMeridian();this.highlightMeridian();break;default:r>0?this.incrementHour():this.decrementHour();this.highlightHour()}return!1}},changeToNearestStep:function(n,t){return n%t==0?n:Math.round(n%t/t)?(n+(t-n%t))%60:n-n%t},place:function(){var v,s,r;if(!this.isInline){var f=this.$widget.outerWidth(),e=this.$widget.outerHeight(),h=10,c=n(t).width(),y=n(t).height(),l=n(t).scrollTop(),p=parseInt(this.$element.parents().filter(function(){return"auto"!==n(this).css("z-index")}).first().css("z-index"),10)+10,i=this.component?this.component.parent().offset():this.$element.offset(),a=this.component?this.component.outerHeight(!0):this.$element.outerHeight(!1),w=this.component?this.component.outerWidth(!0):this.$element.outerWidth(!1),u=i.left,o=i.top;this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left");"auto"!==this.orientation.x?(this.$widget.addClass("timepicker-orient-"+this.orientation.x),"right"===this.orientation.x&&(u-=f-w)):(this.$widget.addClass("timepicker-orient-left"),i.left<0?u-=i.left-h:i.left+f>c&&(u=c-f-h));r=this.orientation.y;"auto"===r&&(v=-l+i.top-e,s=l+y-(i.top+a+e),r=Math.max(v,s)===s?"top":"bottom");this.$widget.addClass("timepicker-orient-"+r);"top"===r?o+=a:o-=e+parseInt(this.$widget.css("padding-top"),10);this.$widget.css({top:o,left:u,zIndex:p})}},remove:function(){n("document").off(".timepicker");this.$widget&&this.$widget.remove();delete this.$element.data().timepicker},setDefaultTime:function(n){if(this.$element.val())this.updateFromElementVal();else if("current"===n){var r=new Date,t=r.getHours(),i=r.getMinutes(),u=r.getSeconds(),f="AM";0!==u&&(u=Math.ceil(r.getSeconds()/this.secondStep)*this.secondStep,60===u&&(i+=1,u=0));0!==i&&(i=Math.ceil(r.getMinutes()/this.minuteStep)*this.minuteStep,60===i&&(t+=1,i=0));this.showMeridian&&(0===t?t=12:t>=12?(t>12&&(t-=12),f="PM"):f="AM");this.hour=t;this.minute=i;this.second=u;this.meridian=f;this.update()}else n===!1?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(n)},setTime:function(n,t){if(!n)return void this.clear();var f,e,i,r,u,o;if("object"==typeof n&&n.getMonth)i=n.getHours(),r=n.getMinutes(),u=n.getSeconds(),this.showMeridian&&(o="AM",i>12&&(o="PM",i%=12),12===i&&(o="PM"));else{if((f=(/a/i.test(n)?1:0)+(/p/i.test(n)?2:0),f>2)||(e=n.replace(/[^0-9\:]/g,"").split(":"),i=e[0]?e[0].toString():e.toString(),this.explicitMode&&i.length>2&&i.length%2!=0))return void this.clear();r=e[1]?e[1].toString():"";u=e[2]?e[2].toString():"";i.length>4&&(u=i.slice(-2),i=i.slice(0,-2));i.length>2&&(r=i.slice(-2),i=i.slice(0,-2));r.length>2&&(u=r.slice(-2),r=r.slice(0,-2));i=parseInt(i,10);r=parseInt(r,10);u=parseInt(u,10);isNaN(i)&&(i=0);isNaN(r)&&(r=0);isNaN(u)&&(u=0);u>59&&(u=59);r>59&&(r=59);i>=this.maxHours&&(i=this.maxHours-1);this.showMeridian?(i>12&&(f=2,i-=12),f||(f=1),0===i&&(i=12),o=1===f?"AM":"PM"):12>i&&2===f?i+=12:i>=this.maxHours?i=this.maxHours-1:(0>i||12===i&&1===f)&&(i=0)}this.hour=i;this.snapToStep?(this.minute=this.changeToNearestStep(r,this.minuteStep),this.second=this.changeToNearestStep(u,this.secondStep)):(this.minute=r,this.second=u);this.meridian=o;this.update(t)},showWidget:function(){this.isOpen||this.$element.is(":disabled")||(this.$widget.appendTo(this.appendWidgetTo),n(i).on("mousedown.timepicker, touchend.timepicker",{scope:this},this.handleDocumentClick),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.place(),this.disableFocus&&this.$element.blur(),""===this.hour&&(this.defaultTime?this.setDefaultTime(this.defaultTime):this.setTime("0:0:0")),"modal"===this.template&&this.$widget.modal?this.$widget.modal("show").on("hidden",n.proxy(this.hideWidget,this)):this.isOpen===!1&&this.$widget.addClass("open"),this.isOpen=!0)},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM"},update:function(n){this.updateElement();n||this.updateWidget();this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}})},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){this.setTime(this.$element.val())},updateWidget:function(){if(this.$widget!==!1){var n=this.hour,t=1===this.minute.toString().length?"0"+this.minute:this.minute,i=1===this.second.toString().length?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(n),this.$widget.find("input.bootstrap-timepicker-minute").val(t),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(i),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(n),this.$widget.find("span.bootstrap-timepicker-minute").text(t),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(i),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(this.$widget!==!1){var n=this.$widget.find("input.bootstrap-timepicker-hour").val()+":"+this.$widget.find("input.bootstrap-timepicker-minute").val()+(this.showSeconds?":"+this.$widget.find("input.bootstrap-timepicker-second").val():"")+(this.showMeridian?this.$widget.find("input.bootstrap-timepicker-meridian").val():"");this.setTime(n,!0)}},widgetClick:function(t){t.stopPropagation();t.preventDefault();var i=n(t.target),r=i.closest("a").data("action");r&&this[r]();this.update();i.is("input")&&i.get(0).setSelectionRange(0,2)},widgetKeydown:function(t){var r=n(t.target),i=r.attr("class").replace("bootstrap-timepicker-","");switch(t.which){case 9:if(t.shiftKey){if("hour"===i)return this.hideWidget()}else if(this.showMeridian&&"meridian"===i||this.showSeconds&&"second"===i||!this.showMeridian&&!this.showSeconds&&"minute"===i)return this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(t.preventDefault(),i){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime());r.get(0).setSelectionRange(0,2);break;case 40:switch(t.preventDefault(),i){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime());r.get(0).setSelectionRange(0,2)}},widgetKeyup:function(n){(65===n.which||77===n.which||80===n.which||46===n.which||8===n.which||n.which>=48&&n.which<=57||n.which>=96&&n.which<=105)&&this.updateFromWidgetInputs()}};n.fn.timepicker=function(t){var i=Array.apply(null,arguments);return i.shift(),this.each(function(){var f=n(this),u=f.data("timepicker"),e="object"==typeof t&&t;u||f.data("timepicker",u=new r(this,n.extend({},n.fn.timepicker.defaults,e,n(this).data())));"string"==typeof t&&u[t].apply(u,i)})};n.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,disableMousewheel:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,orientation:{x:"auto",y:"auto"},secondStep:15,snapToStep:!1,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:"body",showWidgetOnAddonClick:!0,icons:{up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},maxHours:24,explicitMode:!1};n.fn.timepicker.Constructor=r;n(i).on("focus.timepicker.data-api click.timepicker.data-api",'[data-provide="timepicker"]',function(t){var i=n(this);i.data("timepicker")||(t.preventDefault(),i.timepicker())})}(jQuery,window,document);!function(n,t){"function"==typeof define&&define.amd?define(["jquery"],function(n){return t(n)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(this,function(n){function s(n){this.$container;this.constraints=null;this.__$tooltip;this.__init(n)}function e(t,i){var r=!0;return n.each(t,function(n){if(void 0===i[n]||t[n]!==i[n])return(r=!1,!1)}),r}function r(i){var r=i.attr("id"),u=r?t.window.document.getElementById(r):null;return u?u===i[0]:n.contains(t.window.document.body,i[0])}function c(){var t;if(!i)return!1;var f=i.document.body||i.document.documentElement,r=f.style,n="transition",u=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof r[n])return!0;for(n=n.charAt(0).toUpperCase()+n.substr(1),t=0;t<u.length;t++)if("string"==typeof r[u[t]+n])return!0;return!1}var u={animation:"fade",animationDuration:350,content:null,contentAsHTML:!1,contentCloning:!1,debug:!0,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:!1,multiple:!1,parent:null,plugins:["sideTip"],repositionOnScroll:!1,restoration:"none",selfDestruction:!0,theme:[],timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:"hover",triggerClose:{click:!1,mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},updateAnimation:"rotate",zIndex:9999999},i="undefined"!=typeof window?window:null,t={hasTouchCapability:!(!i||!("ontouchstart"in i||i.DocumentTouch&&i.document instanceof i.DocumentTouch||i.navigator.maxTouchPoints)),hasTransitions:c(),IE:!1,semVer:"4.2.6",window:i},h=function(){this.__$emitterPrivate=n({});this.__$emitterPublic=n({});this.__instancesLatestArr=[];this.__plugins={};this._env=t},f,o;return h.prototype={__bridge:function(t,i,r){var e,f;return i[r]||(e=function(){},e.prototype=t,f=new e,f.__init&&f.__init(i),n.each(t,function(n){0!=n.indexOf("__")&&(i[n]?u.debug&&console.log("The "+n+" method of the "+r+" plugin conflicts with another plugin or native methods"):(i[n]=function(){return f[n].apply(f,Array.prototype.slice.apply(arguments))},i[n].bridged=f))}),i[r]=f),this},__setWindow:function(n){return t.window=n,this},_getRuler:function(n){return new s(n)},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_plugin:function(t){var i=this,r,u;if("string"==typeof t)return r=t,u=null,r.indexOf(".")>0?u=i.__plugins[r]:n.each(i.__plugins,function(n,t){if(t.name.substring(t.name.length-r.length-1)=="."+r)return(u=t,!1)}),u;if(t.name.indexOf(".")<0)throw new Error("Plugins must be namespaced");return i.__plugins[t.name]=t,t.core&&i.__bridge(t.core,i,t.name),this},_trigger:function(){var n=Array.prototype.slice.apply(arguments);return"string"==typeof n[0]&&(n[0]={type:n[0]}),this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,n),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,n),this},instances:function(t){var i=[],r=t||".tooltipstered";return n(r).each(function(){var t=n(this),r=t.data("tooltipster-ns");r&&n.each(r,function(n,r){i.push(t.data(r))})}),i},instancesLatest:function(){return this.__instancesLatestArr},off:function(){return this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},origins:function(t){var i=t?t+" ":"";return n(i+".tooltipstered").toArray()},setDefaults:function(t){return n.extend(u,t),this},triggerHandler:function(){return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},n.tooltipster=new h,n.Tooltipster=function(t,i){this.__callbacks={close:[],open:[]};this.__closingTime;this.__Content;this.__contentBcr;this.__destroyed=!1;this.__$emitterPrivate=n({});this.__$emitterPublic=n({});this.__enabled=!0;this.__garbageCollector;this.__Geometry;this.__lastPosition;this.__namespace="tooltipster-"+Math.round(1e6*Math.random());this.__options;this.__$originParents;this.__pointerIsOverOrigin=!1;this.__previousThemes=[];this.__state="closed";this.__timeouts={close:[],open:null};this.__touchEvents=[];this.__tracker=null;this._$origin;this._$tooltip;this.__init(t,i)},n.Tooltipster.prototype={__init:function(i,r){var f=this,e,o,s;(f._$origin=n(i),f.__options=n.extend(!0,{},u,r),f.__optionsFormat(),!t.IE||t.IE>=f.__options.IEmin)?(e=null,(void 0===f._$origin.data("tooltipster-initialTitle")&&(e=f._$origin.attr("title"),void 0===e&&(e=null),f._$origin.data("tooltipster-initialTitle",e)),null!==f.__options.content)?f.__contentSet(f.__options.content):(s=f._$origin.attr("data-tooltip-content"),s&&(o=n(s)),o&&o[0]?f.__contentSet(o.first()):f.__contentSet(e)),f._$origin.removeAttr("title").addClass("tooltipstered"),f.__prepareOrigin(),f.__prepareGC(),n.each(f.__options.plugins,function(n,t){f._plug(t)}),t.hasTouchCapability&&n(t.window.document.body).on("touchmove."+f.__namespace+"-triggerOpen",function(n){f._touchRecordEvent(n)}),f._on("created",function(){f.__prepareTooltip()})._on("repositioned",function(n){f.__lastPosition=n.position})):f.__options.disabled=!0},__contentInsert:function(){var n=this,i=n._$tooltip.find(".tooltipster-content"),t=n.__Content,r=function(n){t=n};return n._trigger({type:"format",content:n.__Content,format:r}),n.__options.functionFormat&&(t=n.__options.functionFormat.call(n,n,{origin:n._$origin[0]},n.__Content)),"string"!=typeof t||n.__options.contentAsHTML?i.empty().append(t):i.text(t),n},__contentSet:function(t){return t instanceof n&&this.__options.contentCloning&&(t=t.clone(!0)),this.__Content=t,this._trigger({type:"updated",content:t}),this},__destroyError:function(){throw new Error("This tooltip has been destroyed and cannot execute your method call.");},__geometry:function(){var e=this,c=e._$origin,y=e._$origin.is("area"),k,p,r,u,it;y&&(k=e._$origin.parent().attr("name"),c=n('img[usemap="#'+k+'"]'));var f=c[0].getBoundingClientRect(),d=n(t.window.document),g=n(t.window),l=c,i={available:{document:null,window:null},document:{size:{height:d.height(),width:d.width()}},window:{scroll:{left:t.window.scrollX||t.window.document.documentElement.scrollLeft,top:t.window.scrollY||t.window.document.documentElement.scrollTop},size:{height:g.height(),width:g.width()}},origin:{fixedLineage:!1,offset:{},size:{height:f.bottom-f.top,width:f.right-f.left},usemapImage:y?c[0]:null,windowOffset:{bottom:f.bottom,left:f.left,right:f.right,top:f.top}}};if(y&&(p=e._$origin.attr("shape"),r=e._$origin.attr("coords"),r&&(r=r.split(","),n.map(r,function(n,t){r[t]=parseInt(n)})),"default"!=p))switch(p){case"circle":var rt=r[0],ut=r[1],w=r[2],ft=ut-w,et=rt-w;i.origin.size.height=2*w;i.origin.size.width=i.origin.size.height;i.origin.windowOffset.left+=et;i.origin.windowOffset.top+=ft;break;case"rect":var nt=r[0],tt=r[1],ot=r[2],st=r[3];i.origin.size.height=st-tt;i.origin.size.width=ot-nt;i.origin.windowOffset.left+=nt;i.origin.windowOffset.top+=tt;break;case"poly":for(var o=0,s=0,a=0,v=0,b="even",h=0;h<r.length;h++)u=r[h],"even"==b?(u>a&&(a=u,0===h&&(o=a)),o>u&&(o=u),b="odd"):(u>v&&(v=u,1==h&&(s=v)),s>u&&(s=u),b="even");i.origin.size.height=v-s;i.origin.size.width=a-o;i.origin.windowOffset.left+=o;i.origin.windowOffset.top+=s}for(it=function(n){i.origin.size.height=n.height;i.origin.windowOffset.left=n.left;i.origin.windowOffset.top=n.top;i.origin.size.width=n.width},e._trigger({type:"geometry",edit:it,geometry:{height:i.origin.size.height,left:i.origin.windowOffset.left,top:i.origin.windowOffset.top,width:i.origin.size.width}}),i.origin.windowOffset.right=i.origin.windowOffset.left+i.origin.size.width,i.origin.windowOffset.bottom=i.origin.windowOffset.top+i.origin.size.height,i.origin.offset.left=i.origin.windowOffset.left+i.window.scroll.left,i.origin.offset.top=i.origin.windowOffset.top+i.window.scroll.top,i.origin.offset.bottom=i.origin.offset.top+i.origin.size.height,i.origin.offset.right=i.origin.offset.left+i.origin.size.width,i.available.document={bottom:{height:i.document.size.height-i.origin.offset.bottom,width:i.document.size.width},left:{height:i.document.size.height,width:i.origin.offset.left},right:{height:i.document.size.height,width:i.document.size.width-i.origin.offset.right},top:{height:i.origin.offset.top,width:i.document.size.width}},i.available.window={bottom:{height:Math.max(i.window.size.height-Math.max(i.origin.windowOffset.bottom,0),0),width:i.window.size.width},left:{height:i.window.size.height,width:Math.max(i.origin.windowOffset.left,0)},right:{height:i.window.size.height,width:Math.max(i.window.size.width-Math.max(i.origin.windowOffset.right,0),0)},top:{height:Math.max(i.origin.windowOffset.top,0),width:i.window.size.width}};"html"!=l[0].tagName.toLowerCase();){if("fixed"==l.css("position")){i.origin.fixedLineage=!0;break}l=l.parent()}return i},__optionsFormat:function(){return"number"==typeof this.__options.animationDuration&&(this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration]),"number"==typeof this.__options.delay&&(this.__options.delay=[this.__options.delay,this.__options.delay]),"number"==typeof this.__options.delayTouch&&(this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch]),"string"==typeof this.__options.theme&&(this.__options.theme=[this.__options.theme]),null===this.__options.parent?this.__options.parent=n(t.window.document.body):"string"==typeof this.__options.parent&&(this.__options.parent=n(this.__options.parent)),"hover"==this.__options.trigger?(this.__options.triggerOpen={mouseenter:!0,touchstart:!0},this.__options.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0}):"click"==this.__options.trigger&&(this.__options.triggerOpen={click:!0,tap:!0},this.__options.triggerClose={click:!0,tap:!0}),this._trigger("options"),this},__prepareGC:function(){var t=this;return t.__options.selfDestruction?t.__garbageCollector=setInterval(function(){var i=(new Date).getTime();t.__touchEvents=n.grep(t.__touchEvents,function(n){return i-n.time>6e4});r(t._$origin)||t.close(function(){t.destroy()})},2e4):clearInterval(t.__garbageCollector),t},__prepareOrigin:function(){var n=this,i;return(n._$origin.off("."+n.__namespace+"-triggerOpen"),t.hasTouchCapability&&n._$origin.on("touchstart."+n.__namespace+"-triggerOpen touchend."+n.__namespace+"-triggerOpen touchcancel."+n.__namespace+"-triggerOpen",function(t){n._touchRecordEvent(t)}),n.__options.triggerOpen.click||n.__options.triggerOpen.tap&&t.hasTouchCapability)&&(i="",n.__options.triggerOpen.click&&(i+="click."+n.__namespace+"-triggerOpen "),n.__options.triggerOpen.tap&&t.hasTouchCapability&&(i+="touchend."+n.__namespace+"-triggerOpen"),n._$origin.on(i,function(t){n._touchIsMeaningfulEvent(t)&&n._open(t)})),(n.__options.triggerOpen.mouseenter||n.__options.triggerOpen.touchstart&&t.hasTouchCapability)&&(i="",n.__options.triggerOpen.mouseenter&&(i+="mouseenter."+n.__namespace+"-triggerOpen "),n.__options.triggerOpen.touchstart&&t.hasTouchCapability&&(i+="touchstart."+n.__namespace+"-triggerOpen"),n._$origin.on(i,function(t){!n._touchIsTouchEvent(t)&&n._touchIsEmulatedEvent(t)||(n.__pointerIsOverOrigin=!0,n._openShortly(t))})),(n.__options.triggerClose.mouseleave||n.__options.triggerClose.touchleave&&t.hasTouchCapability)&&(i="",n.__options.triggerClose.mouseleave&&(i+="mouseleave."+n.__namespace+"-triggerOpen "),n.__options.triggerClose.touchleave&&t.hasTouchCapability&&(i+="touchend."+n.__namespace+"-triggerOpen touchcancel."+n.__namespace+"-triggerOpen"),n._$origin.on(i,function(t){n._touchIsMeaningfulEvent(t)&&(n.__pointerIsOverOrigin=!1)})),n},__prepareTooltip:function(){var t=this,i=t.__options.interactive?"auto":"";return t._$tooltip.attr("id",t.__namespace).css({"pointer-events":i,zIndex:t.__options.zIndex}),n.each(t.__previousThemes,function(n,i){t._$tooltip.removeClass(i)}),n.each(t.__options.theme,function(n,i){t._$tooltip.addClass(i)}),t.__previousThemes=n.merge([],t.__options.theme),t},__scrollHandler:function(i){var u=this,f,e,o,s;return u.__options.triggerClose.scroll?u._close(i):r(u._$origin)&&r(u._$tooltip)&&(f=null,i.target===t.window.document?u.__Geometry.origin.fixedLineage||u.__options.repositionOnScroll&&u.reposition(i):(f=u.__geometry(),e=!1,("fixed"!=u._$origin.css("position")&&u.__$originParents.each(function(t,i){var u=n(i),o=u.css("overflow-x"),s=u.css("overflow-y"),r;return("visible"!=o||"visible"!=s)&&((r=i.getBoundingClientRect(),"visible"!=o&&(f.origin.windowOffset.left<r.left||f.origin.windowOffset.right>r.right))||"visible"!=s&&(f.origin.windowOffset.top<r.top||f.origin.windowOffset.bottom>r.bottom))?(e=!0,!1):"fixed"==u.css("position")?!1:void 0}),e)?u._$tooltip.css("visibility","hidden"):(u._$tooltip.css("visibility","visible"),u.__options.repositionOnScroll)?u.reposition(i):(o=f.origin.offset.left-u.__Geometry.origin.offset.left,s=f.origin.offset.top-u.__Geometry.origin.offset.top,u._$tooltip.css({left:u.__lastPosition.coord.left+o,top:u.__lastPosition.coord.top+s}))),u._trigger({type:"scroll",event:i,geo:f})),u},__stateSet:function(n){return this.__state=n,this._trigger({type:"state",state:n}),this},__timeoutsClear:function(){return clearTimeout(this.__timeouts.open),this.__timeouts.open=null,n.each(this.__timeouts.close,function(n,t){clearTimeout(t)}),this.__timeouts.close=[],this},__trackerStart:function(){var n=this,t=n._$tooltip.find(".tooltipster-content");return n.__options.trackTooltip&&(n.__contentBcr=t[0].getBoundingClientRect()),n.__tracker=setInterval(function(){var i,u,f;r(n._$origin)&&r(n._$tooltip)?(n.__options.trackOrigin&&(i=n.__geometry(),u=!1,e(i.origin.size,n.__Geometry.origin.size)&&(n.__Geometry.origin.fixedLineage?e(i.origin.windowOffset,n.__Geometry.origin.windowOffset)&&(u=!0):e(i.origin.offset,n.__Geometry.origin.offset)&&(u=!0)),u||(n.__options.triggerClose.mouseleave?n._close():n.reposition())),n.__options.trackTooltip&&(f=t[0].getBoundingClientRect(),f.height===n.__contentBcr.height&&f.width===n.__contentBcr.width||(n.reposition(),n.__contentBcr=f))):n._close()},n.__options.trackerInterval),n},_close:function(i,r,u){var f=this,s=!0,e,o;if(f._trigger({type:"close",event:i,stop:function(){s=!1}}),s||u)if(r&&f.__callbacks.close.push(r),f.__callbacks.open=[],f.__timeoutsClear(),e=function(){n.each(f.__callbacks.close,function(n,t){t.call(f,f,{event:i,origin:f._$origin[0]})});f.__callbacks.close=[]},"closed"!=f.__state){var h=!0,l=new Date,a=l.getTime(),c=a+f.__options.animationDuration[1];("disappearing"==f.__state&&c>f.__closingTime&&f.__options.animationDuration[1]>0&&(h=!1),h)&&(f.__closingTime=c,"disappearing"!=f.__state&&f.__stateSet("disappearing"),o=function(){clearInterval(f.__tracker);f._trigger({type:"closing",event:i});f._$tooltip.off("."+f.__namespace+"-triggerClose").removeClass("tooltipster-dying");n(t.window).off("."+f.__namespace+"-triggerClose");f.__$originParents.each(function(t,i){n(i).off("scroll."+f.__namespace+"-triggerClose")});f.__$originParents=null;n(t.window.document.body).off("."+f.__namespace+"-triggerClose");f._$origin.off("."+f.__namespace+"-triggerClose");f._off("dismissable");f.__stateSet("closed");f._trigger({type:"after",event:i});f.__options.functionAfter&&f.__options.functionAfter.call(f,f,{event:i,origin:f._$origin[0]});e()},t.hasTransitions?(f._$tooltip.css({"-moz-animation-duration":f.__options.animationDuration[1]+"ms","-ms-animation-duration":f.__options.animationDuration[1]+"ms","-o-animation-duration":f.__options.animationDuration[1]+"ms","-webkit-animation-duration":f.__options.animationDuration[1]+"ms","animation-duration":f.__options.animationDuration[1]+"ms","transition-duration":f.__options.animationDuration[1]+"ms"}),f._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"),f.__options.animationDuration[1]>0&&f._$tooltip.delay(f.__options.animationDuration[1]),f._$tooltip.queue(o)):f._$tooltip.stop().fadeOut(f.__options.animationDuration[1],o))}else e();return f},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_open:function(i,u){var f=this,s,h,e,o;if(!f.__destroying&&r(f._$origin)&&f.__enabled&&(s=!0,"closed"==f.__state&&(f._trigger({type:"before",event:i,stop:function(){s=!1}}),s&&f.__options.functionBefore&&(s=f.__options.functionBefore.call(f,f,{event:i,origin:f._$origin[0]}))),s!==!1&&null!==f.__Content)){if(u&&f.__callbacks.open.push(u),f.__callbacks.close=[],f.__timeoutsClear(),e=function(){"stable"!=f.__state&&f.__stateSet("stable");n.each(f.__callbacks.open,function(n,t){t.call(f,f,{origin:f._$origin[0],tooltip:f._$tooltip[0]})});f.__callbacks.open=[]},"closed"!==f.__state)h=0,"disappearing"===f.__state?(f.__stateSet("appearing"),t.hasTransitions?(f._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"),f.__options.animationDuration[0]>0&&f._$tooltip.delay(f.__options.animationDuration[0]),f._$tooltip.queue(e)):f._$tooltip.stop().fadeIn(e)):"stable"==f.__state&&e();else{if(f.__stateSet("appearing"),h=f.__options.animationDuration[0],f.__contentInsert(),f.reposition(i,!0),t.hasTransitions?(f._$tooltip.addClass("tooltipster-"+f.__options.animation).addClass("tooltipster-initial").css({"-moz-animation-duration":f.__options.animationDuration[0]+"ms","-ms-animation-duration":f.__options.animationDuration[0]+"ms","-o-animation-duration":f.__options.animationDuration[0]+"ms","-webkit-animation-duration":f.__options.animationDuration[0]+"ms","animation-duration":f.__options.animationDuration[0]+"ms","transition-duration":f.__options.animationDuration[0]+"ms"}),setTimeout(function(){"closed"!=f.__state&&(f._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"),f.__options.animationDuration[0]>0&&f._$tooltip.delay(f.__options.animationDuration[0]),f._$tooltip.queue(e))},0)):f._$tooltip.css("display","none").fadeIn(f.__options.animationDuration[0],e),f.__trackerStart(),n(t.window).on("resize."+f.__namespace+"-triggerClose",function(t){var i=n(document.activeElement);(i.is("input")||i.is("textarea"))&&n.contains(f._$tooltip[0],i[0])||f.reposition(t)}).on("scroll."+f.__namespace+"-triggerClose",function(n){f.__scrollHandler(n)}),f.__$originParents=f._$origin.parents(),f.__$originParents.each(function(t,i){n(i).on("scroll."+f.__namespace+"-triggerClose",function(n){f.__scrollHandler(n)})}),f.__options.triggerClose.mouseleave||f.__options.triggerClose.touchleave&&t.hasTouchCapability){f._on("dismissable",function(n){n.dismissable?n.delay?(o=setTimeout(function(){f._close(n.event)},n.delay),f.__timeouts.close.push(o)):f._close(n):clearTimeout(o)});var c=f._$origin,l="",a="",o=null;f.__options.interactive&&(c=c.add(f._$tooltip));f.__options.triggerClose.mouseleave&&(l+="mouseenter."+f.__namespace+"-triggerClose ",a+="mouseleave."+f.__namespace+"-triggerClose ");f.__options.triggerClose.touchleave&&t.hasTouchCapability&&(l+="touchstart."+f.__namespace+"-triggerClose",a+="touchend."+f.__namespace+"-triggerClose touchcancel."+f.__namespace+"-triggerClose");c.on(a,function(n){if(f._touchIsTouchEvent(n)||!f._touchIsEmulatedEvent(n)){var t="mouseleave"==n.type?f.__options.delay:f.__options.delayTouch;f._trigger({delay:t[1],dismissable:!0,event:n,type:"dismissable"})}}).on(l,function(n){!f._touchIsTouchEvent(n)&&f._touchIsEmulatedEvent(n)||f._trigger({dismissable:!1,event:n,type:"dismissable"})})}f.__options.triggerClose.originClick&&f._$origin.on("click."+f.__namespace+"-triggerClose",function(n){f._touchIsTouchEvent(n)||f._touchIsEmulatedEvent(n)||f._close(n)});(f.__options.triggerClose.click||f.__options.triggerClose.tap&&t.hasTouchCapability)&&setTimeout(function(){if("closed"!=f.__state){var i="",r=n(t.window.document.body);f.__options.triggerClose.click&&(i+="click."+f.__namespace+"-triggerClose ");f.__options.triggerClose.tap&&t.hasTouchCapability&&(i+="touchend."+f.__namespace+"-triggerClose");r.on(i,function(t){f._touchIsMeaningfulEvent(t)&&(f._touchRecordEvent(t),f.__options.interactive&&n.contains(f._$tooltip[0],t.target)||f._close(t))});f.__options.triggerClose.tap&&t.hasTouchCapability&&r.on("touchstart."+f.__namespace+"-triggerClose",function(n){f._touchRecordEvent(n)})}},0);f._trigger("ready");f.__options.functionReady&&f.__options.functionReady.call(f,f,{origin:f._$origin[0],tooltip:f._$tooltip[0]})}f.__options.timer>0&&(o=setTimeout(function(){f._close()},f.__options.timer+h),f.__timeouts.close.push(o))}return f},_openShortly:function(n){var t=this,r=!0,i;return"stable"!=t.__state&&"appearing"!=t.__state&&!t.__timeouts.open&&(t._trigger({type:"start",event:n,stop:function(){r=!1}}),r)&&(i=0==n.type.indexOf("touch")?t.__options.delayTouch:t.__options.delay,i[0]?t.__timeouts.open=setTimeout(function(){t.__timeouts.open=null;t.__pointerIsOverOrigin&&t._touchIsMeaningfulEvent(n)?(t._trigger("startend"),t._open(n)):t._trigger("startcancel")},i[0]):(t._trigger("startend"),t._open(n))),t},_optionsExtract:function(t,i){var f=this,u=n.extend(!0,{},i),r=f.__options[t];return r||(r={},n.each(i,function(n){var t=f.__options[n];void 0!==t&&(r[n]=t)})),n.each(u,function(t,i){void 0!==r[t]&&("object"!=typeof i||i instanceof Array||null==i||"object"!=typeof r[t]||r[t]instanceof Array||null==r[t]?u[t]=r[t]:n.extend(u[t],r[t]))}),u},_plug:function(t){var i=n.tooltipster._plugin(t);if(!i)throw new Error('The "'+t+'" plugin is not defined');return i.instance&&n.tooltipster.__bridge(i.instance,this,i.name),this},_touchIsEmulatedEvent:function(n){for(var i,r=!1,u=(new Date).getTime(),t=this.__touchEvents.length-1;t>=0;t--){if(i=this.__touchEvents[t],!(u-i.time<500))break;i.target===n.target&&(r=!0)}return r},_touchIsMeaningfulEvent:function(n){return this._touchIsTouchEvent(n)&&!this._touchSwiped(n.target)||!this._touchIsTouchEvent(n)&&!this._touchIsEmulatedEvent(n)},_touchIsTouchEvent:function(n){return 0==n.type.indexOf("touch")},_touchRecordEvent:function(n){return this._touchIsTouchEvent(n)&&(n.time=(new Date).getTime(),this.__touchEvents.push(n)),this},_touchSwiped:function(n){for(var i,r=!1,t=this.__touchEvents.length-1;t>=0;t--){if(i=this.__touchEvents[t],"touchmove"==i.type){r=!0;break}if("touchstart"==i.type&&n===i.target)break}return r},_trigger:function(){var t=Array.prototype.slice.apply(arguments);return"string"==typeof t[0]&&(t[0]={type:t[0]}),t[0].instance=this,t[0].origin=this._$origin?this._$origin[0]:null,t[0].tooltip=this._$tooltip?this._$tooltip[0]:null,this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,t),n.tooltipster._trigger.apply(n.tooltipster,t),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,t),this},_unplug:function(t){var i=this,r;return i[t]&&(r=n.tooltipster._plugin(t),r.instance&&n.each(r.instance,function(n){i[n]&&i[n].bridged===i[t]&&delete i[n]}),i[t].__destroy&&i[t].__destroy(),delete i[t]),i},close:function(n){return this.__destroyed?this.__destroyError():this._close(null,n),this},content:function(n){var i=this,r;return void 0===n?i.__Content:(i.__destroyed?i.__destroyError():(i.__contentSet(n),null!==i.__Content)?"closed"!==i.__state&&(i.__contentInsert(),i.reposition(),i.__options.updateAnimation)&&(t.hasTransitions?(r=i.__options.updateAnimation,i._$tooltip.addClass("tooltipster-update-"+r),setTimeout(function(){"closed"!=i.__state&&i._$tooltip.removeClass("tooltipster-update-"+r)},1e3)):i._$tooltip.fadeTo(200,.5,function(){"closed"!=i.__state&&i._$tooltip.fadeTo(200,1)})):i._close(),i)},destroy:function(){var i=this,r,u;return i.__destroyed?i.__destroyError():("closed"!=i.__state?i.option("animationDuration",0)._close(null,null,!0):i.__timeoutsClear(),i._trigger("destroy"),i.__destroyed=!0,i._$origin.removeData(i.__namespace).off("."+i.__namespace+"-triggerOpen"),n(t.window.document.body).off("."+i.__namespace+"-triggerOpen"),r=i._$origin.data("tooltipster-ns"),r&&(1===r.length?(u=null,"previous"==i.__options.restoration?u=i._$origin.data("tooltipster-initialTitle"):"current"==i.__options.restoration&&(u="string"==typeof i.__Content?i.__Content:n("<div><\/div>").append(i.__Content).html()),u&&i._$origin.attr("title",u),i._$origin.removeClass("tooltipstered"),i._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle")):(r=n.grep(r,function(n){return n!==i.__namespace}),i._$origin.data("tooltipster-ns",r))),i._trigger("destroyed"),i._off(),i.off(),i.__Content=null,i.__$emitterPrivate=null,i.__$emitterPublic=null,i.__options.parent=null,i._$origin=null,i._$tooltip=null,n.tooltipster.__instancesLatestArr=n.grep(n.tooltipster.__instancesLatestArr,function(n){return i!==n}),clearInterval(i.__garbageCollector)),i},disable:function(){return this.__destroyed?(this.__destroyError(),this):(this._close(),this.__enabled=!1,this)},elementOrigin:function(){return this.__destroyed?void this.__destroyError():this._$origin[0]},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null},enable:function(){return this.__enabled=!0,this},hide:function(n){return this.close(n)},instance:function(){return this},off:function(){return this.__destroyed||this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},open:function(n){return this.__destroyed?this.__destroyError():this._open(null,n),this},option:function(t,i){return void 0===i?this.__options[t]:(this.__destroyed?this.__destroyError():(this.__options[t]=i,this.__optionsFormat(),n.inArray(t,["trigger","triggerClose","triggerOpen"])>=0&&this.__prepareOrigin(),"selfDestruction"===t&&this.__prepareGC()),this)},reposition:function(n,t){var i=this;return i.__destroyed?i.__destroyError():"closed"!=i.__state&&r(i._$origin)&&(t||r(i._$tooltip))&&(t||i._$tooltip.detach(),i.__Geometry=i.__geometry(),i._trigger({type:"reposition",event:n,helper:{geo:i.__Geometry}})),i},show:function(n){return this.open(n)},status:function(){return{destroyed:this.__destroyed,enabled:this.__enabled,open:"closed"!==this.__state,state:this.__state}},triggerHandler:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},n.fn.tooltipster=function(){var t=Array.prototype.slice.apply(arguments),f="You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.",i;if(0===this.length)return this;if("string"==typeof t[0])return i="#*$~&",this.each(function(){var e=n(this).data("tooltipster-ns"),r=e?n(this).data(e[0]):null,u;if(!r)throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');if("function"!=typeof r[t[0]])throw new Error('Unknown method "'+t[0]+'"');return this.length>1&&"content"==t[0]&&(t[1]instanceof n||"object"==typeof t[1]&&null!=t[1]&&t[1].tagName)&&!r.__options.contentCloning&&r.__options.debug&&console.log(f),u=r[t[0]](t[1],t[2]),u!==r||"instance"===t[0]?(i=u,!1):void 0}),"#*$~&"!==i?i:this;n.tooltipster.__instancesLatestArr=[];var e=t[0]&&void 0!==t[0].multiple,l=e&&t[0].multiple||!e&&u.multiple,o=t[0]&&void 0!==t[0].content,r=o&&t[0].content||!o&&u.content,s=t[0]&&void 0!==t[0].contentCloning,a=s&&t[0].contentCloning||!s&&u.contentCloning,h=t[0]&&void 0!==t[0].debug,c=h&&t[0].debug||!h&&u.debug;return this.length>1&&(r instanceof n||"object"==typeof r&&null!=r&&r.tagName)&&!a&&c&&console.log(f),this.each(function(){var u=!1,f=n(this),r=f.data("tooltipster-ns"),i=null;r?l?u=!0:c&&(console.log("Tooltipster: one or more tooltips are already attached to the element below. Ignoring."),console.log(this)):u=!0;u&&(i=new n.Tooltipster(this,t[0]),r||(r=[]),r.push(i.__namespace),f.data("tooltipster-ns",r),f.data(i.__namespace,i),i.__options.functionInit&&i.__options.functionInit.call(i,i,{origin:this}),i._trigger("init"));n.tooltipster.__instancesLatestArr.push(i)}),this},s.prototype={__init:function(i){this.__$tooltip=i;this.__$tooltip.css({left:0,overflow:"hidden",position:"absolute",top:0}).find(".tooltipster-content").css("overflow","auto");this.$container=n('<div class="tooltipster-ruler"><\/div>').append(this.__$tooltip).appendTo(t.window.document.body)},__forceRedraw:function(){var n=this.__$tooltip.parent();this.__$tooltip.detach();this.__$tooltip.appendTo(n)},constrain:function(n,t){return this.constraints={width:n,height:t},this.__$tooltip.css({display:"block",height:"",overflow:"auto",width:n}),this},destroy:function(){this.__$tooltip.detach().find(".tooltipster-content").css({display:"",overflow:""});this.$container.remove()},free:function(){return this.constraints=null,this.__$tooltip.css({display:"",height:"",overflow:"visible",width:""}),this},measure:function(){var n,i;if(this.__forceRedraw(),n=this.__$tooltip[0].getBoundingClientRect(),i={size:{height:n.height||n.bottom-n.top,width:n.width||n.right-n.left}},this.constraints){var r=this.__$tooltip.find(".tooltipster-content"),f=this.__$tooltip.outerHeight(),e=r[0].getBoundingClientRect(),u={height:f<=this.constraints.height,width:n.width<=this.constraints.width&&e.width>=r[0].scrollWidth-1};i.fits=u.height&&u.width}return t.IE&&t.IE<=11&&i.size.width!==t.window.document.documentElement.clientWidth&&(i.size.width=Math.ceil(i.size.width)+1),i}},f=navigator.userAgent.toLowerCase(),-1!=f.indexOf("msie")?t.IE=parseInt(f.split("msie")[1]):-1!==f.toLowerCase().indexOf("trident")&&-1!==f.indexOf(" rv:11")?t.IE=11:-1!=f.toLowerCase().indexOf("edge/")&&(t.IE=parseInt(f.toLowerCase().split("edge/")[1])),o="tooltipster.sideTip",n.tooltipster._plugin({name:o,instance:{__defaults:function(){return{arrow:!0,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:"top",viewportAware:!0}},__init:function(n){var t=this;t.__instance=n;t.__namespace="tooltipster-sideTip-"+Math.round(1e6*Math.random());t.__previousState="closed";t.__options;t.__optionsFormat();t.__instance._on("state."+t.__namespace,function(n){"closed"==n.state?t.__close():"appearing"==n.state&&"closed"==t.__previousState&&t.__create();t.__previousState=n.state});t.__instance._on("options."+t.__namespace,function(){t.__optionsFormat()});t.__instance._on("reposition."+t.__namespace,function(n){t.__reposition(n.event,n.helper)})},__close:function(){this.__instance.content()instanceof n&&this.__instance.content().detach();this.__instance._$tooltip.remove();this.__instance._$tooltip=null},__create:function(){var t=n('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"><\/div><\/div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"><\/div><div class="tooltipster-arrow-background"><\/div><\/div><\/div><\/div>');this.__options.arrow||t.find(".tooltipster-box").css("margin",0).end().find(".tooltipster-arrow").hide();this.__options.minWidth&&t.css("min-width",this.__options.minWidth+"px");this.__options.maxWidth&&t.css("max-width",this.__options.maxWidth+"px");this.__instance._$tooltip=t;this.__instance._trigger("created")},__destroy:function(){this.__instance._off("."+self.__namespace)},__optionsFormat:function(){var t=this,i;(t.__options=t.__instance._optionsExtract(o,t.__defaults()),t.__options.position&&(t.__options.side=t.__options.position),"object"!=typeof t.__options.distance&&(t.__options.distance=[t.__options.distance]),t.__options.distance.length<4&&(void 0===t.__options.distance[1]&&(t.__options.distance[1]=t.__options.distance[0]),void 0===t.__options.distance[2]&&(t.__options.distance[2]=t.__options.distance[0]),void 0===t.__options.distance[3]&&(t.__options.distance[3]=t.__options.distance[1]),t.__options.distance={top:t.__options.distance[0],right:t.__options.distance[1],bottom:t.__options.distance[2],left:t.__options.distance[3]}),"string"==typeof t.__options.side)&&(i={top:"bottom",right:"left",bottom:"top",left:"right"},t.__options.side=[t.__options.side,i[t.__options.side]],"left"==t.__options.side[0]||"right"==t.__options.side[0]?t.__options.side.push("top","bottom"):t.__options.side.push("right","left"));6===n.tooltipster._env.IE&&t.__options.arrow!==!0&&(t.__options.arrow=!1)},__reposition:function(t,i){var r,u=this,p=u.__targetFind(i),e=[],l,a,f,h,v;u.__instance._$tooltip.detach();var o=u.__instance._$tooltip.clone(),c=n.tooltipster._getRuler(o),s=!1,y=u.__instance.option("animation");switch(y&&o.removeClass("tooltipster-"+y),n.each(["window","document"],function(r,f){var a=null,r,l,h;if(u.__instance._trigger({container:f,helper:i,satisfied:s,takeTest:function(n){a=n},results:e,type:"positionTest"}),1==a||0!=a&&0==s&&("window"!=f||u.__options.viewportAware))for(r=0;r<u.__options.side.length;r++)l={horizontal:0,vertical:0},h=u.__options.side[r],"top"==h||"bottom"==h?l.vertical=u.__options.distance[h]:l.horizontal=u.__options.distance[h],u.__sideChange(o,h),n.each(["natural","constrained"],function(n,r){if(a=null,u.__instance._trigger({container:f,event:t,helper:i,mode:r,results:e,satisfied:s,side:h,takeTest:function(n){a=n},type:"positionTest"}),1==a||0!=a&&0==s){var o={container:f,distance:l,fits:null,mode:r,outerSize:null,side:h,size:null,target:p[h],whole:null},y="natural"==r?c.free():c.constrain(i.geo.available[f][h].width-l.horizontal,i.geo.available[f][h].height-l.vertical),v=y.measure();if(o.size=v.size,o.outerSize={height:v.size.height+l.vertical,width:v.size.width+l.horizontal},o.fits="natural"==r?i.geo.available[f][h].width>=o.outerSize.width&&i.geo.available[f][h].height>=o.outerSize.height?!0:!1:v.fits,"window"==f&&(o.whole=o.fits?"top"==h||"bottom"==h?i.geo.origin.windowOffset.right>=u.__options.minIntersection&&i.geo.window.size.width-i.geo.origin.windowOffset.left>=u.__options.minIntersection:i.geo.origin.windowOffset.bottom>=u.__options.minIntersection&&i.geo.window.size.height-i.geo.origin.windowOffset.top>=u.__options.minIntersection:!1),e.push(o),o.whole)s=!0;else if("natural"==o.mode&&(o.fits||o.size.width<=i.geo.available[f][h].width))return!1}})}),u.__instance._trigger({edit:function(n){e=n},event:t,helper:i,results:e,type:"positionTested"}),e.sort(function(n,t){var i,r;return n.whole&&!t.whole?-1:!n.whole&&t.whole?1:n.whole&&t.whole?(i=u.__options.side.indexOf(n.side),r=u.__options.side.indexOf(t.side),r>i?-1:i>r?1:"natural"==n.mode?-1:1):n.fits&&!t.fits?-1:!n.fits&&t.fits?1:n.fits&&t.fits?(i=u.__options.side.indexOf(n.side),r=u.__options.side.indexOf(t.side),r>i?-1:i>r?1:"natural"==n.mode?-1:1):"document"==n.container&&"bottom"==n.side&&"natural"==n.mode?-1:1}),r=e[0],r.coord={},r.side){case"left":case"right":r.coord.top=Math.floor(r.target-r.size.height/2);break;case"bottom":case"top":r.coord.left=Math.floor(r.target-r.size.width/2)}switch(r.side){case"left":r.coord.left=i.geo.origin.windowOffset.left-r.outerSize.width;break;case"right":r.coord.left=i.geo.origin.windowOffset.right+r.distance.horizontal;break;case"top":r.coord.top=i.geo.origin.windowOffset.top-r.outerSize.height;break;case"bottom":r.coord.top=i.geo.origin.windowOffset.bottom+r.distance.vertical}"window"==r.container?"top"==r.side||"bottom"==r.side?r.coord.left<0?r.coord.left=i.geo.origin.windowOffset.right-this.__options.minIntersection>=0?0:i.geo.origin.windowOffset.right-this.__options.minIntersection-1:r.coord.left>i.geo.window.size.width-r.size.width&&(r.coord.left=i.geo.origin.windowOffset.left+this.__options.minIntersection<=i.geo.window.size.width?i.geo.window.size.width-r.size.width:i.geo.origin.windowOffset.left+this.__options.minIntersection+1-r.size.width):r.coord.top<0?r.coord.top=i.geo.origin.windowOffset.bottom-this.__options.minIntersection>=0?0:i.geo.origin.windowOffset.bottom-this.__options.minIntersection-1:r.coord.top>i.geo.window.size.height-r.size.height&&(r.coord.top=i.geo.origin.windowOffset.top+this.__options.minIntersection<=i.geo.window.size.height?i.geo.window.size.height-r.size.height:i.geo.origin.windowOffset.top+this.__options.minIntersection+1-r.size.height):(r.coord.left>i.geo.window.size.width-r.size.width&&(r.coord.left=i.geo.window.size.width-r.size.width),r.coord.left<0&&(r.coord.left=0));u.__sideChange(o,r.side);i.tooltipClone=o[0];i.tooltipParent=u.__instance.option("parent").parent[0];i.mode=r.mode;i.whole=r.whole;i.origin=u.__instance._$origin[0];i.tooltip=u.__instance._$tooltip[0];delete r.container;delete r.fits;delete r.mode;delete r.outerSize;delete r.whole;r.distance=r.distance.horizontal||r.distance.vertical;l=n.extend(!0,{},r);(u.__instance._trigger({edit:function(n){r=n},event:t,helper:i,position:l,type:"position"}),u.__options.functionPosition)&&(a=u.__options.functionPosition.call(u,u.__instance,i,l),a&&(r=a));c.destroy();"top"==r.side||"bottom"==r.side?(f={prop:"left",val:r.target-r.coord.left},h=r.size.width-this.__options.minIntersection):(f={prop:"top",val:r.target-r.coord.top},h=r.size.height-this.__options.minIntersection);f.val<this.__options.minIntersection?f.val=this.__options.minIntersection:f.val>h&&(f.val=h);v=i.geo.origin.fixedLineage?i.geo.origin.windowOffset:{left:i.geo.origin.windowOffset.left+i.geo.window.scroll.left,top:i.geo.origin.windowOffset.top+i.geo.window.scroll.top};r.coord={left:v.left+(r.coord.left-i.geo.origin.windowOffset.left),top:v.top+(r.coord.top-i.geo.origin.windowOffset.top)};u.__sideChange(u.__instance._$tooltip,r.side);i.geo.origin.fixedLineage?u.__instance._$tooltip.css("position","fixed"):u.__instance._$tooltip.css("position","");u.__instance._$tooltip.css({left:r.coord.left,top:r.coord.top,height:r.size.height,width:r.size.width}).find(".tooltipster-arrow").css({left:"",top:""}).css(f.prop,f.val);u.__instance._$tooltip.appendTo(u.__instance.option("parent"));u.__instance._trigger({type:"repositioned",event:t,position:r})},__sideChange:function(n,t){n.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-"+t)},__targetFind:function(n){var r={},i=this.__instance._$origin[0].getClientRects(),u,t;return i.length>1&&(u=this.__instance._$origin.css("opacity"),1==u&&(this.__instance._$origin.css("opacity",.99),i=this.__instance._$origin[0].getClientRects(),this.__instance._$origin.css("opacity",1))),i.length<2?(r.top=Math.floor(n.geo.origin.windowOffset.left+n.geo.origin.size.width/2),r.bottom=r.top,r.left=Math.floor(n.geo.origin.windowOffset.top+n.geo.origin.size.height/2),r.right=r.left):(t=i[0],r.top=Math.floor(t.left+(t.right-t.left)/2),t=i.length>2?i[Math.ceil(i.length/2)-1]:i[0],r.right=Math.floor(t.top+(t.bottom-t.top)/2),t=i[i.length-1],r.bottom=Math.floor(t.left+(t.right-t.left)/2),t=i.length>2?i[Math.ceil((i.length+1)/2)-1]:i[i.length-1],r.left=Math.floor(t.top+(t.bottom-t.top)/2)),r}}}),n});!function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};t.m=n;t.c=i;t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})};t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})};t.t=function(n,i){var r,u;if((1&i&&(n=t(n)),8&i)||4&i&&"object"==typeof n&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&i&&"string"!=typeof n)for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r};t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i};t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)};t.p="/";t(t.s=2)}([,,function(n,t,i){document.addEventListener("DOMContentLoaded",function(){});window.MediaRecorder=i(3)},function(n,t,i){function u(n){this.stream=n;this.state="inactive";this.em=document.createDocumentFragment();this.encoder=function(n){var t=n.toString().replace(/^function\s*\(\)\s*{/,"").replace(/}$/,""),i=new Blob([t]);return new Worker(URL.createObjectURL(i))}(u.encoder);var t=this;this.encoder.addEventListener("message",function(n){var i=new Event("dataavailable");i.data=new Blob([n.data],{type:t.mimeType});t.em.dispatchEvent(i);"inactive"===t.state&&t.em.dispatchEvent(new Event("stop"))})}var r,f=window.AudioContext||window.webkitAudioContext;u.prototype={mimeType:"audio/wav",start:function(n){if("inactive"===this.state){this.state="recording";r||(r=new f);var u=r.createMediaStreamSource(this.stream),i=r.createScriptProcessor(2048,1,1),t=this;i.onaudioprocess=function(n){"recording"===t.state&&t.encoder.postMessage(["encode",n.inputBuffer.getChannelData(0)])};u.connect(i);i.connect(r.destination);this.em.dispatchEvent(new Event("start"));n&&(this.slicing=setInterval(function(){"recording"===t.state&&t.requestData()},n))}},stop:function(){"inactive"!==this.state&&(this.requestData(),this.state="inactive",clearInterval(this.slicing))},pause:function(){"recording"===this.state&&(this.state="paused",this.em.dispatchEvent(new Event("pause")))},resume:function(){"paused"===this.state&&(this.state="recording",this.em.dispatchEvent(new Event("resume")))},requestData:function(){"inactive"!==this.state&&this.encoder.postMessage(["dump",r.sampleRate])},addEventListener:function(){this.em.addEventListener.apply(this.em,arguments)},removeEventListener:function(){this.em.removeEventListener.apply(this.em,arguments)},dispatchEvent:function(){this.em.dispatchEvent.apply(this.em,arguments)}};u.isTypeSupported=function(n){return/audio\/wave?/.test(n)};u.notSupported=!navigator.mediaDevices||!f;u.encoder=i(4);n.exports=u},function(n){n.exports=function(){var t=2,n=[];onmessage=function(i){"encode"===i.data[0]?function(i){for(var e,r,o=i.length,f=new Uint8Array(o*t),u=0;u<o;u++)e=u*t,r=i[u],r>1?r=1:r<-1&&(r=-1),r*=32768,f[e]=r,f[e+1]=r>>8;n.push(f)}(i.data[1]):function(i){var o=n.length?n[0].length:0,e=n.length*o,f=new Uint8Array(44+e),r=new DataView(f.buffer),u;for(r.setUint32(0,1380533830,!1),r.setUint32(4,36+e,!0),r.setUint32(8,1463899717,!1),r.setUint32(12,1718449184,!1),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,1,!0),r.setUint32(24,i,!0),r.setUint32(28,i*t,!0),r.setUint16(32,t,!0),r.setUint16(34,8*t,!0),r.setUint32(36,1684108385,!1),r.setUint32(40,e,!0),u=0;u<n.length;u++)f.set(n[u],u*o+44);n=[];postMessage(f.buffer,[f.buffer])}(i.data[1])}}}]);var EVENTS=["start","stop","pause","resume"],TYPES=["audio/webm","audio/ogg","audio/wav"],recorder,list,recordFull,recordParts,pause,resume,stop,request